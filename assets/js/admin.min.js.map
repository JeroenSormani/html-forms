{"version":3,"sources":["admin.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","require","undefined","define","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","1","module","openTab","tabTarget","this","getAttribute","_i","tabNavs","classList","toggle","blur","_i2","tabs","tab","document","title","replace","split","shift","innerText","preventDefault","querySelectorAll","addEventListener","2","./admin-tabs.js","./form-editor.js","3","updateShadowDOM","dom","innerHTML","editor","getValue","updateRequiredFields","fields","fieldNames","map","name","requiredFieldsInput","value","join","updateEmailFields","emailFieldsInput","CodeMirror","element","querySelector","createElement","getElementById","fromTextArea","selectionPointer","matchTags","bothTags","mode","htmlMode","autoCloseTags","autoRefresh","on","codemirror","codemirror/addon/edit/closetag.js","codemirror/addon/edit/matchtags","codemirror/addon/fold/xml-fold","codemirror/mode/css/css","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","4","mod","amd","autoCloseGT","cm","getOption","Pass","ranges","listSelections","replacements","empty","pos","head","tok","getTokenAt","inner","innerMode","getMode","state","tagName","opt","html","configuration","dontCloseTags","htmlDontClose","indentTags","htmlIndent","end","ch","slice","lowerTagName","toLowerCase","type","test","string","charAt","indexOf","closingTagExists","indent","text","newPos","Pos","line","info","replaceRange","anchor","sel","setSelections","indentLine","autoCloseCurrent","typingSlash","start","replacement","context","getLine","replaceSelections","autoCloseSlash","collection","elt","newTag","scanForClosingTag","Math","min","lastLine","nextClose","tag","cx","onCx","prev","to","next","defineOption","val","old","Init","removeKeyMap","whenClosing","whenOpening","addKeyMap","commands","closeTag","../../lib/codemirror","../fold/xml-fold","5","clear","tagHit","tagOther","doMatchTags","failedTagMatch","operation","somethingSelected","cur","getCursor","range","getViewport","from","max","match","findMatchingTag","matchBothTags","hit","at","open","close","markText","className","other","maybeUpdateMatch","off","toMatchingTag","found","extendSelection","6","cmp","b","Iter","firstLine","tagAt","iter","getTokenTypeAt","nextLine","prevLine","toTagEnd","gt","lastSlash","lastIndexOf","selfClose","toTagStart","lt","xmlTagStart","lastIndex","exec","index","toNextTag","toPrevTag","findMatchingClose","stack","startLine","startCh","push","findMatchingOpen","endLine","endCh","nameStartChar","RegExp","registerHelper","openTag","startPos","endPos","here","findEnclosingTag","forward","7","global","factory","classTest","cls","removeChildren","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","content","style","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","node","current","joinClasses","as","bind","args","Array","arguments","apply","copyObj","target","overwrite","prop","hasOwnProperty","countColumn","tabSize","startIndex","startValue","search","nextTab","array","findColumn","goal","col","skipped","spaceStr","spaceStrs","lst","arr","out","insertSorted","score","priority","splice","nothing","createObj","base","props","inst","Object","create","isWordCharBasic","toUpperCase","nonASCIISingleCaseWordChar","isWordChar","helper","source","isEmpty","isExtendingChar","charCodeAt","extendingChars","skipExtendingChars","str","dir","findFirst","pred","abs","mid","floor","Display","place","doc","input","d","scrollbarFiller","gutterFiller","lineDiv","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","lines","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","scroller","wrapper","ie","ie_version","zIndex","paddingRight","webkit","gecko","mobile","draggable","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","selForContextMenu","activeTouch","init","size","chunk","children","sz","chunkSize","getBetween","getLines","updateLineHeight","height","diff","lineNo","no","_lineAtHeight","h","outer","i$1","lh","isLine","lineNumberFor","options","String","lineNumberFormatter","firstLineNumber","sticky","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","_clipPos","last","clipToLen","linelen","clipPosArray","seeReadOnlySpans","sawReadOnlySpans","seeCollapsedSpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","markedSpans","concat","attachLine","markedSpansBefore","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","span$1","found$1","clearEmptySpans","newMarkers","gapMarkers","gap","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","m","find","j","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","id","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","lineLength","len","findMaxLine","display","iterateBidiSections","order","part","level","getBidiPartAt","bidiOther","getOrder","direction","bidiOrdering","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","prepareMeasureForLine","targetTop","measureCharPrepared","top","moveVisually","bidi","partPos","mv","getWrappedLineExtent","lineWrapping","wrappedLineExtentChar","begin","wrappedLineExtent","searchInVisualLine","getRes","res","nextCh","getHandlers","emitter","_handlers","noHandlers","removeEventListener","detachEvent","map$$1","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","set","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","mac","ctrlKey","zeroWidthElement","zwspSupported","offsetHeight","offsetWidth","hasBadBidiRects","badBidiRects","txt","r0","getBoundingClientRect","r1","left","right","hasBadZoomedRects","badZoomedRects","normal","fromRange","defineMode","dependencies","modes","defineMIME","mime","spec","mimeModes","resolveMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","startState","a1","a2","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","overlays","overlay","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","result","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","Context","findStartLine","saved","fromSaved","processLine","startAt","stream","StringStream","callBlankLine","eol","readToken","blankLine","token","takeToken","asArray","tokens","Token","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","after","SavedContext","lookAhead","indented","retreatFrontier","updateLine","estimateHeight","estHeight","cleanUpLine","interpretTokenStyle","cache","styleToClassCacheWithMode","styleToClassCache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","maps","caches","lastChild","defaultSpecialCharPlaceholder","toString","startStyle","endStyle","css","displayText","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","j$1","j$2","upto","tokenText","LineView","hidden","buildViewArray","nextPos","pushOperation","op","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","signalLater","list","orphanDelayedCallbacks","setTimeout","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","background","wrap","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterWidth","alignable","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","clientWidth","eventInWidget","paddingTop","offsetTop","paddingVert","paddingH","window","getComputedStyle","currentStyle","data","parseInt","isNaN","scrollGap","displayWidth","displayHeight","clientHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","before","updateExternalMeasurement","measureChar","bias","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","nodeAndOffsetInLineMap","collapse","mStart","mEnd","coverStart","coverEnd","getUsefulRect","nullRect","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","pageScrollX","chrome","android","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","intoCoordSystem","includeWidgets","yOff","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","get","getBidi","invert","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","mergedPos","assign","prevDiff","prevPos","beginLeft","steps","ceil","prevPos$1","diff_change_per_step","box","textHeight","measureText","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","selection","primIndex","range$$1","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","add","fragment","rightSide","drawForLine","fromArg","toArg","lineLen","rightPos","leftPos","tmp","leftSide","padding","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","reset","receivedFocus","rmClass","updateHeightsInViewport","prevBottom","updateWidgetHeight","visibleLines","viewport","ensure","ensureFrom","ensureTo","alignHorizontally","comp","gutterW","align","maybeUpdateLineNumberWidth","innerW","updateGutterSpace","maybeScrollWindow","doScroll","innerHeight","phantom","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","measureForScrollbars","docH","viewHeight","viewWidth","barLeft","docHeight","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","update","paddingBottom","borderBottom","coverGutterNextToScrollbar","initScrollbars","scrollbarModel","scrollbarStyle","axis","_startOperation","viewChanged","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","nextOpId","_endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","i$4","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","minWidth","takeFocus","hasFocus","setDocumentHeight","postUpdateDisplay","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","regChange","lendiff","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","time","highlight","highlightWorker","Date","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","marginBottom","borderRightWidth","selectionSnapshot","active","getSelection","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","createRange","setEnd","removeAllRanges","addRange","editorIsHidden","force","visible","viewportMargin","different","wrapperHeight","toUpdate","selSnapshot","patchDisplay","minHeight","oldDisplayWidth","updateNumbersFrom","rm","currentWheelTarget","container","updateNumber","updateGutters","specs","gElt","setGuttersForLineNumbers","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","wheelPixelsPerUnit","onScrollWheel","scroll","canScrollX","canScrollY","presto","pixels","wheelSamples","movedX","movedY","sample","normalizeSelection","prim","sort","inv","Range","Selection","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","linesFor","Line","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","origin","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","equals","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","events","newGroup","instantiateSel","copy","event","deepCopy","newChanges","Number","extendRange","posBefore","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","this$1","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","atomic","near","movePos","far","cantEdit","selectAll","sel_dontScroll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","_replaceRange","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","adjustScrollWhenAboveVisible","addLineWidget","LineWidget","insertAt","aboveVisible","_markText","markTextShared","TextMarker","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","nextMarkerId","cloneNode","isParent","SharedTextMarker","findSharedMarkers","findMarks","clipPos","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","onDrop","clearDragCursor","lastDrop","files","dataTransfer","isReadOnly","FileReader","File","read","file","allowDropFileTypes","reader","onload","lineSeparator","readAsText","draggingText","text$1","getData","selected","replaceSelection","onDragStart","setData","effectAllowed","setDragImage","safari","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","ensureGlobalHandlers","globalsRegistered","registerGlobalHandlers","resizeTimer","onResize","setSize","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","keyNames","keyCode","addModifierNames","noShift","altKey","flipCtrlCmd","metaKey","shiftKey","keyName","altGraphKey","keyMap","deleteNearSelection","compute","kill","toKill","replaced","lineStart","visual","lineEnd","lineStartSmart","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","dispatchKey","seq","keySeq","stopSeq","handleKeyBinding","motion","handleCharBinding","onKeyDown","handled","lastStoppedKey","hasCopyEvent","showCrossHair","up","onKeyUp","onKeyPress","charCode","fromCharCode","clickRepeat","now","lastDoubleClick","compare","lastClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","captureRightClick","onContextMenu","configureMouse","option","unit","chromeOS","addNew","moveOnDrag","contained","behavior","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","e2","rangeForUnit","findWordAt","extendTo","lastPos","startCol","posCol","startSel","ourIndex","oldRange","ourRange","ranges$1","sel_mouse","curCount","counter","editorSize","move","gutterEvent","prevent","mX","mY","lineBox","g","contextMenuInGutter","themeChanged","theme","guttersChanged","dragDropChanged","funcs","dragFunctions","enter","over","leave","drop","wrappingChanged","CodeMirror$1","defaults","Doc","inputStyles","inputStyle","pasteIncoming","cutIncoming","Delayed","autofocus","registerEventHandlers","optionHandlers","finishInit","initHooks","textRendering","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","word","clearTimeout","pageX","pageY","coordsChar","inp","getField","how","aggressive","curSpace","indentation","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","setLastCopied","newLastCopied","lastCopied","applyTextInput","inserted","deleted","paste","textLines","splitLinesAuto","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","getRange","disableBrowserMagic","field","spellcheck","hiddenTextarea","te","div","ios","border","_findPosH","findNextLine","moveOnce","boundToLine","origDir","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","posToDOM","side","isInGutter","scan","badPos","bad","domTextBetween","recognizeMarker","closing","lineSep","addText","walk","cmText","textContent","markerID","isBlock","nodeName","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist","previousSibling","dist$1","textarea","tabindex","tabIndex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","getWrapperElement","userAgent","navigator","platform","ie_upto10","ie_11up","edge","documentMode","qtwebkit","vendor","mac_geMountainLion","windows","presto_version","endNode","setStart","createTextRange","moveToElementText","moveEnd","moveStart","selectInput","select","selectionStart","selectionEnd","_e","ms","sel_move","charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","types","type$1","prev$1","type$2","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","i$7","nstart","unshift","reverse","attachEvent","nl","rt","hasSelection","ownerDocument","parentElement","compareEndPoints","oncopy","lineOracle","lastColumnPos","lastColumnValue","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","oracle","maxLookAhead","NativeScrollbars","vert","horiz","checkedZeroWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","w","pointerEvents","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","native","null","there","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","oldH","withOp","dHeight","nextDocId","cleanGeneration","setValue","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","addSelection","getSelections","dup","newSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","127","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","delWrappedLineRight","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","defineInitHook","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","poll","pollSelection","pollInterval","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","prepareCopyCut","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","prepareSelectAllHack","extval","rehide","oldWrapperCSS","oldCSS","detectingSelectAll","resetSelectionOnContextMenu","wrapperBox","oldScrollY","scrollY","scrollTo","mouseup","disabled","deflt","notOnInit","newBreaks","refresh","getInputField","detach","attach","integer","helpers","setOption","getDoc","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getHelpers","help","_global","getStateAfter","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","check","getScrollInfo","interpret","startOperation","endOperation","swapDoc","getScrollerElement","getGutterElement","registerGlobalHelper","predicate","dontDelegate","method","contenteditable","defineExtension","func","defineDocExtension","cmpPos","version","keySet","tokenCComment","maybeEnd","tokenize","config","parserConfig","ret","tp","tokenBase","tokenHooks","tokenString","tokenParenthesized","quote","escaped","pushContext","popContext","pass","states","popAndPass","wordAsValue","valueKeywords","colorKeywords","inline","propertyKeywords","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","allowNested","lineComment","supportsAtComponent","stateArg","block","maybeprop","propBlock","_stream","parens","pseudo","atBlock","atComponentBlock","atBlock_parens","restricted_atBlock_before","restricted_atBlock","keyframes","interpolation","textAfter","blockCommentStart","blockCommentEnd","fold","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","fontProperties_","counterDescriptors_","colorKeywords_","valueKeywords_","allWords","/",":","$","#","@","&","maybeBackup","pat","getAttrRegexp","attr","regexp","attrRegexpCache","getAttrValue","getTagRegexp","anchored","addTags","findMatchingMode","tagInfo","tagText","defaultTags","script","htmlState","tags","inTag","endTagA","endTag","localState","localMode","multilineTagIndentFactor","multilineTagIndentPastTag","configTags","configScript","scriptTypes","matches","local","../css/css","../javascript/javascript","../xml/xml","10","readRegexp","inSet","cont","tokenComment","expressionAllowed","isOperatorChar","tokenQuasi","lexical","wordRE","lastType","keywords","propertyIsEnumerable","kw","jsonldMode","isJsonldKeyword","findFatArrow","fatArrowAt","arrow","isTS","depth","sawSomething","bracket","brackets","JSLexical","inScope","varname","localVars","vars","parseJS","cc","marked","jsonMode","expression","statement","lex","register","inList","globalVars","pushcontext","defaultVars","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","maybeelse","functiondef","forspec","typeexpr","maybelabel","funarg","afterExport","afterImport","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","atomicTypes","classExpression","maybeexpressionNoComma","maybeexpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","expr","property","continueQuasi","targetNoComma","maybeTypeArgs","_","getterSetter","afterprop","what","sep","proceed","maybetype","afterType","typeprop","typearg","maybeReturnType","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","isContinuedStatement","statementIndent","jsonld","json","typescript","wordCharacters","A","B","C","operator","atom","jsKeywords","if","while","with","else","do","try","finally","return","break","continue","new","delete","throw","debugger","var","const","let","function","catch","for","switch","case","default","in","typeof","instanceof","true","false","class","super","yield","export","import","extends","await","tsKeywords","interface","implements","namespace","enum","public","private","protected","abstract","readonly","number","boolean","any","variable","jsonld-keyword","basecolumn","firstChar","c","doubleIndentSwitch","closeBrackets","skipExpression","11","htmlConfig","autoSelfClosers","area","br","command","embed","frame","hr","keygen","meta","param","track","wbr","menuitem","implicitlyClosed","dd","li","optgroup","rp","tbody","td","tfoot","tr","contextGrabbers","dt","address","article","aside","blockquote","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","header","hgroup","menu","nav","ol","section","table","ul","thead","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","editorConf","config_","inText","chain","parser","inBlock","doctype","baseState","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","setStyle","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","isInText","baseIndent","fullLine","alignCDATA","tagAfter","grabbers","skipAttribute"],"mappings":"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","file":"admin.min.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n(function () {\n  var require = undefined;var module = undefined;var exports = undefined;var define = undefined;(function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;if (!u && a) return a(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n        }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }return n[o].exports;\n    }var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n      s(r[o]);\n    }return s;\n  })({ 1: [function (require, module, exports) {\n      'use strict';\n\n      var tabs = document.querySelectorAll('.hf-tab');\n      var tabNavs = document.querySelectorAll('#hf-tabs-nav a');\n      for (var i = 0; i < tabNavs.length; i++) {\n        tabNavs[i].addEventListener('click', openTab);\n      }\n\n      function openTab(e) {\n        var tabTarget = this.getAttribute('data-tab-target');\n        for (var _i = 0; _i < tabNavs.length; _i++) {\n          tabNavs[_i].classList.toggle('nav-tab-active', tabNavs[_i] === this);\n        }\n        this.blur();\n\n        for (var _i2 = 0; _i2 < tabs.length; _i2++) {\n          var tab = tabs[_i2];\n          tab.classList.toggle('hf-tab-active', tab.getAttribute('data-tab') === tabTarget);\n        }\n\n        document.title = document.title.replace(document.title.split(' - ').shift(), this.innerText + \" \");\n\n        e.preventDefault();\n      }\n    }, {}], 2: [function (require, module, exports) {\n      'use strict';\n\n      require('./admin-tabs.js');\n      require('./form-editor.js');\n    }, { \"./admin-tabs.js\": 1, \"./form-editor.js\": 3 }], 3: [function (require, module, exports) {\n      'use strict';\n\n      // load CodeMirror & plugins\n\n      var CodeMirror = require('codemirror');\n      require('codemirror/mode/xml/xml');\n      require('codemirror/mode/javascript/javascript');\n      require('codemirror/mode/css/css');\n      require('codemirror/mode/htmlmixed/htmlmixed');\n      require('codemirror/addon/fold/xml-fold');\n      require('codemirror/addon/edit/matchtags');\n      require('codemirror/addon/edit/closetag.js');\n\n      var editor = void 0,\n          element = document.querySelector('#hf-form-editor'),\n          dom = document.createElement('form'),\n          requiredFieldsInput = document.getElementById('hf-required-fields'),\n          emailFieldsInput = document.getElementById('hf-email-fields');\n\n      if (element) {\n        dom.innerHTML = element.value;\n\n        editor = CodeMirror.fromTextArea(element, {\n          selectionPointer: true,\n          matchTags: { bothTags: true },\n          mode: \"htmlmixed\",\n          htmlMode: true,\n          autoCloseTags: true,\n          autoRefresh: true\n        });\n\n        editor.on('update', updateShadowDOM);\n        editor.on('blur', updateRequiredFields);\n        editor.on('blur', updateEmailFields);\n      }\n\n      function updateShadowDOM() {\n        dom.innerHTML = editor.getValue();\n      }\n\n      // TODO: Convert nested fields to dot notation here.\n      function updateRequiredFields() {\n        var fields = dom.querySelectorAll('[required]');\n        var fieldNames = [].map.call(fields, function (f) {\n          return f.name.replace('[]', '').replace(/\\[(\\w+)\\]/g, '.$1');\n        });\n        requiredFieldsInput.value = fieldNames.join(',');\n      }\n\n      // TODO: Convert nested fields to dot notation here.\n      function updateEmailFields() {\n        var fields = dom.querySelectorAll('input[type=\"email\"]');\n        var fieldNames = [].map.call(fields, function (f) {\n          return f.name;\n        });\n        emailFieldsInput.value = fieldNames.join(',');\n      }\n    }, { \"codemirror\": 7, \"codemirror/addon/edit/closetag.js\": 4, \"codemirror/addon/edit/matchtags\": 5, \"codemirror/addon/fold/xml-fold\": 6, \"codemirror/mode/css/css\": 8, \"codemirror/mode/htmlmixed/htmlmixed\": 9, \"codemirror/mode/javascript/javascript\": 10, \"codemirror/mode/xml/xml\": 11 }], 4: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      /**\n       * Tag-closer extension for CodeMirror.\n       *\n       * This extension adds an \"autoCloseTags\" option that can be set to\n       * either true to get the default behavior, or an object to further\n       * configure its behavior.\n       *\n       * These are supported options:\n       *\n       * `whenClosing` (default true)\n       *   Whether to autoclose when the '/' of a closing tag is typed.\n       * `whenOpening` (default true)\n       *   Whether to autoclose the tag when the final '>' of an opening\n       *   tag is typed.\n       * `dontCloseTags` (default is empty tags for HTML, none for XML)\n       *   An array of tag names that should not be autoclosed.\n       * `indentTags` (default is block tags for HTML, none for XML)\n       *   An array of tag names that should, when opened, cause a\n       *   blank line to be added inside the tag, and the blank line and\n       *   closing line to be indented.\n       *\n       * See demos/closetag.html for a usage example.\n       */\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        CodeMirror.defineOption(\"autoCloseTags\", false, function (cm, val, old) {\n          if (old != CodeMirror.Init && old) cm.removeKeyMap(\"autoCloseTags\");\n          if (!val) return;\n          var map = { name: \"autoCloseTags\" };\n          if ((typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) != \"object\" || val.whenClosing) map[\"'/'\"] = function (cm) {\n            return autoCloseSlash(cm);\n          };\n          if ((typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) != \"object\" || val.whenOpening) map[\"'>'\"] = function (cm) {\n            return autoCloseGT(cm);\n          };\n          cm.addKeyMap(map);\n        });\n\n        var htmlDontClose = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"wbr\"];\n        var htmlIndent = [\"applet\", \"blockquote\", \"body\", \"button\", \"div\", \"dl\", \"fieldset\", \"form\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"head\", \"html\", \"iframe\", \"layer\", \"legend\", \"object\", \"ol\", \"p\", \"select\", \"table\", \"ul\"];\n\n        function autoCloseGT(cm) {\n          if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n          var ranges = cm.listSelections(),\n              replacements = [];\n          for (var i = 0; i < ranges.length; i++) {\n            if (!ranges[i].empty()) return CodeMirror.Pass;\n            var pos = ranges[i].head,\n                tok = cm.getTokenAt(pos);\n            var inner = CodeMirror.innerMode(cm.getMode(), tok.state),\n                state = inner.state;\n            if (inner.mode.name != \"xml\" || !state.tagName) return CodeMirror.Pass;\n\n            var opt = cm.getOption(\"autoCloseTags\"),\n                html = inner.mode.configuration == \"html\";\n            var dontCloseTags = (typeof opt === \"undefined\" ? \"undefined\" : _typeof(opt)) == \"object\" && opt.dontCloseTags || html && htmlDontClose;\n            var indentTags = (typeof opt === \"undefined\" ? \"undefined\" : _typeof(opt)) == \"object\" && opt.indentTags || html && htmlIndent;\n\n            var tagName = state.tagName;\n            if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n            var lowerTagName = tagName.toLowerCase();\n            // Don't process the '>' at the end of an end-tag or self-closing tag\n            if (!tagName || tok.type == \"string\" && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) || tok.type == \"tag\" && state.type == \"closeTag\" || tok.string.indexOf(\"/\") == tok.string.length - 1 || // match something like <someTagName />\n            dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 || closingTagExists(cm, tagName, pos, state, true)) return CodeMirror.Pass;\n\n            var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n            replacements[i] = { indent: indent,\n              text: \">\" + (indent ? \"\\n\\n\" : \"\") + \"</\" + tagName + \">\",\n              newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1) };\n          }\n\n          for (var i = ranges.length - 1; i >= 0; i--) {\n            var info = replacements[i];\n            cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, \"+insert\");\n            var sel = cm.listSelections().slice(0);\n            sel[i] = { head: info.newPos, anchor: info.newPos };\n            cm.setSelections(sel);\n            if (info.indent) {\n              cm.indentLine(info.newPos.line, null, true);\n              cm.indentLine(info.newPos.line + 1, null, true);\n            }\n          }\n        }\n\n        function autoCloseCurrent(cm, typingSlash) {\n          var ranges = cm.listSelections(),\n              replacements = [];\n          var head = typingSlash ? \"/\" : \"</\";\n          for (var i = 0; i < ranges.length; i++) {\n            if (!ranges[i].empty()) return CodeMirror.Pass;\n            var pos = ranges[i].head,\n                tok = cm.getTokenAt(pos);\n            var inner = CodeMirror.innerMode(cm.getMode(), tok.state),\n                state = inner.state;\n            if (typingSlash && (tok.type == \"string\" || tok.string.charAt(0) != \"<\" || tok.start != pos.ch - 1)) return CodeMirror.Pass;\n            // Kludge to get around the fact that we are not in XML mode\n            // when completing in JS/CSS snippet in htmlmixed mode. Does not\n            // work for other XML embedded languages (there is no general\n            // way to go from a mixed mode to its current XML state).\n            var replacement;\n            if (inner.mode.name != \"xml\") {\n              if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"javascript\") replacement = head + \"script\";else if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"css\") replacement = head + \"style\";else return CodeMirror.Pass;\n            } else {\n              if (!state.context || !state.context.tagName || closingTagExists(cm, state.context.tagName, pos, state)) return CodeMirror.Pass;\n              replacement = head + state.context.tagName;\n            }\n            if (cm.getLine(pos.line).charAt(tok.end) != \">\") replacement += \">\";\n            replacements[i] = replacement;\n          }\n          cm.replaceSelections(replacements);\n          ranges = cm.listSelections();\n          for (var i = 0; i < ranges.length; i++) {\n            if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line) cm.indentLine(ranges[i].head.line);\n          }\n        }\n\n        function autoCloseSlash(cm) {\n          if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n          return autoCloseCurrent(cm, true);\n        }\n\n        CodeMirror.commands.closeTag = function (cm) {\n          return autoCloseCurrent(cm);\n        };\n\n        function indexOf(collection, elt) {\n          if (collection.indexOf) return collection.indexOf(elt);\n          for (var i = 0, e = collection.length; i < e; ++i) {\n            if (collection[i] == elt) return i;\n          }return -1;\n        }\n\n        // If xml-fold is loaded, we use its functionality to try and verify\n        // whether a given tag is actually unclosed.\n        function closingTagExists(cm, tagName, pos, state, newTag) {\n          if (!CodeMirror.scanForClosingTag) return false;\n          var end = Math.min(cm.lastLine() + 1, pos.line + 500);\n          var nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n          if (!nextClose || nextClose.tag != tagName) return false;\n          var cx = state.context;\n          // If the immediate wrapping context contains onCx instances of\n          // the same tag, a closing tag only exists if there are at least\n          // that many closing tags of that type following.\n          for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) {\n            ++onCx;\n          }pos = nextClose.to;\n          for (var i = 1; i < onCx; i++) {\n            var next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n            if (!next || next.tag != tagName) return false;\n            pos = next.to;\n          }\n          return true;\n        }\n      });\n    }, { \"../../lib/codemirror\": 7, \"../fold/xml-fold\": 6 }], 5: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineOption(\"matchTags\", false, function (cm, val, old) {\n          if (old && old != CodeMirror.Init) {\n            cm.off(\"cursorActivity\", doMatchTags);\n            cm.off(\"viewportChange\", maybeUpdateMatch);\n            clear(cm);\n          }\n          if (val) {\n            cm.state.matchBothTags = (typeof val === \"undefined\" ? \"undefined\" : _typeof(val)) == \"object\" && val.bothTags;\n            cm.on(\"cursorActivity\", doMatchTags);\n            cm.on(\"viewportChange\", maybeUpdateMatch);\n            doMatchTags(cm);\n          }\n        });\n\n        function clear(cm) {\n          if (cm.state.tagHit) cm.state.tagHit.clear();\n          if (cm.state.tagOther) cm.state.tagOther.clear();\n          cm.state.tagHit = cm.state.tagOther = null;\n        }\n\n        function doMatchTags(cm) {\n          cm.state.failedTagMatch = false;\n          cm.operation(function () {\n            clear(cm);\n            if (cm.somethingSelected()) return;\n            var cur = cm.getCursor(),\n                range = cm.getViewport();\n            range.from = Math.min(range.from, cur.line);range.to = Math.max(cur.line + 1, range.to);\n            var match = CodeMirror.findMatchingTag(cm, cur, range);\n            if (!match) return;\n            if (cm.state.matchBothTags) {\n              var hit = match.at == \"open\" ? match.open : match.close;\n              if (hit) cm.state.tagHit = cm.markText(hit.from, hit.to, { className: \"CodeMirror-matchingtag\" });\n            }\n            var other = match.at == \"close\" ? match.open : match.close;\n            if (other) cm.state.tagOther = cm.markText(other.from, other.to, { className: \"CodeMirror-matchingtag\" });else cm.state.failedTagMatch = true;\n          });\n        }\n\n        function maybeUpdateMatch(cm) {\n          if (cm.state.failedTagMatch) doMatchTags(cm);\n        }\n\n        CodeMirror.commands.toMatchingTag = function (cm) {\n          var found = CodeMirror.findMatchingTag(cm, cm.getCursor());\n          if (found) {\n            var other = found.at == \"close\" ? found.open : found.close;\n            if (other) cm.extendSelection(other.to, other.from);\n          }\n        };\n      });\n    }, { \"../../lib/codemirror\": 7, \"../fold/xml-fold\": 6 }], 6: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var Pos = CodeMirror.Pos;\n        function cmp(a, b) {\n          return a.line - b.line || a.ch - b.ch;\n        }\n\n        var nameStartChar = \"A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\";\n        var nameChar = nameStartChar + \"-:.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040\";\n        var xmlTagStart = new RegExp(\"<(/?)([\" + nameStartChar + \"][\" + nameChar + \"]*)\", \"g\");\n\n        function Iter(cm, line, ch, range) {\n          this.line = line;this.ch = ch;\n          this.cm = cm;this.text = cm.getLine(line);\n          this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n          this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n        }\n\n        function tagAt(iter, ch) {\n          var type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n          return type && /\\btag\\b/.test(type);\n        }\n\n        function nextLine(iter) {\n          if (iter.line >= iter.max) return;\n          iter.ch = 0;\n          iter.text = iter.cm.getLine(++iter.line);\n          return true;\n        }\n        function prevLine(iter) {\n          if (iter.line <= iter.min) return;\n          iter.text = iter.cm.getLine(--iter.line);\n          iter.ch = iter.text.length;\n          return true;\n        }\n\n        function toTagEnd(iter) {\n          for (;;) {\n            var gt = iter.text.indexOf(\">\", iter.ch);\n            if (gt == -1) {\n              if (nextLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, gt + 1)) {\n              iter.ch = gt + 1;continue;\n            }\n            var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n            var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n            iter.ch = gt + 1;\n            return selfClose ? \"selfClose\" : \"regular\";\n          }\n        }\n        function toTagStart(iter) {\n          for (;;) {\n            var lt = iter.ch ? iter.text.lastIndexOf(\"<\", iter.ch - 1) : -1;\n            if (lt == -1) {\n              if (prevLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, lt + 1)) {\n              iter.ch = lt;continue;\n            }\n            xmlTagStart.lastIndex = lt;\n            iter.ch = lt;\n            var match = xmlTagStart.exec(iter.text);\n            if (match && match.index == lt) return match;\n          }\n        }\n\n        function toNextTag(iter) {\n          for (;;) {\n            xmlTagStart.lastIndex = iter.ch;\n            var found = xmlTagStart.exec(iter.text);\n            if (!found) {\n              if (nextLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, found.index + 1)) {\n              iter.ch = found.index + 1;continue;\n            }\n            iter.ch = found.index + found[0].length;\n            return found;\n          }\n        }\n        function toPrevTag(iter) {\n          for (;;) {\n            var gt = iter.ch ? iter.text.lastIndexOf(\">\", iter.ch - 1) : -1;\n            if (gt == -1) {\n              if (prevLine(iter)) continue;else return;\n            }\n            if (!tagAt(iter, gt + 1)) {\n              iter.ch = gt;continue;\n            }\n            var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n            var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n            iter.ch = gt + 1;\n            return selfClose ? \"selfClose\" : \"regular\";\n          }\n        }\n\n        function findMatchingClose(iter, tag) {\n          var stack = [];\n          for (;;) {\n            var next = toNextTag(iter),\n                end,\n                startLine = iter.line,\n                startCh = iter.ch - (next ? next[0].length : 0);\n            if (!next || !(end = toTagEnd(iter))) return;\n            if (end == \"selfClose\") continue;\n            if (next[1]) {\n              // closing tag\n              for (var i = stack.length - 1; i >= 0; --i) {\n                if (stack[i] == next[2]) {\n                  stack.length = i;\n                  break;\n                }\n              }if (i < 0 && (!tag || tag == next[2])) return {\n                tag: next[2],\n                from: Pos(startLine, startCh),\n                to: Pos(iter.line, iter.ch)\n              };\n            } else {\n              // opening tag\n              stack.push(next[2]);\n            }\n          }\n        }\n        function findMatchingOpen(iter, tag) {\n          var stack = [];\n          for (;;) {\n            var prev = toPrevTag(iter);\n            if (!prev) return;\n            if (prev == \"selfClose\") {\n              toTagStart(iter);continue;\n            }\n            var endLine = iter.line,\n                endCh = iter.ch;\n            var start = toTagStart(iter);\n            if (!start) return;\n            if (start[1]) {\n              // closing tag\n              stack.push(start[2]);\n            } else {\n              // opening tag\n              for (var i = stack.length - 1; i >= 0; --i) {\n                if (stack[i] == start[2]) {\n                  stack.length = i;\n                  break;\n                }\n              }if (i < 0 && (!tag || tag == start[2])) return {\n                tag: start[2],\n                from: Pos(iter.line, iter.ch),\n                to: Pos(endLine, endCh)\n              };\n            }\n          }\n        }\n\n        CodeMirror.registerHelper(\"fold\", \"xml\", function (cm, start) {\n          var iter = new Iter(cm, start.line, 0);\n          for (;;) {\n            var openTag = toNextTag(iter),\n                end;\n            if (!openTag || iter.line != start.line || !(end = toTagEnd(iter))) return;\n            if (!openTag[1] && end != \"selfClose\") {\n              var startPos = Pos(iter.line, iter.ch);\n              var endPos = findMatchingClose(iter, openTag[2]);\n              return endPos && { from: startPos, to: endPos.from };\n            }\n          }\n        });\n        CodeMirror.findMatchingTag = function (cm, pos, range) {\n          var iter = new Iter(cm, pos.line, pos.ch, range);\n          if (iter.text.indexOf(\">\") == -1 && iter.text.indexOf(\"<\") == -1) return;\n          var end = toTagEnd(iter),\n              to = end && Pos(iter.line, iter.ch);\n          var start = end && toTagStart(iter);\n          if (!end || !start || cmp(iter, pos) > 0) return;\n          var here = { from: Pos(iter.line, iter.ch), to: to, tag: start[2] };\n          if (end == \"selfClose\") return { open: here, close: null, at: \"open\" };\n\n          if (start[1]) {\n            // closing tag\n            return { open: findMatchingOpen(iter, start[2]), close: here, at: \"close\" };\n          } else {\n            // opening tag\n            iter = new Iter(cm, to.line, to.ch, range);\n            return { open: here, close: findMatchingClose(iter, start[2]), at: \"open\" };\n          }\n        };\n\n        CodeMirror.findEnclosingTag = function (cm, pos, range, tag) {\n          var iter = new Iter(cm, pos.line, pos.ch, range);\n          for (;;) {\n            var open = findMatchingOpen(iter, tag);\n            if (!open) break;\n            var forward = new Iter(cm, pos.line, pos.ch, range);\n            var close = findMatchingClose(forward, open.tag);\n            if (close) return { open: open, close: close };\n          }\n        };\n\n        // Used by addon/edit/closetag.js\n        CodeMirror.scanForClosingTag = function (cm, pos, name, end) {\n          var iter = new Iter(cm, pos.line, pos.ch, end ? { from: 0, to: end } : null);\n          return findMatchingClose(iter, name);\n        };\n      });\n    }, { \"../../lib/codemirror\": 7 }], 7: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      // This is CodeMirror (http://codemirror.net), a code editor\n      // implemented in JavaScript on top of the browser's DOM.\n      //\n      // You can find some technical background for some of the code below\n      // at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n      (function (global, factory) {\n        (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.CodeMirror = factory();\n      })(this, function () {\n        'use strict';\n\n        // Kludges for bugs and behavior differences that can't be feature\n        // detected are enabled based on userAgent etc sniffing.\n\n        var userAgent = navigator.userAgent;\n        var platform = navigator.platform;\n\n        var gecko = /gecko\\/\\d/i.test(userAgent);\n        var ie_upto10 = /MSIE \\d/.test(userAgent);\n        var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n        var edge = /Edge\\/(\\d+)/.exec(userAgent);\n        var ie = ie_upto10 || ie_11up || edge;\n        var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n        var webkit = !edge && /WebKit\\//.test(userAgent);\n        var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n        var chrome = !edge && /Chrome\\//.test(userAgent);\n        var presto = /Opera\\//.test(userAgent);\n        var safari = /Apple Computer/.test(navigator.vendor);\n        var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n        var phantom = /PhantomJS/.test(userAgent);\n\n        var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n        var android = /Android/.test(userAgent);\n        // This is woefully incomplete. Suggestions for alternative methods welcome.\n        var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n        var mac = ios || /Mac/.test(platform);\n        var chromeOS = /\\bCrOS\\b/.test(userAgent);\n        var windows = /win/i.test(platform);\n\n        var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n        if (presto_version) {\n          presto_version = Number(presto_version[1]);\n        }\n        if (presto_version && presto_version >= 15) {\n          presto = false;webkit = true;\n        }\n        // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n        var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n        var captureRightClick = gecko || ie && ie_version >= 9;\n\n        function classTest(cls) {\n          return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n        }\n\n        var rmClass = function rmClass(node, cls) {\n          var current = node.className;\n          var match = classTest(cls).exec(current);\n          if (match) {\n            var after = current.slice(match.index + match[0].length);\n            node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n          }\n        };\n\n        function removeChildren(e) {\n          for (var count = e.childNodes.length; count > 0; --count) {\n            e.removeChild(e.firstChild);\n          }\n          return e;\n        }\n\n        function removeChildrenAndAdd(parent, e) {\n          return removeChildren(parent).appendChild(e);\n        }\n\n        function elt(tag, content, className, style) {\n          var e = document.createElement(tag);\n          if (className) {\n            e.className = className;\n          }\n          if (style) {\n            e.style.cssText = style;\n          }\n          if (typeof content == \"string\") {\n            e.appendChild(document.createTextNode(content));\n          } else if (content) {\n            for (var i = 0; i < content.length; ++i) {\n              e.appendChild(content[i]);\n            }\n          }\n          return e;\n        }\n        // wrapper for elt, which removes the elt from the accessibility tree\n        function eltP(tag, content, className, style) {\n          var e = elt(tag, content, className, style);\n          e.setAttribute(\"role\", \"presentation\");\n          return e;\n        }\n\n        var range;\n        if (document.createRange) {\n          range = function range(node, start, end, endNode) {\n            var r = document.createRange();\n            r.setEnd(endNode || node, end);\n            r.setStart(node, start);\n            return r;\n          };\n        } else {\n          range = function range(node, start, end) {\n            var r = document.body.createTextRange();\n            try {\n              r.moveToElementText(node.parentNode);\n            } catch (e) {\n              return r;\n            }\n            r.collapse(true);\n            r.moveEnd(\"character\", end);\n            r.moveStart(\"character\", start);\n            return r;\n          };\n        }\n\n        function contains(parent, child) {\n          if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n            {\n              child = child.parentNode;\n            }\n          if (parent.contains) {\n            return parent.contains(child);\n          }\n          do {\n            if (child.nodeType == 11) {\n              child = child.host;\n            }\n            if (child == parent) {\n              return true;\n            }\n          } while (child = child.parentNode);\n        }\n\n        function activeElt() {\n          // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n          // IE < 10 will throw when accessed while the page is loading or in an iframe.\n          // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n          var activeElement;\n          try {\n            activeElement = document.activeElement;\n          } catch (e) {\n            activeElement = document.body || null;\n          }\n          while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n            activeElement = activeElement.shadowRoot.activeElement;\n          }\n          return activeElement;\n        }\n\n        function addClass(node, cls) {\n          var current = node.className;\n          if (!classTest(cls).test(current)) {\n            node.className += (current ? \" \" : \"\") + cls;\n          }\n        }\n        function joinClasses(a, b) {\n          var as = a.split(\" \");\n          for (var i = 0; i < as.length; i++) {\n            if (as[i] && !classTest(as[i]).test(b)) {\n              b += \" \" + as[i];\n            }\n          }\n          return b;\n        }\n\n        var selectInput = function selectInput(node) {\n          node.select();\n        };\n        if (ios) // Mobile Safari apparently has a bug where select() is broken.\n          {\n            selectInput = function selectInput(node) {\n              node.selectionStart = 0;node.selectionEnd = node.value.length;\n            };\n          } else if (ie) // Suppress mysterious IE10 errors\n          {\n            selectInput = function selectInput(node) {\n              try {\n                node.select();\n              } catch (_e) {}\n            };\n          }\n\n        function bind(f) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          return function () {\n            return f.apply(null, args);\n          };\n        }\n\n        function copyObj(obj, target, overwrite) {\n          if (!target) {\n            target = {};\n          }\n          for (var prop in obj) {\n            if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n              target[prop] = obj[prop];\n            }\n          }\n          return target;\n        }\n\n        // Counts the column offset in a string, taking tabs into account.\n        // Used mostly to find indentation.\n        function countColumn(string, end, tabSize, startIndex, startValue) {\n          if (end == null) {\n            end = string.search(/[^\\s\\u00a0]/);\n            if (end == -1) {\n              end = string.length;\n            }\n          }\n          for (var i = startIndex || 0, n = startValue || 0;;) {\n            var nextTab = string.indexOf(\"\\t\", i);\n            if (nextTab < 0 || nextTab >= end) {\n              return n + (end - i);\n            }\n            n += nextTab - i;\n            n += tabSize - n % tabSize;\n            i = nextTab + 1;\n          }\n        }\n\n        var Delayed = function Delayed() {\n          this.id = null;\n        };\n        Delayed.prototype.set = function (ms, f) {\n          clearTimeout(this.id);\n          this.id = setTimeout(f, ms);\n        };\n\n        function indexOf(array, elt) {\n          for (var i = 0; i < array.length; ++i) {\n            if (array[i] == elt) {\n              return i;\n            }\n          }\n          return -1;\n        }\n\n        // Number of pixels added to scroller and sizer to hide scrollbar\n        var scrollerGap = 30;\n\n        // Returned or thrown by various protocols to signal 'I'm not\n        // handling this'.\n        var Pass = { toString: function toString() {\n            return \"CodeMirror.Pass\";\n          } };\n\n        // Reused option objects for setSelection & friends\n        var sel_dontScroll = { scroll: false };\n        var sel_mouse = { origin: \"*mouse\" };\n        var sel_move = { origin: \"+move\" };\n\n        // The inverse of countColumn -- find the offset that corresponds to\n        // a particular column.\n        function findColumn(string, goal, tabSize) {\n          for (var pos = 0, col = 0;;) {\n            var nextTab = string.indexOf(\"\\t\", pos);\n            if (nextTab == -1) {\n              nextTab = string.length;\n            }\n            var skipped = nextTab - pos;\n            if (nextTab == string.length || col + skipped >= goal) {\n              return pos + Math.min(skipped, goal - col);\n            }\n            col += nextTab - pos;\n            col += tabSize - col % tabSize;\n            pos = nextTab + 1;\n            if (col >= goal) {\n              return pos;\n            }\n          }\n        }\n\n        var spaceStrs = [\"\"];\n        function spaceStr(n) {\n          while (spaceStrs.length <= n) {\n            spaceStrs.push(lst(spaceStrs) + \" \");\n          }\n          return spaceStrs[n];\n        }\n\n        function lst(arr) {\n          return arr[arr.length - 1];\n        }\n\n        function map(array, f) {\n          var out = [];\n          for (var i = 0; i < array.length; i++) {\n            out[i] = f(array[i], i);\n          }\n          return out;\n        }\n\n        function insertSorted(array, value, score) {\n          var pos = 0,\n              priority = score(value);\n          while (pos < array.length && score(array[pos]) <= priority) {\n            pos++;\n          }\n          array.splice(pos, 0, value);\n        }\n\n        function nothing() {}\n\n        function createObj(base, props) {\n          var inst;\n          if (Object.create) {\n            inst = Object.create(base);\n          } else {\n            nothing.prototype = base;\n            inst = new nothing();\n          }\n          if (props) {\n            copyObj(props, inst);\n          }\n          return inst;\n        }\n\n        var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n        function isWordCharBasic(ch) {\n          return (/\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n          );\n        }\n        function isWordChar(ch, helper) {\n          if (!helper) {\n            return isWordCharBasic(ch);\n          }\n          if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n            return true;\n          }\n          return helper.test(ch);\n        }\n\n        function isEmpty(obj) {\n          for (var n in obj) {\n            if (obj.hasOwnProperty(n) && obj[n]) {\n              return false;\n            }\n          }\n          return true;\n        }\n\n        // Extending unicode characters. A series of a non-extending char +\n        // any number of extending chars is treated as a single unit as far\n        // as editing and measuring is concerned. This is not fully correct,\n        // since some scripts/fonts/browsers also treat other configurations\n        // of code points as a group.\n        var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n        function isExtendingChar(ch) {\n          return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n        }\n\n        // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n        function skipExtendingChars(str, pos, dir) {\n          while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n            pos += dir;\n          }\n          return pos;\n        }\n\n        // Returns the value from the range [`from`; `to`] that satisfies\n        // `pred` and is closest to `from`. Assumes that at least `to` satisfies `pred`.\n        function findFirst(pred, from, to) {\n          for (;;) {\n            if (Math.abs(from - to) <= 1) {\n              return pred(from) ? from : to;\n            }\n            var mid = Math.floor((from + to) / 2);\n            if (pred(mid)) {\n              to = mid;\n            } else {\n              from = mid;\n            }\n          }\n        }\n\n        // The display handles the DOM integration, both for input reading\n        // and content drawing. It holds references to DOM nodes and\n        // display-related state.\n\n        function Display(place, doc, input) {\n          var d = this;\n          this.input = input;\n\n          // Covers bottom-right square when both scrollbars are present.\n          d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n          d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n          // Covers bottom of gutter when coverGutterNextToScrollbar is on\n          // and h scrollbar is present.\n          d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n          d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n          // Will contain the actual code, positioned to cover the viewport.\n          d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n          // Elements are added to these to represent selection and cursors.\n          d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n          d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n          // A visibility: hidden element used to find the size of things.\n          d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n          // When lines outside of the viewport are measured, they are drawn in this.\n          d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n          // Wraps everything that needs to exist inside the vertically-padded coordinate system\n          d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n          var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n          // Moved around its parent to cover visible view.\n          d.mover = elt(\"div\", [lines], null, \"position: relative\");\n          // Set to the height of the document, allowing scrolling.\n          d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n          d.sizerWidth = null;\n          // Behavior of elts with overflow: auto and padding is\n          // inconsistent across browsers. This is used to ensure the\n          // scrollable area is big enough.\n          d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n          // Will contain the gutters, if any.\n          d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n          d.lineGutter = null;\n          // Actual scrollable element.\n          d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n          d.scroller.setAttribute(\"tabIndex\", \"-1\");\n          // The element in which the editor lives.\n          d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n          // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n          if (ie && ie_version < 8) {\n            d.gutters.style.zIndex = -1;d.scroller.style.paddingRight = 0;\n          }\n          if (!webkit && !(gecko && mobile)) {\n            d.scroller.draggable = true;\n          }\n\n          if (place) {\n            if (place.appendChild) {\n              place.appendChild(d.wrapper);\n            } else {\n              place(d.wrapper);\n            }\n          }\n\n          // Current rendered range (may be bigger than the view window).\n          d.viewFrom = d.viewTo = doc.first;\n          d.reportedViewFrom = d.reportedViewTo = doc.first;\n          // Information about the rendered lines.\n          d.view = [];\n          d.renderedView = null;\n          // Holds info about a single rendered line when it was rendered\n          // for measurement, while not in view.\n          d.externalMeasured = null;\n          // Empty space (in pixels) above the view\n          d.viewOffset = 0;\n          d.lastWrapHeight = d.lastWrapWidth = 0;\n          d.updateLineNumbers = null;\n\n          d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n          d.scrollbarsClipped = false;\n\n          // Used to only resize the line number gutter when necessary (when\n          // the amount of lines crosses a boundary that makes its width change)\n          d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n          // Set to true when a non-horizontal-scrolling line widget is\n          // added. As an optimization, line widget aligning is skipped when\n          // this is false.\n          d.alignWidgets = false;\n\n          d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n          // Tracks the maximum line length so that the horizontal scrollbar\n          // can be kept static when scrolling.\n          d.maxLine = null;\n          d.maxLineLength = 0;\n          d.maxLineChanged = false;\n\n          // Used for measuring wheel scrolling granularity\n          d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n          // True when shift is held down.\n          d.shift = false;\n\n          // Used to track whether anything happened since the context menu\n          // was opened.\n          d.selForContextMenu = null;\n\n          d.activeTouch = null;\n\n          input.init(d);\n        }\n\n        // Find the line object corresponding to the given line number.\n        function getLine(doc, n) {\n          n -= doc.first;\n          if (n < 0 || n >= doc.size) {\n            throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n          }\n          var chunk = doc;\n          while (!chunk.lines) {\n            for (var i = 0;; ++i) {\n              var child = chunk.children[i],\n                  sz = child.chunkSize();\n              if (n < sz) {\n                chunk = child;break;\n              }\n              n -= sz;\n            }\n          }\n          return chunk.lines[n];\n        }\n\n        // Get the part of a document between two positions, as an array of\n        // strings.\n        function getBetween(doc, start, end) {\n          var out = [],\n              n = start.line;\n          doc.iter(start.line, end.line + 1, function (line) {\n            var text = line.text;\n            if (n == end.line) {\n              text = text.slice(0, end.ch);\n            }\n            if (n == start.line) {\n              text = text.slice(start.ch);\n            }\n            out.push(text);\n            ++n;\n          });\n          return out;\n        }\n        // Get the lines between from and to, as array of strings.\n        function getLines(doc, from, to) {\n          var out = [];\n          doc.iter(from, to, function (line) {\n            out.push(line.text);\n          }); // iter aborts when callback returns truthy value\n          return out;\n        }\n\n        // Update the height of a line, propagating the height change\n        // upwards to parent nodes.\n        function updateLineHeight(line, height) {\n          var diff = height - line.height;\n          if (diff) {\n            for (var n = line; n; n = n.parent) {\n              n.height += diff;\n            }\n          }\n        }\n\n        // Given a line object, find its line number by walking up through\n        // its parent links.\n        function lineNo(line) {\n          if (line.parent == null) {\n            return null;\n          }\n          var cur = line.parent,\n              no = indexOf(cur.lines, line);\n          for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n            for (var i = 0;; ++i) {\n              if (chunk.children[i] == cur) {\n                break;\n              }\n              no += chunk.children[i].chunkSize();\n            }\n          }\n          return no + cur.first;\n        }\n\n        // Find the line at the given vertical position, using the height\n        // information in the document tree.\n        function _lineAtHeight(chunk, h) {\n          var n = chunk.first;\n          outer: do {\n            for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n              var child = chunk.children[i$1],\n                  ch = child.height;\n              if (h < ch) {\n                chunk = child;continue outer;\n              }\n              h -= ch;\n              n += child.chunkSize();\n            }\n            return n;\n          } while (!chunk.lines);\n          var i = 0;\n          for (; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i],\n                lh = line.height;\n            if (h < lh) {\n              break;\n            }\n            h -= lh;\n          }\n          return n + i;\n        }\n\n        function isLine(doc, l) {\n          return l >= doc.first && l < doc.first + doc.size;\n        }\n\n        function lineNumberFor(options, i) {\n          return String(options.lineNumberFormatter(i + options.firstLineNumber));\n        }\n\n        // A Pos instance represents a position within the text.\n        function Pos(line, ch, sticky) {\n          if (sticky === void 0) sticky = null;\n\n          if (!(this instanceof Pos)) {\n            return new Pos(line, ch, sticky);\n          }\n          this.line = line;\n          this.ch = ch;\n          this.sticky = sticky;\n        }\n\n        // Compare two positions, return 0 if they are the same, a negative\n        // number when a is less, and a positive number otherwise.\n        function cmp(a, b) {\n          return a.line - b.line || a.ch - b.ch;\n        }\n\n        function equalCursorPos(a, b) {\n          return a.sticky == b.sticky && cmp(a, b) == 0;\n        }\n\n        function copyPos(x) {\n          return Pos(x.line, x.ch);\n        }\n        function maxPos(a, b) {\n          return cmp(a, b) < 0 ? b : a;\n        }\n        function minPos(a, b) {\n          return cmp(a, b) < 0 ? a : b;\n        }\n\n        // Most of the external API clips given positions to make sure they\n        // actually exist within the document.\n        function clipLine(doc, n) {\n          return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n        }\n        function _clipPos(doc, pos) {\n          if (pos.line < doc.first) {\n            return Pos(doc.first, 0);\n          }\n          var last = doc.first + doc.size - 1;\n          if (pos.line > last) {\n            return Pos(last, getLine(doc, last).text.length);\n          }\n          return clipToLen(pos, getLine(doc, pos.line).text.length);\n        }\n        function clipToLen(pos, linelen) {\n          var ch = pos.ch;\n          if (ch == null || ch > linelen) {\n            return Pos(pos.line, linelen);\n          } else if (ch < 0) {\n            return Pos(pos.line, 0);\n          } else {\n            return pos;\n          }\n        }\n        function clipPosArray(doc, array) {\n          var out = [];\n          for (var i = 0; i < array.length; i++) {\n            out[i] = _clipPos(doc, array[i]);\n          }\n          return out;\n        }\n\n        // Optimize some code when these features are not used.\n        var sawReadOnlySpans = false;\n        var sawCollapsedSpans = false;\n\n        function seeReadOnlySpans() {\n          sawReadOnlySpans = true;\n        }\n\n        function seeCollapsedSpans() {\n          sawCollapsedSpans = true;\n        }\n\n        // TEXTMARKER SPANS\n\n        function MarkedSpan(marker, from, to) {\n          this.marker = marker;\n          this.from = from;this.to = to;\n        }\n\n        // Search an array of spans for a span matching the given marker.\n        function getMarkedSpanFor(spans, marker) {\n          if (spans) {\n            for (var i = 0; i < spans.length; ++i) {\n              var span = spans[i];\n              if (span.marker == marker) {\n                return span;\n              }\n            }\n          }\n        }\n        // Remove a span from an array, returning undefined if no spans are\n        // left (we don't store arrays for lines without spans).\n        function removeMarkedSpan(spans, span) {\n          var r;\n          for (var i = 0; i < spans.length; ++i) {\n            if (spans[i] != span) {\n              (r || (r = [])).push(spans[i]);\n            }\n          }\n          return r;\n        }\n        // Add a span to a line.\n        function addMarkedSpan(line, span) {\n          line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n          span.marker.attachLine(line);\n        }\n\n        // Used for the algorithm that adjusts markers for a change in the\n        // document. These functions cut an array of spans at a given\n        // character position, returning an array of remaining chunks (or\n        // undefined if nothing remains).\n        function markedSpansBefore(old, startCh, isInsert) {\n          var nw;\n          if (old) {\n            for (var i = 0; i < old.length; ++i) {\n              var span = old[i],\n                  marker = span.marker;\n              var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n              if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n                var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n              }\n            }\n          }\n          return nw;\n        }\n        function markedSpansAfter(old, endCh, isInsert) {\n          var nw;\n          if (old) {\n            for (var i = 0; i < old.length; ++i) {\n              var span = old[i],\n                  marker = span.marker;\n              var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n              if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n                var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n              }\n            }\n          }\n          return nw;\n        }\n\n        // Given a change object, compute the new set of marker spans that\n        // cover the line in which the change took place. Removes spans\n        // entirely within the change, reconnects spans belonging to the\n        // same marker that appear on both sides of the change, and cuts off\n        // spans partially within the change. Returns an array of span\n        // arrays with one element for each line in (after) the change.\n        function stretchSpansOverChange(doc, change) {\n          if (change.full) {\n            return null;\n          }\n          var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n          var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n          if (!oldFirst && !oldLast) {\n            return null;\n          }\n\n          var startCh = change.from.ch,\n              endCh = change.to.ch,\n              isInsert = cmp(change.from, change.to) == 0;\n          // Get the spans that 'stick out' on both sides\n          var first = markedSpansBefore(oldFirst, startCh, isInsert);\n          var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n          // Next, merge those two ends\n          var sameLine = change.text.length == 1,\n              offset = lst(change.text).length + (sameLine ? startCh : 0);\n          if (first) {\n            // Fix up .to properties of first\n            for (var i = 0; i < first.length; ++i) {\n              var span = first[i];\n              if (span.to == null) {\n                var found = getMarkedSpanFor(last, span.marker);\n                if (!found) {\n                  span.to = startCh;\n                } else if (sameLine) {\n                  span.to = found.to == null ? null : found.to + offset;\n                }\n              }\n            }\n          }\n          if (last) {\n            // Fix up .from in last (or move them into first in case of sameLine)\n            for (var i$1 = 0; i$1 < last.length; ++i$1) {\n              var span$1 = last[i$1];\n              if (span$1.to != null) {\n                span$1.to += offset;\n              }\n              if (span$1.from == null) {\n                var found$1 = getMarkedSpanFor(first, span$1.marker);\n                if (!found$1) {\n                  span$1.from = offset;\n                  if (sameLine) {\n                    (first || (first = [])).push(span$1);\n                  }\n                }\n              } else {\n                span$1.from += offset;\n                if (sameLine) {\n                  (first || (first = [])).push(span$1);\n                }\n              }\n            }\n          }\n          // Make sure we didn't create any zero-length spans\n          if (first) {\n            first = clearEmptySpans(first);\n          }\n          if (last && last != first) {\n            last = clearEmptySpans(last);\n          }\n\n          var newMarkers = [first];\n          if (!sameLine) {\n            // Fill gap with whole-line-spans\n            var gap = change.text.length - 2,\n                gapMarkers;\n            if (gap > 0 && first) {\n              for (var i$2 = 0; i$2 < first.length; ++i$2) {\n                if (first[i$2].to == null) {\n                  (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n                }\n              }\n            }\n            for (var i$3 = 0; i$3 < gap; ++i$3) {\n              newMarkers.push(gapMarkers);\n            }\n            newMarkers.push(last);\n          }\n          return newMarkers;\n        }\n\n        // Remove spans that are empty and don't have a clearWhenEmpty\n        // option of false.\n        function clearEmptySpans(spans) {\n          for (var i = 0; i < spans.length; ++i) {\n            var span = spans[i];\n            if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n              spans.splice(i--, 1);\n            }\n          }\n          if (!spans.length) {\n            return null;\n          }\n          return spans;\n        }\n\n        // Used to 'clip' out readOnly ranges when making a change.\n        function removeReadOnlyRanges(doc, from, to) {\n          var markers = null;\n          doc.iter(from.line, to.line + 1, function (line) {\n            if (line.markedSpans) {\n              for (var i = 0; i < line.markedSpans.length; ++i) {\n                var mark = line.markedSpans[i].marker;\n                if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n                  (markers || (markers = [])).push(mark);\n                }\n              }\n            }\n          });\n          if (!markers) {\n            return null;\n          }\n          var parts = [{ from: from, to: to }];\n          for (var i = 0; i < markers.length; ++i) {\n            var mk = markers[i],\n                m = mk.find(0);\n            for (var j = 0; j < parts.length; ++j) {\n              var p = parts[j];\n              if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n                continue;\n              }\n              var newParts = [j, 1],\n                  dfrom = cmp(p.from, m.from),\n                  dto = cmp(p.to, m.to);\n              if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n                newParts.push({ from: p.from, to: m.from });\n              }\n              if (dto > 0 || !mk.inclusiveRight && !dto) {\n                newParts.push({ from: m.to, to: p.to });\n              }\n              parts.splice.apply(parts, newParts);\n              j += newParts.length - 3;\n            }\n          }\n          return parts;\n        }\n\n        // Connect or disconnect spans from a line.\n        function detachMarkedSpans(line) {\n          var spans = line.markedSpans;\n          if (!spans) {\n            return;\n          }\n          for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.detachLine(line);\n          }\n          line.markedSpans = null;\n        }\n        function attachMarkedSpans(line, spans) {\n          if (!spans) {\n            return;\n          }\n          for (var i = 0; i < spans.length; ++i) {\n            spans[i].marker.attachLine(line);\n          }\n          line.markedSpans = spans;\n        }\n\n        // Helpers used when computing which overlapping collapsed span\n        // counts as the larger one.\n        function extraLeft(marker) {\n          return marker.inclusiveLeft ? -1 : 0;\n        }\n        function extraRight(marker) {\n          return marker.inclusiveRight ? 1 : 0;\n        }\n\n        // Returns a number indicating which of two overlapping collapsed\n        // spans is larger (and thus includes the other). Falls back to\n        // comparing ids when the spans cover exactly the same range.\n        function compareCollapsedMarkers(a, b) {\n          var lenDiff = a.lines.length - b.lines.length;\n          if (lenDiff != 0) {\n            return lenDiff;\n          }\n          var aPos = a.find(),\n              bPos = b.find();\n          var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n          if (fromCmp) {\n            return -fromCmp;\n          }\n          var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n          if (toCmp) {\n            return toCmp;\n          }\n          return b.id - a.id;\n        }\n\n        // Find out whether a line ends or starts in a collapsed span. If\n        // so, return the marker for that span.\n        function collapsedSpanAtSide(line, start) {\n          var sps = sawCollapsedSpans && line.markedSpans,\n              found;\n          if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n              sp = sps[i];\n              if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n                found = sp.marker;\n              }\n            }\n          }\n          return found;\n        }\n        function collapsedSpanAtStart(line) {\n          return collapsedSpanAtSide(line, true);\n        }\n        function collapsedSpanAtEnd(line) {\n          return collapsedSpanAtSide(line, false);\n        }\n\n        // Test whether there exists a collapsed span that partially\n        // overlaps (covers the start or end, but not both) of a new span.\n        // Such overlap is not allowed.\n        function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n          var line = getLine(doc, lineNo$$1);\n          var sps = sawCollapsedSpans && line.markedSpans;\n          if (sps) {\n            for (var i = 0; i < sps.length; ++i) {\n              var sp = sps[i];\n              if (!sp.marker.collapsed) {\n                continue;\n              }\n              var found = sp.marker.find(0);\n              var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n              var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n              if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n                continue;\n              }\n              if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n                return true;\n              }\n            }\n          }\n        }\n\n        // A visual line is a line as drawn on the screen. Folding, for\n        // example, can cause multiple logical lines to appear on the same\n        // visual line. This finds the start of the visual line that the\n        // given line is part of (usually that is the line itself).\n        function visualLine(line) {\n          var merged;\n          while (merged = collapsedSpanAtStart(line)) {\n            line = merged.find(-1, true).line;\n          }\n          return line;\n        }\n\n        function visualLineEnd(line) {\n          var merged;\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n          }\n          return line;\n        }\n\n        // Returns an array of logical lines that continue the visual line\n        // started by the argument, or undefined if there are no such lines.\n        function visualLineContinued(line) {\n          var merged, lines;\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;(lines || (lines = [])).push(line);\n          }\n          return lines;\n        }\n\n        // Get the line number of the start of the visual line that the\n        // given line number is part of.\n        function visualLineNo(doc, lineN) {\n          var line = getLine(doc, lineN),\n              vis = visualLine(line);\n          if (line == vis) {\n            return lineN;\n          }\n          return lineNo(vis);\n        }\n\n        // Get the line number of the start of the next visual line after\n        // the given line.\n        function visualLineEndNo(doc, lineN) {\n          if (lineN > doc.lastLine()) {\n            return lineN;\n          }\n          var line = getLine(doc, lineN),\n              merged;\n          if (!lineIsHidden(doc, line)) {\n            return lineN;\n          }\n          while (merged = collapsedSpanAtEnd(line)) {\n            line = merged.find(1, true).line;\n          }\n          return lineNo(line) + 1;\n        }\n\n        // Compute whether a line is hidden. Lines count as hidden when they\n        // are part of a visual line that starts with another line, or when\n        // they are entirely covered by collapsed, non-widget span.\n        function lineIsHidden(doc, line) {\n          var sps = sawCollapsedSpans && line.markedSpans;\n          if (sps) {\n            for (var sp = void 0, i = 0; i < sps.length; ++i) {\n              sp = sps[i];\n              if (!sp.marker.collapsed) {\n                continue;\n              }\n              if (sp.from == null) {\n                return true;\n              }\n              if (sp.marker.widgetNode) {\n                continue;\n              }\n              if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n                return true;\n              }\n            }\n          }\n        }\n        function lineIsHiddenInner(doc, line, span) {\n          if (span.to == null) {\n            var end = span.marker.find(1, true);\n            return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n          }\n          if (span.marker.inclusiveRight && span.to == line.text.length) {\n            return true;\n          }\n          for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n            sp = line.markedSpans[i];\n            if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n              return true;\n            }\n          }\n        }\n\n        // Find the height above the given line.\n        function _heightAtLine(lineObj) {\n          lineObj = visualLine(lineObj);\n\n          var h = 0,\n              chunk = lineObj.parent;\n          for (var i = 0; i < chunk.lines.length; ++i) {\n            var line = chunk.lines[i];\n            if (line == lineObj) {\n              break;\n            } else {\n              h += line.height;\n            }\n          }\n          for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n            for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n              var cur = p.children[i$1];\n              if (cur == chunk) {\n                break;\n              } else {\n                h += cur.height;\n              }\n            }\n          }\n          return h;\n        }\n\n        // Compute the character length of a line, taking into account\n        // collapsed ranges (see markText) that might hide parts, and join\n        // other lines onto it.\n        function lineLength(line) {\n          if (line.height == 0) {\n            return 0;\n          }\n          var len = line.text.length,\n              merged,\n              cur = line;\n          while (merged = collapsedSpanAtStart(cur)) {\n            var found = merged.find(0, true);\n            cur = found.from.line;\n            len += found.from.ch - found.to.ch;\n          }\n          cur = line;\n          while (merged = collapsedSpanAtEnd(cur)) {\n            var found$1 = merged.find(0, true);\n            len -= cur.text.length - found$1.from.ch;\n            cur = found$1.to.line;\n            len += cur.text.length - found$1.to.ch;\n          }\n          return len;\n        }\n\n        // Find the longest line in the document.\n        function findMaxLine(cm) {\n          var d = cm.display,\n              doc = cm.doc;\n          d.maxLine = getLine(doc, doc.first);\n          d.maxLineLength = lineLength(d.maxLine);\n          d.maxLineChanged = true;\n          doc.iter(function (line) {\n            var len = lineLength(line);\n            if (len > d.maxLineLength) {\n              d.maxLineLength = len;\n              d.maxLine = line;\n            }\n          });\n        }\n\n        // BIDI HELPERS\n\n        function iterateBidiSections(order, from, to, f) {\n          if (!order) {\n            return f(from, to, \"ltr\");\n          }\n          var found = false;\n          for (var i = 0; i < order.length; ++i) {\n            var part = order[i];\n            if (part.from < to && part.to > from || from == to && part.to == from) {\n              f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n              found = true;\n            }\n          }\n          if (!found) {\n            f(from, to, \"ltr\");\n          }\n        }\n\n        var bidiOther = null;\n        function getBidiPartAt(order, ch, sticky) {\n          var found;\n          bidiOther = null;\n          for (var i = 0; i < order.length; ++i) {\n            var cur = order[i];\n            if (cur.from < ch && cur.to > ch) {\n              return i;\n            }\n            if (cur.to == ch) {\n              if (cur.from != cur.to && sticky == \"before\") {\n                found = i;\n              } else {\n                bidiOther = i;\n              }\n            }\n            if (cur.from == ch) {\n              if (cur.from != cur.to && sticky != \"before\") {\n                found = i;\n              } else {\n                bidiOther = i;\n              }\n            }\n          }\n          return found != null ? found : bidiOther;\n        }\n\n        // Bidirectional ordering algorithm\n        // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n        // that this (partially) implements.\n\n        // One-char codes used for character types:\n        // L (L):   Left-to-Right\n        // R (R):   Right-to-Left\n        // r (AL):  Right-to-Left Arabic\n        // 1 (EN):  European Number\n        // + (ES):  European Number Separator\n        // % (ET):  European Number Terminator\n        // n (AN):  Arabic Number\n        // , (CS):  Common Number Separator\n        // m (NSM): Non-Spacing Mark\n        // b (BN):  Boundary Neutral\n        // s (B):   Paragraph Separator\n        // t (S):   Segment Separator\n        // w (WS):  Whitespace\n        // N (ON):  Other Neutrals\n\n        // Returns null if characters are ordered as they appear\n        // (left-to-right), or an array of sections ({from, to, level}\n        // objects) in the order in which they occur visually.\n        var bidiOrdering = function () {\n          // Character types for codepoints 0 to 0xff\n          var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n          // Character types for codepoints 0x600 to 0x6f9\n          var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n          function charType(code) {\n            if (code <= 0xf7) {\n              return lowTypes.charAt(code);\n            } else if (0x590 <= code && code <= 0x5f4) {\n              return \"R\";\n            } else if (0x600 <= code && code <= 0x6f9) {\n              return arabicTypes.charAt(code - 0x600);\n            } else if (0x6ee <= code && code <= 0x8ac) {\n              return \"r\";\n            } else if (0x2000 <= code && code <= 0x200b) {\n              return \"w\";\n            } else if (code == 0x200c) {\n              return \"b\";\n            } else {\n              return \"L\";\n            }\n          }\n\n          var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n          var isNeutral = /[stwN]/,\n              isStrong = /[LRr]/,\n              countsAsLeft = /[Lb1n]/,\n              countsAsNum = /[1n]/;\n\n          function BidiSpan(level, from, to) {\n            this.level = level;\n            this.from = from;this.to = to;\n          }\n\n          return function (str, direction) {\n            var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n            if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n              return false;\n            }\n            var len = str.length,\n                types = [];\n            for (var i = 0; i < len; ++i) {\n              types.push(charType(str.charCodeAt(i)));\n            }\n\n            // W1. Examine each non-spacing mark (NSM) in the level run, and\n            // change the type of the NSM to the type of the previous\n            // character. If the NSM is at the start of the level run, it will\n            // get the type of sor.\n            for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n              var type = types[i$1];\n              if (type == \"m\") {\n                types[i$1] = prev;\n              } else {\n                prev = type;\n              }\n            }\n\n            // W2. Search backwards from each instance of a European number\n            // until the first strong type (R, L, AL, or sor) is found. If an\n            // AL is found, change the type of the European number to Arabic\n            // number.\n            // W3. Change all ALs to R.\n            for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n              var type$1 = types[i$2];\n              if (type$1 == \"1\" && cur == \"r\") {\n                types[i$2] = \"n\";\n              } else if (isStrong.test(type$1)) {\n                cur = type$1;if (type$1 == \"r\") {\n                  types[i$2] = \"R\";\n                }\n              }\n            }\n\n            // W4. A single European separator between two European numbers\n            // changes to a European number. A single common separator between\n            // two numbers of the same type changes to that type.\n            for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n              var type$2 = types[i$3];\n              if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n                types[i$3] = \"1\";\n              } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n                types[i$3] = prev$1;\n              }\n              prev$1 = type$2;\n            }\n\n            // W5. A sequence of European terminators adjacent to European\n            // numbers changes to all European numbers.\n            // W6. Otherwise, separators and terminators change to Other\n            // Neutral.\n            for (var i$4 = 0; i$4 < len; ++i$4) {\n              var type$3 = types[i$4];\n              if (type$3 == \",\") {\n                types[i$4] = \"N\";\n              } else if (type$3 == \"%\") {\n                var end = void 0;\n                for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n                var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n                for (var j = i$4; j < end; ++j) {\n                  types[j] = replace;\n                }\n                i$4 = end - 1;\n              }\n            }\n\n            // W7. Search backwards from each instance of a European number\n            // until the first strong type (R, L, or sor) is found. If an L is\n            // found, then change the type of the European number to L.\n            for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n              var type$4 = types[i$5];\n              if (cur$1 == \"L\" && type$4 == \"1\") {\n                types[i$5] = \"L\";\n              } else if (isStrong.test(type$4)) {\n                cur$1 = type$4;\n              }\n            }\n\n            // N1. A sequence of neutrals takes the direction of the\n            // surrounding strong text if the text on both sides has the same\n            // direction. European and Arabic numbers act as if they were R in\n            // terms of their influence on neutrals. Start-of-level-run (sor)\n            // and end-of-level-run (eor) are used at level run boundaries.\n            // N2. Any remaining neutrals take the embedding direction.\n            for (var i$6 = 0; i$6 < len; ++i$6) {\n              if (isNeutral.test(types[i$6])) {\n                var end$1 = void 0;\n                for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n                var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n                var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n                var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n                for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n                  types[j$1] = replace$1;\n                }\n                i$6 = end$1 - 1;\n              }\n            }\n\n            // Here we depart from the documented algorithm, in order to avoid\n            // building up an actual levels array. Since there are only three\n            // levels (0, 1, 2) in an implementation that doesn't take\n            // explicit embedding into account, we can build up the order on\n            // the fly, without following the level-based algorithm.\n            var order = [],\n                m;\n            for (var i$7 = 0; i$7 < len;) {\n              if (countsAsLeft.test(types[i$7])) {\n                var start = i$7;\n                for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n                order.push(new BidiSpan(0, start, i$7));\n              } else {\n                var pos = i$7,\n                    at = order.length;\n                for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n                for (var j$2 = pos; j$2 < i$7;) {\n                  if (countsAsNum.test(types[j$2])) {\n                    if (pos < j$2) {\n                      order.splice(at, 0, new BidiSpan(1, pos, j$2));\n                    }\n                    var nstart = j$2;\n                    for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n                    order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n                    pos = j$2;\n                  } else {\n                    ++j$2;\n                  }\n                }\n                if (pos < i$7) {\n                  order.splice(at, 0, new BidiSpan(1, pos, i$7));\n                }\n              }\n            }\n            if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n              order[0].from = m[0].length;\n              order.unshift(new BidiSpan(0, 0, m[0].length));\n            }\n            if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n              lst(order).to -= m[0].length;\n              order.push(new BidiSpan(0, len - m[0].length, len));\n            }\n\n            return direction == \"rtl\" ? order.reverse() : order;\n          };\n        }();\n\n        // Get the bidi ordering for the given line (and cache it). Returns\n        // false for lines that are fully left-to-right, and an array of\n        // BidiSpan objects otherwise.\n        function getOrder(line, direction) {\n          var order = line.order;\n          if (order == null) {\n            order = line.order = bidiOrdering(line.text, direction);\n          }\n          return order;\n        }\n\n        function moveCharLogically(line, ch, dir) {\n          var target = skipExtendingChars(line.text, ch + dir, dir);\n          return target < 0 || target > line.text.length ? null : target;\n        }\n\n        function moveLogically(line, start, dir) {\n          var ch = moveCharLogically(line, start.ch, dir);\n          return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n        }\n\n        function endOfLine(visually, cm, lineObj, lineNo, dir) {\n          if (visually) {\n            var order = getOrder(lineObj, cm.doc.direction);\n            if (order) {\n              var part = dir < 0 ? lst(order) : order[0];\n              var moveInStorageOrder = dir < 0 == (part.level == 1);\n              var sticky = moveInStorageOrder ? \"after\" : \"before\";\n              var ch;\n              // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n              // it could be that the last bidi part is not on the last visual line,\n              // since visual lines contain content order-consecutive chunks.\n              // Thus, in rtl, we are looking for the first (content-order) character\n              // in the rtl chunk that is on the last line (that is, the same line\n              // as the last (content-order) character).\n              if (part.level > 0) {\n                var prep = prepareMeasureForLine(cm, lineObj);\n                ch = dir < 0 ? lineObj.text.length - 1 : 0;\n                var targetTop = measureCharPrepared(cm, prep, ch).top;\n                ch = findFirst(function (ch) {\n                  return measureCharPrepared(cm, prep, ch).top == targetTop;\n                }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n                if (sticky == \"before\") {\n                  ch = moveCharLogically(lineObj, ch, 1);\n                }\n              } else {\n                ch = dir < 0 ? part.to : part.from;\n              }\n              return new Pos(lineNo, ch, sticky);\n            }\n          }\n          return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n        }\n\n        function moveVisually(cm, line, start, dir) {\n          var bidi = getOrder(line, cm.doc.direction);\n          if (!bidi) {\n            return moveLogically(line, start, dir);\n          }\n          if (start.ch >= line.text.length) {\n            start.ch = line.text.length;\n            start.sticky = \"before\";\n          } else if (start.ch <= 0) {\n            start.ch = 0;\n            start.sticky = \"after\";\n          }\n          var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n              part = bidi[partPos];\n          if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n            // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n            // nothing interesting happens.\n            return moveLogically(line, start, dir);\n          }\n\n          var mv = function mv(pos, dir) {\n            return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n          };\n          var prep;\n          var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n            if (!cm.options.lineWrapping) {\n              return { begin: 0, end: line.text.length };\n            }\n            prep = prep || prepareMeasureForLine(cm, line);\n            return wrappedLineExtentChar(cm, line, prep, ch);\n          };\n          var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n          if (cm.doc.direction == \"rtl\" || part.level == 1) {\n            var moveInStorageOrder = part.level == 1 == dir < 0;\n            var ch = mv(start, moveInStorageOrder ? 1 : -1);\n            if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n              // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n              var sticky = moveInStorageOrder ? \"before\" : \"after\";\n              return new Pos(start.line, ch, sticky);\n            }\n          }\n\n          // Case 3: Could not move within this bidi part in this visual line, so leave\n          // the current bidi part\n\n          var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n            var getRes = function getRes(ch, moveInStorageOrder) {\n              return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n            };\n\n            for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n              var part = bidi[partPos];\n              var moveInStorageOrder = dir > 0 == (part.level != 1);\n              var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n              if (part.from <= ch && ch < part.to) {\n                return getRes(ch, moveInStorageOrder);\n              }\n              ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n              if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n                return getRes(ch, moveInStorageOrder);\n              }\n            }\n          };\n\n          // Case 3a: Look for other bidi parts on the same visual line\n          var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n          if (res) {\n            return res;\n          }\n\n          // Case 3b: Look for other bidi parts on the next visual line\n          var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n          if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n            res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n            if (res) {\n              return res;\n            }\n          }\n\n          // Case 4: Nowhere to move\n          return null;\n        }\n\n        // EVENT HANDLING\n\n        // Lightweight event framework. on/off also work on DOM nodes,\n        // registering native DOM handlers.\n\n        var noHandlers = [];\n\n        var on = function on(emitter, type, f) {\n          if (emitter.addEventListener) {\n            emitter.addEventListener(type, f, false);\n          } else if (emitter.attachEvent) {\n            emitter.attachEvent(\"on\" + type, f);\n          } else {\n            var map$$1 = emitter._handlers || (emitter._handlers = {});\n            map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n          }\n        };\n\n        function getHandlers(emitter, type) {\n          return emitter._handlers && emitter._handlers[type] || noHandlers;\n        }\n\n        function off(emitter, type, f) {\n          if (emitter.removeEventListener) {\n            emitter.removeEventListener(type, f, false);\n          } else if (emitter.detachEvent) {\n            emitter.detachEvent(\"on\" + type, f);\n          } else {\n            var map$$1 = emitter._handlers,\n                arr = map$$1 && map$$1[type];\n            if (arr) {\n              var index = indexOf(arr, f);\n              if (index > -1) {\n                map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n              }\n            }\n          }\n        }\n\n        function signal(emitter, type /*, values...*/) {\n          var handlers = getHandlers(emitter, type);\n          if (!handlers.length) {\n            return;\n          }\n          var args = Array.prototype.slice.call(arguments, 2);\n          for (var i = 0; i < handlers.length; ++i) {\n            handlers[i].apply(null, args);\n          }\n        }\n\n        // The DOM events that CodeMirror handles can be overridden by\n        // registering a (non-DOM) handler on the editor for the event name,\n        // and preventDefault-ing the event in that handler.\n        function signalDOMEvent(cm, e, override) {\n          if (typeof e == \"string\") {\n            e = { type: e, preventDefault: function preventDefault() {\n                this.defaultPrevented = true;\n              } };\n          }\n          signal(cm, override || e.type, cm, e);\n          return e_defaultPrevented(e) || e.codemirrorIgnore;\n        }\n\n        function signalCursorActivity(cm) {\n          var arr = cm._handlers && cm._handlers.cursorActivity;\n          if (!arr) {\n            return;\n          }\n          var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n          for (var i = 0; i < arr.length; ++i) {\n            if (indexOf(set, arr[i]) == -1) {\n              set.push(arr[i]);\n            }\n          }\n        }\n\n        function hasHandler(emitter, type) {\n          return getHandlers(emitter, type).length > 0;\n        }\n\n        // Add on and off methods to a constructor's prototype, to make\n        // registering events on such objects more convenient.\n        function eventMixin(ctor) {\n          ctor.prototype.on = function (type, f) {\n            on(this, type, f);\n          };\n          ctor.prototype.off = function (type, f) {\n            off(this, type, f);\n          };\n        }\n\n        // Due to the fact that we still support jurassic IE versions, some\n        // compatibility wrappers are needed.\n\n        function e_preventDefault(e) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n        }\n        function e_stopPropagation(e) {\n          if (e.stopPropagation) {\n            e.stopPropagation();\n          } else {\n            e.cancelBubble = true;\n          }\n        }\n        function e_defaultPrevented(e) {\n          return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n        }\n        function e_stop(e) {\n          e_preventDefault(e);e_stopPropagation(e);\n        }\n\n        function e_target(e) {\n          return e.target || e.srcElement;\n        }\n        function e_button(e) {\n          var b = e.which;\n          if (b == null) {\n            if (e.button & 1) {\n              b = 1;\n            } else if (e.button & 2) {\n              b = 3;\n            } else if (e.button & 4) {\n              b = 2;\n            }\n          }\n          if (mac && e.ctrlKey && b == 1) {\n            b = 3;\n          }\n          return b;\n        }\n\n        // Detect drag-and-drop\n        var dragAndDrop = function () {\n          // There is *some* kind of drag-and-drop support in IE6-8, but I\n          // couldn't get it to work yet.\n          if (ie && ie_version < 9) {\n            return false;\n          }\n          var div = elt('div');\n          return \"draggable\" in div || \"dragDrop\" in div;\n        }();\n\n        var zwspSupported;\n        function zeroWidthElement(measure) {\n          if (zwspSupported == null) {\n            var test = elt(\"span\", \"\\u200B\");\n            removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n            if (measure.firstChild.offsetHeight != 0) {\n              zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n            }\n          }\n          var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n          node.setAttribute(\"cm-text\", \"\");\n          return node;\n        }\n\n        // Feature-detect IE's crummy client rect reporting for bidi text\n        var badBidiRects;\n        function hasBadBidiRects(measure) {\n          if (badBidiRects != null) {\n            return badBidiRects;\n          }\n          var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n          var r0 = range(txt, 0, 1).getBoundingClientRect();\n          var r1 = range(txt, 1, 2).getBoundingClientRect();\n          removeChildren(measure);\n          if (!r0 || r0.left == r0.right) {\n            return false;\n          } // Safari returns null in some cases (#2780)\n          return badBidiRects = r1.right - r0.right < 3;\n        }\n\n        // See if \"\".split is the broken IE version, if so, provide an\n        // alternative way to split lines.\n        var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n          var pos = 0,\n              result = [],\n              l = string.length;\n          while (pos <= l) {\n            var nl = string.indexOf(\"\\n\", pos);\n            if (nl == -1) {\n              nl = string.length;\n            }\n            var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n            var rt = line.indexOf(\"\\r\");\n            if (rt != -1) {\n              result.push(line.slice(0, rt));\n              pos += rt + 1;\n            } else {\n              result.push(line);\n              pos = nl + 1;\n            }\n          }\n          return result;\n        } : function (string) {\n          return string.split(/\\r\\n?|\\n/);\n        };\n\n        var hasSelection = window.getSelection ? function (te) {\n          try {\n            return te.selectionStart != te.selectionEnd;\n          } catch (e) {\n            return false;\n          }\n        } : function (te) {\n          var range$$1;\n          try {\n            range$$1 = te.ownerDocument.selection.createRange();\n          } catch (e) {}\n          if (!range$$1 || range$$1.parentElement() != te) {\n            return false;\n          }\n          return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0;\n        };\n\n        var hasCopyEvent = function () {\n          var e = elt(\"div\");\n          if (\"oncopy\" in e) {\n            return true;\n          }\n          e.setAttribute(\"oncopy\", \"return;\");\n          return typeof e.oncopy == \"function\";\n        }();\n\n        var badZoomedRects = null;\n        function hasBadZoomedRects(measure) {\n          if (badZoomedRects != null) {\n            return badZoomedRects;\n          }\n          var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n          var normal = node.getBoundingClientRect();\n          var fromRange = range(node, 0, 1).getBoundingClientRect();\n          return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n        }\n\n        // Known modes, by name and by MIME\n        var modes = {};\n        var mimeModes = {};\n\n        // Extra arguments are stored as the mode's dependencies, which is\n        // used by (legacy) mechanisms like loadmode.js to automatically\n        // load a mode. (Preferred mechanism is the require/define calls.)\n        function defineMode(name, mode) {\n          if (arguments.length > 2) {\n            mode.dependencies = Array.prototype.slice.call(arguments, 2);\n          }\n          modes[name] = mode;\n        }\n\n        function defineMIME(mime, spec) {\n          mimeModes[mime] = spec;\n        }\n\n        // Given a MIME type, a {name, ...options} config object, or a name\n        // string, return a mode config object.\n        function resolveMode(spec) {\n          if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n            spec = mimeModes[spec];\n          } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n            var found = mimeModes[spec.name];\n            if (typeof found == \"string\") {\n              found = { name: found };\n            }\n            spec = createObj(found, spec);\n            spec.name = found.name;\n          } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n            return resolveMode(\"application/xml\");\n          } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n            return resolveMode(\"application/json\");\n          }\n          if (typeof spec == \"string\") {\n            return { name: spec };\n          } else {\n            return spec || { name: \"null\" };\n          }\n        }\n\n        // Given a mode spec (anything that resolveMode accepts), find and\n        // initialize an actual mode object.\n        function getMode(options, spec) {\n          spec = resolveMode(spec);\n          var mfactory = modes[spec.name];\n          if (!mfactory) {\n            return getMode(options, \"text/plain\");\n          }\n          var modeObj = mfactory(options, spec);\n          if (modeExtensions.hasOwnProperty(spec.name)) {\n            var exts = modeExtensions[spec.name];\n            for (var prop in exts) {\n              if (!exts.hasOwnProperty(prop)) {\n                continue;\n              }\n              if (modeObj.hasOwnProperty(prop)) {\n                modeObj[\"_\" + prop] = modeObj[prop];\n              }\n              modeObj[prop] = exts[prop];\n            }\n          }\n          modeObj.name = spec.name;\n          if (spec.helperType) {\n            modeObj.helperType = spec.helperType;\n          }\n          if (spec.modeProps) {\n            for (var prop$1 in spec.modeProps) {\n              modeObj[prop$1] = spec.modeProps[prop$1];\n            }\n          }\n\n          return modeObj;\n        }\n\n        // This can be used to attach properties to mode objects from\n        // outside the actual mode definition.\n        var modeExtensions = {};\n        function extendMode(mode, properties) {\n          var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n          copyObj(properties, exts);\n        }\n\n        function copyState(mode, state) {\n          if (state === true) {\n            return state;\n          }\n          if (mode.copyState) {\n            return mode.copyState(state);\n          }\n          var nstate = {};\n          for (var n in state) {\n            var val = state[n];\n            if (val instanceof Array) {\n              val = val.concat([]);\n            }\n            nstate[n] = val;\n          }\n          return nstate;\n        }\n\n        // Given a mode and a state (for that mode), find the inner mode and\n        // state at the position that the state refers to.\n        function innerMode(mode, state) {\n          var info;\n          while (mode.innerMode) {\n            info = mode.innerMode(state);\n            if (!info || info.mode == mode) {\n              break;\n            }\n            state = info.state;\n            mode = info.mode;\n          }\n          return info || { mode: mode, state: state };\n        }\n\n        function startState(mode, a1, a2) {\n          return mode.startState ? mode.startState(a1, a2) : true;\n        }\n\n        // STRING STREAM\n\n        // Fed to the mode parsers, provides helper functions to make\n        // parsers more succinct.\n\n        var StringStream = function StringStream(string, tabSize, lineOracle) {\n          this.pos = this.start = 0;\n          this.string = string;\n          this.tabSize = tabSize || 8;\n          this.lastColumnPos = this.lastColumnValue = 0;\n          this.lineStart = 0;\n          this.lineOracle = lineOracle;\n        };\n\n        StringStream.prototype.eol = function () {\n          return this.pos >= this.string.length;\n        };\n        StringStream.prototype.sol = function () {\n          return this.pos == this.lineStart;\n        };\n        StringStream.prototype.peek = function () {\n          return this.string.charAt(this.pos) || undefined;\n        };\n        StringStream.prototype.next = function () {\n          if (this.pos < this.string.length) {\n            return this.string.charAt(this.pos++);\n          }\n        };\n        StringStream.prototype.eat = function (match) {\n          var ch = this.string.charAt(this.pos);\n          var ok;\n          if (typeof match == \"string\") {\n            ok = ch == match;\n          } else {\n            ok = ch && (match.test ? match.test(ch) : match(ch));\n          }\n          if (ok) {\n            ++this.pos;return ch;\n          }\n        };\n        StringStream.prototype.eatWhile = function (match) {\n          var start = this.pos;\n          while (this.eat(match)) {}\n          return this.pos > start;\n        };\n        StringStream.prototype.eatSpace = function () {\n          var this$1 = this;\n\n          var start = this.pos;\n          while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n            ++this$1.pos;\n          }\n          return this.pos > start;\n        };\n        StringStream.prototype.skipToEnd = function () {\n          this.pos = this.string.length;\n        };\n        StringStream.prototype.skipTo = function (ch) {\n          var found = this.string.indexOf(ch, this.pos);\n          if (found > -1) {\n            this.pos = found;return true;\n          }\n        };\n        StringStream.prototype.backUp = function (n) {\n          this.pos -= n;\n        };\n        StringStream.prototype.column = function () {\n          if (this.lastColumnPos < this.start) {\n            this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n            this.lastColumnPos = this.start;\n          }\n          return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n        };\n        StringStream.prototype.indentation = function () {\n          return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n        };\n        StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n          if (typeof pattern == \"string\") {\n            var cased = function cased(str) {\n              return caseInsensitive ? str.toLowerCase() : str;\n            };\n            var substr = this.string.substr(this.pos, pattern.length);\n            if (cased(substr) == cased(pattern)) {\n              if (consume !== false) {\n                this.pos += pattern.length;\n              }\n              return true;\n            }\n          } else {\n            var match = this.string.slice(this.pos).match(pattern);\n            if (match && match.index > 0) {\n              return null;\n            }\n            if (match && consume !== false) {\n              this.pos += match[0].length;\n            }\n            return match;\n          }\n        };\n        StringStream.prototype.current = function () {\n          return this.string.slice(this.start, this.pos);\n        };\n        StringStream.prototype.hideFirstChars = function (n, inner) {\n          this.lineStart += n;\n          try {\n            return inner();\n          } finally {\n            this.lineStart -= n;\n          }\n        };\n        StringStream.prototype.lookAhead = function (n) {\n          var oracle = this.lineOracle;\n          return oracle && oracle.lookAhead(n);\n        };\n\n        var SavedContext = function SavedContext(state, lookAhead) {\n          this.state = state;\n          this.lookAhead = lookAhead;\n        };\n\n        var Context = function Context(doc, state, line, lookAhead) {\n          this.state = state;\n          this.doc = doc;\n          this.line = line;\n          this.maxLookAhead = lookAhead || 0;\n        };\n\n        Context.prototype.lookAhead = function (n) {\n          var line = this.doc.getLine(this.line + n);\n          if (line != null && n > this.maxLookAhead) {\n            this.maxLookAhead = n;\n          }\n          return line;\n        };\n\n        Context.prototype.nextLine = function () {\n          this.line++;\n          if (this.maxLookAhead > 0) {\n            this.maxLookAhead--;\n          }\n        };\n\n        Context.fromSaved = function (doc, saved, line) {\n          if (saved instanceof SavedContext) {\n            return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n          } else {\n            return new Context(doc, copyState(doc.mode, saved), line);\n          }\n        };\n\n        Context.prototype.save = function (copy) {\n          var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n          return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n        };\n\n        // Compute a style array (an array starting with a mode generation\n        // -- for invalidation -- followed by pairs of end positions and\n        // style strings), which is used to highlight the tokens on the\n        // line.\n        function highlightLine(cm, line, context, forceToEnd) {\n          // A styles array always starts with a number identifying the\n          // mode/overlays that it is based on (for easy invalidation).\n          var st = [cm.state.modeGen],\n              lineClasses = {};\n          // Compute the base array of styles\n          runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n            return st.push(end, style);\n          }, lineClasses, forceToEnd);\n          var state = context.state;\n\n          // Run overlays, adjust style array.\n          var loop = function loop(o) {\n            var overlay = cm.state.overlays[o],\n                i = 1,\n                at = 0;\n            context.state = true;\n            runMode(cm, line.text, overlay.mode, context, function (end, style) {\n              var start = i;\n              // Ensure there's a token end at the current position, and that i points at it\n              while (at < end) {\n                var i_end = st[i];\n                if (i_end > end) {\n                  st.splice(i, 1, end, st[i + 1], i_end);\n                }\n                i += 2;\n                at = Math.min(end, i_end);\n              }\n              if (!style) {\n                return;\n              }\n              if (overlay.opaque) {\n                st.splice(start, i - start, end, \"overlay \" + style);\n                i = start + 2;\n              } else {\n                for (; start < i; start += 2) {\n                  var cur = st[start + 1];\n                  st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n                }\n              }\n            }, lineClasses);\n          };\n\n          for (var o = 0; o < cm.state.overlays.length; ++o) {\n            loop(o);\n          }context.state = state;\n\n          return { styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null };\n        }\n\n        function getLineStyles(cm, line, updateFrontier) {\n          if (!line.styles || line.styles[0] != cm.state.modeGen) {\n            var context = getContextBefore(cm, lineNo(line));\n            var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n            var result = highlightLine(cm, line, context);\n            if (resetState) {\n              context.state = resetState;\n            }\n            line.stateAfter = context.save(!resetState);\n            line.styles = result.styles;\n            if (result.classes) {\n              line.styleClasses = result.classes;\n            } else if (line.styleClasses) {\n              line.styleClasses = null;\n            }\n            if (updateFrontier === cm.doc.highlightFrontier) {\n              cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n            }\n          }\n          return line.styles;\n        }\n\n        function getContextBefore(cm, n, precise) {\n          var doc = cm.doc,\n              display = cm.display;\n          if (!doc.mode.startState) {\n            return new Context(doc, true, n);\n          }\n          var start = findStartLine(cm, n, precise);\n          var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n          var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n          doc.iter(start, n, function (line) {\n            processLine(cm, line.text, context);\n            var pos = context.line;\n            line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n            context.nextLine();\n          });\n          if (precise) {\n            doc.modeFrontier = context.line;\n          }\n          return context;\n        }\n\n        // Lightweight form of highlight -- proceed over this line and\n        // update state, but don't save a style array. Used for lines that\n        // aren't currently visible.\n        function processLine(cm, text, context, startAt) {\n          var mode = cm.doc.mode;\n          var stream = new StringStream(text, cm.options.tabSize, context);\n          stream.start = stream.pos = startAt || 0;\n          if (text == \"\") {\n            callBlankLine(mode, context.state);\n          }\n          while (!stream.eol()) {\n            readToken(mode, stream, context.state);\n            stream.start = stream.pos;\n          }\n        }\n\n        function callBlankLine(mode, state) {\n          if (mode.blankLine) {\n            return mode.blankLine(state);\n          }\n          if (!mode.innerMode) {\n            return;\n          }\n          var inner = innerMode(mode, state);\n          if (inner.mode.blankLine) {\n            return inner.mode.blankLine(inner.state);\n          }\n        }\n\n        function readToken(mode, stream, state, inner) {\n          for (var i = 0; i < 10; i++) {\n            if (inner) {\n              inner[0] = innerMode(mode, state).mode;\n            }\n            var style = mode.token(stream, state);\n            if (stream.pos > stream.start) {\n              return style;\n            }\n          }\n          throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n        }\n\n        var Token = function Token(stream, type, state) {\n          this.start = stream.start;this.end = stream.pos;\n          this.string = stream.current();\n          this.type = type || null;\n          this.state = state;\n        };\n\n        // Utility for getTokenAt and getLineTokens\n        function takeToken(cm, pos, precise, asArray) {\n          var doc = cm.doc,\n              mode = doc.mode,\n              style;\n          pos = _clipPos(doc, pos);\n          var line = getLine(doc, pos.line),\n              context = getContextBefore(cm, pos.line, precise);\n          var stream = new StringStream(line.text, cm.options.tabSize, context),\n              tokens;\n          if (asArray) {\n            tokens = [];\n          }\n          while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n            stream.start = stream.pos;\n            style = readToken(mode, stream, context.state);\n            if (asArray) {\n              tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n            }\n          }\n          return asArray ? tokens : new Token(stream, style, context.state);\n        }\n\n        function extractLineClasses(type, output) {\n          if (type) {\n            for (;;) {\n              var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n              if (!lineClass) {\n                break;\n              }\n              type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n              var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n              if (output[prop] == null) {\n                output[prop] = lineClass[2];\n              } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n                output[prop] += \" \" + lineClass[2];\n              }\n            }\n          }\n          return type;\n        }\n\n        // Run the given mode's parser over a line, calling f for each token.\n        function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n          var flattenSpans = mode.flattenSpans;\n          if (flattenSpans == null) {\n            flattenSpans = cm.options.flattenSpans;\n          }\n          var curStart = 0,\n              curStyle = null;\n          var stream = new StringStream(text, cm.options.tabSize, context),\n              style;\n          var inner = cm.options.addModeClass && [null];\n          if (text == \"\") {\n            extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n          }\n          while (!stream.eol()) {\n            if (stream.pos > cm.options.maxHighlightLength) {\n              flattenSpans = false;\n              if (forceToEnd) {\n                processLine(cm, text, context, stream.pos);\n              }\n              stream.pos = text.length;\n              style = null;\n            } else {\n              style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n            }\n            if (inner) {\n              var mName = inner[0].name;\n              if (mName) {\n                style = \"m-\" + (style ? mName + \" \" + style : mName);\n              }\n            }\n            if (!flattenSpans || curStyle != style) {\n              while (curStart < stream.start) {\n                curStart = Math.min(stream.start, curStart + 5000);\n                f(curStart, curStyle);\n              }\n              curStyle = style;\n            }\n            stream.start = stream.pos;\n          }\n          while (curStart < stream.pos) {\n            // Webkit seems to refuse to render text nodes longer than 57444\n            // characters, and returns inaccurate measurements in nodes\n            // starting around 5000 chars.\n            var pos = Math.min(stream.pos, curStart + 5000);\n            f(pos, curStyle);\n            curStart = pos;\n          }\n        }\n\n        // Finds the line to start with when starting a parse. Tries to\n        // find a line with a stateAfter, so that it can start with a\n        // valid state. If that fails, it returns the line with the\n        // smallest indentation, which tends to need the least context to\n        // parse correctly.\n        function findStartLine(cm, n, precise) {\n          var minindent,\n              minline,\n              doc = cm.doc;\n          var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n          for (var search = n; search > lim; --search) {\n            if (search <= doc.first) {\n              return doc.first;\n            }\n            var line = getLine(doc, search - 1),\n                after = line.stateAfter;\n            if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n              return search;\n            }\n            var indented = countColumn(line.text, null, cm.options.tabSize);\n            if (minline == null || minindent > indented) {\n              minline = search - 1;\n              minindent = indented;\n            }\n          }\n          return minline;\n        }\n\n        function retreatFrontier(doc, n) {\n          doc.modeFrontier = Math.min(doc.modeFrontier, n);\n          if (doc.highlightFrontier < n - 10) {\n            return;\n          }\n          var start = doc.first;\n          for (var line = n - 1; line > start; line--) {\n            var saved = getLine(doc, line).stateAfter;\n            // change is on 3\n            // state on line 1 looked ahead 2 -- so saw 3\n            // test 1 + 2 < 3 should cover this\n            if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n              start = line + 1;\n              break;\n            }\n          }\n          doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n        }\n\n        // LINE DATA STRUCTURE\n\n        // Line objects. These hold state related to a line, including\n        // highlighting info (the styles array).\n        var Line = function Line(text, markedSpans, estimateHeight) {\n          this.text = text;\n          attachMarkedSpans(this, markedSpans);\n          this.height = estimateHeight ? estimateHeight(this) : 1;\n        };\n\n        Line.prototype.lineNo = function () {\n          return lineNo(this);\n        };\n        eventMixin(Line);\n\n        // Change the content (text, markers) of a line. Automatically\n        // invalidates cached information and tries to re-estimate the\n        // line's height.\n        function updateLine(line, text, markedSpans, estimateHeight) {\n          line.text = text;\n          if (line.stateAfter) {\n            line.stateAfter = null;\n          }\n          if (line.styles) {\n            line.styles = null;\n          }\n          if (line.order != null) {\n            line.order = null;\n          }\n          detachMarkedSpans(line);\n          attachMarkedSpans(line, markedSpans);\n          var estHeight = estimateHeight ? estimateHeight(line) : 1;\n          if (estHeight != line.height) {\n            updateLineHeight(line, estHeight);\n          }\n        }\n\n        // Detach a line from the document tree and its markers.\n        function cleanUpLine(line) {\n          line.parent = null;\n          detachMarkedSpans(line);\n        }\n\n        // Convert a style as returned by a mode (either null, or a string\n        // containing one or more styles) to a CSS style. This is cached,\n        // and also looks for line-wide styles.\n        var styleToClassCache = {};\n        var styleToClassCacheWithMode = {};\n        function interpretTokenStyle(style, options) {\n          if (!style || /^\\s*$/.test(style)) {\n            return null;\n          }\n          var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n          return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n        }\n\n        // Render the DOM representation of the text of a line. Also builds\n        // up a 'line map', which points at the DOM nodes that represent\n        // specific stretches of text, and is used by the measuring code.\n        // The returned object contains the DOM node, this map, and\n        // information about line-wide styles that were set by the mode.\n        function buildLineContent(cm, lineView) {\n          // The padding-right forces the element to have a 'border', which\n          // is needed on Webkit to be able to get line-level bounding\n          // rectangles for it (in measureChar).\n          var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n          var builder = { pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n            col: 0, pos: 0, cm: cm,\n            trailingSpace: false,\n            splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\") };\n          lineView.measure = {};\n\n          // Iterate over the logical lines that make up this visual line.\n          for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n            var line = i ? lineView.rest[i - 1] : lineView.line,\n                order = void 0;\n            builder.pos = 0;\n            builder.addToken = buildToken;\n            // Optionally wire in some hacks into the token-rendering\n            // algorithm, to deal with browser quirks.\n            if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n              builder.addToken = buildTokenBadBidi(builder.addToken, order);\n            }\n            builder.map = [];\n            var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n            insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n            if (line.styleClasses) {\n              if (line.styleClasses.bgClass) {\n                builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n              }\n              if (line.styleClasses.textClass) {\n                builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n              }\n            }\n\n            // Ensure at least a single node is present, for measuring.\n            if (builder.map.length == 0) {\n              builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n            }\n\n            // Store the map and a cache object for the current logical line\n            if (i == 0) {\n              lineView.measure.map = builder.map;\n              lineView.measure.cache = {};\n            } else {\n              (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n            }\n          }\n\n          // See issue #2901\n          if (webkit) {\n            var last = builder.content.lastChild;\n            if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n              builder.content.className = \"cm-tab-wrap-hack\";\n            }\n          }\n\n          signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n          if (builder.pre.className) {\n            builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n          }\n\n          return builder;\n        }\n\n        function defaultSpecialCharPlaceholder(ch) {\n          var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n          token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n          token.setAttribute(\"aria-label\", token.title);\n          return token;\n        }\n\n        // Build up the DOM representation for a single token, and add it to\n        // the line map. Takes care to render special characters separately.\n        function buildToken(builder, text, style, startStyle, endStyle, title, css) {\n          if (!text) {\n            return;\n          }\n          var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n          var special = builder.cm.state.specialChars,\n              mustWrap = false;\n          var content;\n          if (!special.test(text)) {\n            builder.col += text.length;\n            content = document.createTextNode(displayText);\n            builder.map.push(builder.pos, builder.pos + text.length, content);\n            if (ie && ie_version < 9) {\n              mustWrap = true;\n            }\n            builder.pos += text.length;\n          } else {\n            content = document.createDocumentFragment();\n            var pos = 0;\n            while (true) {\n              special.lastIndex = pos;\n              var m = special.exec(text);\n              var skipped = m ? m.index - pos : text.length - pos;\n              if (skipped) {\n                var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n                if (ie && ie_version < 9) {\n                  content.appendChild(elt(\"span\", [txt]));\n                } else {\n                  content.appendChild(txt);\n                }\n                builder.map.push(builder.pos, builder.pos + skipped, txt);\n                builder.col += skipped;\n                builder.pos += skipped;\n              }\n              if (!m) {\n                break;\n              }\n              pos += skipped + 1;\n              var txt$1 = void 0;\n              if (m[0] == \"\\t\") {\n                var tabSize = builder.cm.options.tabSize,\n                    tabWidth = tabSize - builder.col % tabSize;\n                txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n                txt$1.setAttribute(\"role\", \"presentation\");\n                txt$1.setAttribute(\"cm-text\", \"\\t\");\n                builder.col += tabWidth;\n              } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n                txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n                txt$1.setAttribute(\"cm-text\", m[0]);\n                builder.col += 1;\n              } else {\n                txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n                txt$1.setAttribute(\"cm-text\", m[0]);\n                if (ie && ie_version < 9) {\n                  content.appendChild(elt(\"span\", [txt$1]));\n                } else {\n                  content.appendChild(txt$1);\n                }\n                builder.col += 1;\n              }\n              builder.map.push(builder.pos, builder.pos + 1, txt$1);\n              builder.pos++;\n            }\n          }\n          builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n          if (style || startStyle || endStyle || mustWrap || css) {\n            var fullStyle = style || \"\";\n            if (startStyle) {\n              fullStyle += startStyle;\n            }\n            if (endStyle) {\n              fullStyle += endStyle;\n            }\n            var token = elt(\"span\", [content], fullStyle, css);\n            if (title) {\n              token.title = title;\n            }\n            return builder.content.appendChild(token);\n          }\n          builder.content.appendChild(content);\n        }\n\n        function splitSpaces(text, trailingBefore) {\n          if (text.length > 1 && !/  /.test(text)) {\n            return text;\n          }\n          var spaceBefore = trailingBefore,\n              result = \"\";\n          for (var i = 0; i < text.length; i++) {\n            var ch = text.charAt(i);\n            if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n              ch = \"\\xA0\";\n            }\n            result += ch;\n            spaceBefore = ch == \" \";\n          }\n          return result;\n        }\n\n        // Work around nonsense dimensions being reported for stretches of\n        // right-to-left text.\n        function buildTokenBadBidi(inner, order) {\n          return function (builder, text, style, startStyle, endStyle, title, css) {\n            style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n            var start = builder.pos,\n                end = start + text.length;\n            for (;;) {\n              // Find the part that overlaps with the start of this text\n              var part = void 0;\n              for (var i = 0; i < order.length; i++) {\n                part = order[i];\n                if (part.to > start && part.from <= start) {\n                  break;\n                }\n              }\n              if (part.to >= end) {\n                return inner(builder, text, style, startStyle, endStyle, title, css);\n              }\n              inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n              startStyle = null;\n              text = text.slice(part.to - start);\n              start = part.to;\n            }\n          };\n        }\n\n        function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n          var widget = !ignoreWidget && marker.widgetNode;\n          if (widget) {\n            builder.map.push(builder.pos, builder.pos + size, widget);\n          }\n          if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n            if (!widget) {\n              widget = builder.content.appendChild(document.createElement(\"span\"));\n            }\n            widget.setAttribute(\"cm-marker\", marker.id);\n          }\n          if (widget) {\n            builder.cm.display.input.setUneditable(widget);\n            builder.content.appendChild(widget);\n          }\n          builder.pos += size;\n          builder.trailingSpace = false;\n        }\n\n        // Outputs a number of spans to make up a line, taking highlighting\n        // and marked text into account.\n        function insertLineContent(line, builder, styles) {\n          var spans = line.markedSpans,\n              allText = line.text,\n              at = 0;\n          if (!spans) {\n            for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n              builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n            }\n            return;\n          }\n\n          var len = allText.length,\n              pos = 0,\n              i = 1,\n              text = \"\",\n              style,\n              css;\n          var nextChange = 0,\n              spanStyle,\n              spanEndStyle,\n              spanStartStyle,\n              title,\n              collapsed;\n          for (;;) {\n            if (nextChange == pos) {\n              // Update current marker set\n              spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n              collapsed = null;nextChange = Infinity;\n              var foundBookmarks = [],\n                  endStyles = void 0;\n              for (var j = 0; j < spans.length; ++j) {\n                var sp = spans[j],\n                    m = sp.marker;\n                if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n                  foundBookmarks.push(m);\n                } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n                  if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n                    nextChange = sp.to;\n                    spanEndStyle = \"\";\n                  }\n                  if (m.className) {\n                    spanStyle += \" \" + m.className;\n                  }\n                  if (m.css) {\n                    css = (css ? css + \";\" : \"\") + m.css;\n                  }\n                  if (m.startStyle && sp.from == pos) {\n                    spanStartStyle += \" \" + m.startStyle;\n                  }\n                  if (m.endStyle && sp.to == nextChange) {\n                    (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n                  }\n                  if (m.title && !title) {\n                    title = m.title;\n                  }\n                  if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n                    collapsed = sp;\n                  }\n                } else if (sp.from > pos && nextChange > sp.from) {\n                  nextChange = sp.from;\n                }\n              }\n              if (endStyles) {\n                for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n                  if (endStyles[j$1 + 1] == nextChange) {\n                    spanEndStyle += \" \" + endStyles[j$1];\n                  }\n                }\n              }\n\n              if (!collapsed || collapsed.from == pos) {\n                for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n                  buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n                }\n              }\n              if (collapsed && (collapsed.from || 0) == pos) {\n                buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n                if (collapsed.to == null) {\n                  return;\n                }\n                if (collapsed.to == pos) {\n                  collapsed = false;\n                }\n              }\n            }\n            if (pos >= len) {\n              break;\n            }\n\n            var upto = Math.min(len, nextChange);\n            while (true) {\n              if (text) {\n                var end = pos + text.length;\n                if (!collapsed) {\n                  var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n                  builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n                }\n                if (end >= upto) {\n                  text = text.slice(upto - pos);pos = upto;break;\n                }\n                pos = end;\n                spanStartStyle = \"\";\n              }\n              text = allText.slice(at, at = styles[i++]);\n              style = interpretTokenStyle(styles[i++], builder.cm.options);\n            }\n          }\n        }\n\n        // These objects are used to represent the visible (currently drawn)\n        // part of the document. A LineView may correspond to multiple\n        // logical lines, if those are connected by collapsed ranges.\n        function LineView(doc, line, lineN) {\n          // The starting line\n          this.line = line;\n          // Continuing lines, if any\n          this.rest = visualLineContinued(line);\n          // Number of logical lines in this visual line\n          this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n          this.node = this.text = null;\n          this.hidden = lineIsHidden(doc, line);\n        }\n\n        // Create a range of LineView objects for the given lines.\n        function buildViewArray(cm, from, to) {\n          var array = [],\n              nextPos;\n          for (var pos = from; pos < to; pos = nextPos) {\n            var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n            nextPos = pos + view.size;\n            array.push(view);\n          }\n          return array;\n        }\n\n        var operationGroup = null;\n\n        function pushOperation(op) {\n          if (operationGroup) {\n            operationGroup.ops.push(op);\n          } else {\n            op.ownsGroup = operationGroup = {\n              ops: [op],\n              delayedCallbacks: []\n            };\n          }\n        }\n\n        function fireCallbacksForOps(group) {\n          // Calls delayed callbacks and cursorActivity handlers until no\n          // new ones appear\n          var callbacks = group.delayedCallbacks,\n              i = 0;\n          do {\n            for (; i < callbacks.length; i++) {\n              callbacks[i].call(null);\n            }\n            for (var j = 0; j < group.ops.length; j++) {\n              var op = group.ops[j];\n              if (op.cursorActivityHandlers) {\n                while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n                  op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n                }\n              }\n            }\n          } while (i < callbacks.length);\n        }\n\n        function finishOperation(op, endCb) {\n          var group = op.ownsGroup;\n          if (!group) {\n            return;\n          }\n\n          try {\n            fireCallbacksForOps(group);\n          } finally {\n            operationGroup = null;\n            endCb(group);\n          }\n        }\n\n        var orphanDelayedCallbacks = null;\n\n        // Often, we want to signal events at a point where we are in the\n        // middle of some work, but don't want the handler to start calling\n        // other methods on the editor, which might be in an inconsistent\n        // state or simply not expect any other events to happen.\n        // signalLater looks whether there are any handlers, and schedules\n        // them to be executed when the last operation ends, or, if no\n        // operation is active, when a timeout fires.\n        function signalLater(emitter, type /*, values...*/) {\n          var arr = getHandlers(emitter, type);\n          if (!arr.length) {\n            return;\n          }\n          var args = Array.prototype.slice.call(arguments, 2),\n              list;\n          if (operationGroup) {\n            list = operationGroup.delayedCallbacks;\n          } else if (orphanDelayedCallbacks) {\n            list = orphanDelayedCallbacks;\n          } else {\n            list = orphanDelayedCallbacks = [];\n            setTimeout(fireOrphanDelayed, 0);\n          }\n          var loop = function loop(i) {\n            list.push(function () {\n              return arr[i].apply(null, args);\n            });\n          };\n\n          for (var i = 0; i < arr.length; ++i) {\n            loop(i);\n          }\n        }\n\n        function fireOrphanDelayed() {\n          var delayed = orphanDelayedCallbacks;\n          orphanDelayedCallbacks = null;\n          for (var i = 0; i < delayed.length; ++i) {\n            delayed[i]();\n          }\n        }\n\n        // When an aspect of a line changes, a string is added to\n        // lineView.changes. This updates the relevant part of the line's\n        // DOM structure.\n        function updateLineForChanges(cm, lineView, lineN, dims) {\n          for (var j = 0; j < lineView.changes.length; j++) {\n            var type = lineView.changes[j];\n            if (type == \"text\") {\n              updateLineText(cm, lineView);\n            } else if (type == \"gutter\") {\n              updateLineGutter(cm, lineView, lineN, dims);\n            } else if (type == \"class\") {\n              updateLineClasses(cm, lineView);\n            } else if (type == \"widget\") {\n              updateLineWidgets(cm, lineView, dims);\n            }\n          }\n          lineView.changes = null;\n        }\n\n        // Lines with gutter elements, widgets or a background class need to\n        // be wrapped, and have the extra elements added to the wrapper div\n        function ensureLineWrapped(lineView) {\n          if (lineView.node == lineView.text) {\n            lineView.node = elt(\"div\", null, null, \"position: relative\");\n            if (lineView.text.parentNode) {\n              lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n            }\n            lineView.node.appendChild(lineView.text);\n            if (ie && ie_version < 8) {\n              lineView.node.style.zIndex = 2;\n            }\n          }\n          return lineView.node;\n        }\n\n        function updateLineBackground(cm, lineView) {\n          var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n          if (cls) {\n            cls += \" CodeMirror-linebackground\";\n          }\n          if (lineView.background) {\n            if (cls) {\n              lineView.background.className = cls;\n            } else {\n              lineView.background.parentNode.removeChild(lineView.background);lineView.background = null;\n            }\n          } else if (cls) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n            cm.display.input.setUneditable(lineView.background);\n          }\n        }\n\n        // Wrapper around buildLineContent which will reuse the structure\n        // in display.externalMeasured when possible.\n        function getLineContent(cm, lineView) {\n          var ext = cm.display.externalMeasured;\n          if (ext && ext.line == lineView.line) {\n            cm.display.externalMeasured = null;\n            lineView.measure = ext.measure;\n            return ext.built;\n          }\n          return buildLineContent(cm, lineView);\n        }\n\n        // Redraw the line's text. Interacts with the background and text\n        // classes because the mode may output tokens that influence these\n        // classes.\n        function updateLineText(cm, lineView) {\n          var cls = lineView.text.className;\n          var built = getLineContent(cm, lineView);\n          if (lineView.text == lineView.node) {\n            lineView.node = built.pre;\n          }\n          lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n          lineView.text = built.pre;\n          if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n            lineView.bgClass = built.bgClass;\n            lineView.textClass = built.textClass;\n            updateLineClasses(cm, lineView);\n          } else if (cls) {\n            lineView.text.className = cls;\n          }\n        }\n\n        function updateLineClasses(cm, lineView) {\n          updateLineBackground(cm, lineView);\n          if (lineView.line.wrapClass) {\n            ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n          } else if (lineView.node != lineView.text) {\n            lineView.node.className = \"\";\n          }\n          var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n          lineView.text.className = textClass || \"\";\n        }\n\n        function updateLineGutter(cm, lineView, lineN, dims) {\n          if (lineView.gutter) {\n            lineView.node.removeChild(lineView.gutter);\n            lineView.gutter = null;\n          }\n          if (lineView.gutterBackground) {\n            lineView.node.removeChild(lineView.gutterBackground);\n            lineView.gutterBackground = null;\n          }\n          if (lineView.line.gutterClass) {\n            var wrap = ensureLineWrapped(lineView);\n            lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n            cm.display.input.setUneditable(lineView.gutterBackground);\n            wrap.insertBefore(lineView.gutterBackground, lineView.text);\n          }\n          var markers = lineView.line.gutterMarkers;\n          if (cm.options.lineNumbers || markers) {\n            var wrap$1 = ensureLineWrapped(lineView);\n            var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n            cm.display.input.setUneditable(gutterWrap);\n            wrap$1.insertBefore(gutterWrap, lineView.text);\n            if (lineView.line.gutterClass) {\n              gutterWrap.className += \" \" + lineView.line.gutterClass;\n            }\n            if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n              lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n            }\n            if (markers) {\n              for (var k = 0; k < cm.options.gutters.length; ++k) {\n                var id = cm.options.gutters[k],\n                    found = markers.hasOwnProperty(id) && markers[id];\n                if (found) {\n                  gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n                }\n              }\n            }\n          }\n        }\n\n        function updateLineWidgets(cm, lineView, dims) {\n          if (lineView.alignable) {\n            lineView.alignable = null;\n          }\n          for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n            next = node.nextSibling;\n            if (node.className == \"CodeMirror-linewidget\") {\n              lineView.node.removeChild(node);\n            }\n          }\n          insertLineWidgets(cm, lineView, dims);\n        }\n\n        // Build a line's DOM representation from scratch\n        function buildLineElement(cm, lineView, lineN, dims) {\n          var built = getLineContent(cm, lineView);\n          lineView.text = lineView.node = built.pre;\n          if (built.bgClass) {\n            lineView.bgClass = built.bgClass;\n          }\n          if (built.textClass) {\n            lineView.textClass = built.textClass;\n          }\n\n          updateLineClasses(cm, lineView);\n          updateLineGutter(cm, lineView, lineN, dims);\n          insertLineWidgets(cm, lineView, dims);\n          return lineView.node;\n        }\n\n        // A lineView may contain multiple logical lines (when merged by\n        // collapsed spans). The widgets for all of them need to be drawn.\n        function insertLineWidgets(cm, lineView, dims) {\n          insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n          if (lineView.rest) {\n            for (var i = 0; i < lineView.rest.length; i++) {\n              insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n            }\n          }\n        }\n\n        function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n          if (!line.widgets) {\n            return;\n          }\n          var wrap = ensureLineWrapped(lineView);\n          for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n            var widget = ws[i],\n                node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n            if (!widget.handleMouseEvents) {\n              node.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            positionLineWidget(widget, node, lineView, dims);\n            cm.display.input.setUneditable(node);\n            if (allowAbove && widget.above) {\n              wrap.insertBefore(node, lineView.gutter || lineView.text);\n            } else {\n              wrap.appendChild(node);\n            }\n            signalLater(widget, \"redraw\");\n          }\n        }\n\n        function positionLineWidget(widget, node, lineView, dims) {\n          if (widget.noHScroll) {\n            (lineView.alignable || (lineView.alignable = [])).push(node);\n            var width = dims.wrapperWidth;\n            node.style.left = dims.fixedPos + \"px\";\n            if (!widget.coverGutter) {\n              width -= dims.gutterTotalWidth;\n              node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n            }\n            node.style.width = width + \"px\";\n          }\n          if (widget.coverGutter) {\n            node.style.zIndex = 5;\n            node.style.position = \"relative\";\n            if (!widget.noHScroll) {\n              node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n            }\n          }\n        }\n\n        function widgetHeight(widget) {\n          if (widget.height != null) {\n            return widget.height;\n          }\n          var cm = widget.doc.cm;\n          if (!cm) {\n            return 0;\n          }\n          if (!contains(document.body, widget.node)) {\n            var parentStyle = \"position: relative;\";\n            if (widget.coverGutter) {\n              parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n            }\n            if (widget.noHScroll) {\n              parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n            }\n            removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n          }\n          return widget.height = widget.node.parentNode.offsetHeight;\n        }\n\n        // Return true when the given mouse event happened in a widget\n        function eventInWidget(display, e) {\n          for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n            if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n              return true;\n            }\n          }\n        }\n\n        // POSITION MEASUREMENT\n\n        function paddingTop(display) {\n          return display.lineSpace.offsetTop;\n        }\n        function paddingVert(display) {\n          return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n        }\n        function paddingH(display) {\n          if (display.cachedPaddingH) {\n            return display.cachedPaddingH;\n          }\n          var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n          var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n          var data = { left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight) };\n          if (!isNaN(data.left) && !isNaN(data.right)) {\n            display.cachedPaddingH = data;\n          }\n          return data;\n        }\n\n        function scrollGap(cm) {\n          return scrollerGap - cm.display.nativeBarWidth;\n        }\n        function displayWidth(cm) {\n          return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n        }\n        function displayHeight(cm) {\n          return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n        }\n\n        // Ensure the lineView.wrapping.heights array is populated. This is\n        // an array of bottom offsets for the lines that make up a drawn\n        // line. When lineWrapping is on, there might be more than one\n        // height.\n        function ensureLineHeights(cm, lineView, rect) {\n          var wrapping = cm.options.lineWrapping;\n          var curWidth = wrapping && displayWidth(cm);\n          if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n            var heights = lineView.measure.heights = [];\n            if (wrapping) {\n              lineView.measure.width = curWidth;\n              var rects = lineView.text.firstChild.getClientRects();\n              for (var i = 0; i < rects.length - 1; i++) {\n                var cur = rects[i],\n                    next = rects[i + 1];\n                if (Math.abs(cur.bottom - next.bottom) > 2) {\n                  heights.push((cur.bottom + next.top) / 2 - rect.top);\n                }\n              }\n            }\n            heights.push(rect.bottom - rect.top);\n          }\n        }\n\n        // Find a line map (mapping character offsets to text nodes) and a\n        // measurement cache for the given line number. (A line view might\n        // contain multiple lines when collapsed ranges are present.)\n        function mapFromLineView(lineView, line, lineN) {\n          if (lineView.line == line) {\n            return { map: lineView.measure.map, cache: lineView.measure.cache };\n          }\n          for (var i = 0; i < lineView.rest.length; i++) {\n            if (lineView.rest[i] == line) {\n              return { map: lineView.measure.maps[i], cache: lineView.measure.caches[i] };\n            }\n          }\n          for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n            if (lineNo(lineView.rest[i$1]) > lineN) {\n              return { map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true };\n            }\n          }\n        }\n\n        // Render a line into the hidden node display.externalMeasured. Used\n        // when measurement is needed for a line that's not in the viewport.\n        function updateExternalMeasurement(cm, line) {\n          line = visualLine(line);\n          var lineN = lineNo(line);\n          var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n          view.lineN = lineN;\n          var built = view.built = buildLineContent(cm, view);\n          view.text = built.pre;\n          removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n          return view;\n        }\n\n        // Get a {top, bottom, left, right} box (in line-local coordinates)\n        // for a given character.\n        function measureChar(cm, line, ch, bias) {\n          return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n        }\n\n        // Find a line view that corresponds to the given line number.\n        function findViewForLine(cm, lineN) {\n          if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n            return cm.display.view[findViewIndex(cm, lineN)];\n          }\n          var ext = cm.display.externalMeasured;\n          if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n            return ext;\n          }\n        }\n\n        // Measurement can be split in two steps, the set-up work that\n        // applies to the whole line, and the measurement of the actual\n        // character. Functions like coordsChar, that need to do a lot of\n        // measurements in a row, can thus ensure that the set-up work is\n        // only done once.\n        function prepareMeasureForLine(cm, line) {\n          var lineN = lineNo(line);\n          var view = findViewForLine(cm, lineN);\n          if (view && !view.text) {\n            view = null;\n          } else if (view && view.changes) {\n            updateLineForChanges(cm, view, lineN, getDimensions(cm));\n            cm.curOp.forceUpdate = true;\n          }\n          if (!view) {\n            view = updateExternalMeasurement(cm, line);\n          }\n\n          var info = mapFromLineView(view, line, lineN);\n          return {\n            line: line, view: view, rect: null,\n            map: info.map, cache: info.cache, before: info.before,\n            hasHeights: false\n          };\n        }\n\n        // Given a prepared measurement object, measures the position of an\n        // actual character (or fetches it from the cache).\n        function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n          if (prepared.before) {\n            ch = -1;\n          }\n          var key = ch + (bias || \"\"),\n              found;\n          if (prepared.cache.hasOwnProperty(key)) {\n            found = prepared.cache[key];\n          } else {\n            if (!prepared.rect) {\n              prepared.rect = prepared.view.text.getBoundingClientRect();\n            }\n            if (!prepared.hasHeights) {\n              ensureLineHeights(cm, prepared.view, prepared.rect);\n              prepared.hasHeights = true;\n            }\n            found = measureCharInner(cm, prepared, ch, bias);\n            if (!found.bogus) {\n              prepared.cache[key] = found;\n            }\n          }\n          return { left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom };\n        }\n\n        var nullRect = { left: 0, right: 0, top: 0, bottom: 0 };\n\n        function nodeAndOffsetInLineMap(map$$1, ch, bias) {\n          var node, start, end, collapse, mStart, mEnd;\n          // First, search the line map for the text node corresponding to,\n          // or closest to, the target character.\n          for (var i = 0; i < map$$1.length; i += 3) {\n            mStart = map$$1[i];\n            mEnd = map$$1[i + 1];\n            if (ch < mStart) {\n              start = 0;end = 1;\n              collapse = \"left\";\n            } else if (ch < mEnd) {\n              start = ch - mStart;\n              end = start + 1;\n            } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n              end = mEnd - mStart;\n              start = end - 1;\n              if (ch >= mEnd) {\n                collapse = \"right\";\n              }\n            }\n            if (start != null) {\n              node = map$$1[i + 2];\n              if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n                collapse = bias;\n              }\n              if (bias == \"left\" && start == 0) {\n                while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n                  node = map$$1[(i -= 3) + 2];\n                  collapse = \"left\";\n                }\n              }\n              if (bias == \"right\" && start == mEnd - mStart) {\n                while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n                  node = map$$1[(i += 3) + 2];\n                  collapse = \"right\";\n                }\n              }\n              break;\n            }\n          }\n          return { node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd };\n        }\n\n        function getUsefulRect(rects, bias) {\n          var rect = nullRect;\n          if (bias == \"left\") {\n            for (var i = 0; i < rects.length; i++) {\n              if ((rect = rects[i]).left != rect.right) {\n                break;\n              }\n            }\n          } else {\n            for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n              if ((rect = rects[i$1]).left != rect.right) {\n                break;\n              }\n            }\n          }\n          return rect;\n        }\n\n        function measureCharInner(cm, prepared, ch, bias) {\n          var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n          var node = place.node,\n              start = place.start,\n              end = place.end,\n              collapse = place.collapse;\n\n          var rect;\n          if (node.nodeType == 3) {\n            // If it is a text node, use a range to retrieve the coordinates.\n            for (var i$1 = 0; i$1 < 4; i$1++) {\n              // Retry a maximum of 4 times when nonsense rectangles are returned\n              while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n                --start;\n              }\n              while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n                ++end;\n              }\n              if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n                rect = node.parentNode.getBoundingClientRect();\n              } else {\n                rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n              }\n              if (rect.left || rect.right || start == 0) {\n                break;\n              }\n              end = start;\n              start = start - 1;\n              collapse = \"right\";\n            }\n            if (ie && ie_version < 11) {\n              rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n            }\n          } else {\n            // If it is a widget, simply get the box for the whole widget.\n            if (start > 0) {\n              collapse = bias = \"right\";\n            }\n            var rects;\n            if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n              rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n            } else {\n              rect = node.getBoundingClientRect();\n            }\n          }\n          if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n            var rSpan = node.parentNode.getClientRects()[0];\n            if (rSpan) {\n              rect = { left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom };\n            } else {\n              rect = nullRect;\n            }\n          }\n\n          var rtop = rect.top - prepared.rect.top,\n              rbot = rect.bottom - prepared.rect.top;\n          var mid = (rtop + rbot) / 2;\n          var heights = prepared.view.measure.heights;\n          var i = 0;\n          for (; i < heights.length - 1; i++) {\n            if (mid < heights[i]) {\n              break;\n            }\n          }\n          var top = i ? heights[i - 1] : 0,\n              bot = heights[i];\n          var result = { left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n            right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n            top: top, bottom: bot };\n          if (!rect.left && !rect.right) {\n            result.bogus = true;\n          }\n          if (!cm.options.singleCursorHeightPerLine) {\n            result.rtop = rtop;result.rbottom = rbot;\n          }\n\n          return result;\n        }\n\n        // Work around problem with bounding client rects on ranges being\n        // returned incorrectly when zoomed on IE10 and below.\n        function maybeUpdateRectForZooming(measure, rect) {\n          if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n            return rect;\n          }\n          var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n          var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n          return { left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY };\n        }\n\n        function clearLineMeasurementCacheFor(lineView) {\n          if (lineView.measure) {\n            lineView.measure.cache = {};\n            lineView.measure.heights = null;\n            if (lineView.rest) {\n              for (var i = 0; i < lineView.rest.length; i++) {\n                lineView.measure.caches[i] = {};\n              }\n            }\n          }\n        }\n\n        function clearLineMeasurementCache(cm) {\n          cm.display.externalMeasure = null;\n          removeChildren(cm.display.lineMeasure);\n          for (var i = 0; i < cm.display.view.length; i++) {\n            clearLineMeasurementCacheFor(cm.display.view[i]);\n          }\n        }\n\n        function clearCaches(cm) {\n          clearLineMeasurementCache(cm);\n          cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n          if (!cm.options.lineWrapping) {\n            cm.display.maxLineChanged = true;\n          }\n          cm.display.lineNumChars = null;\n        }\n\n        function pageScrollX() {\n          // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n          // which causes page_Offset and bounding client rects to use\n          // different reference viewports and invalidate our calculations.\n          if (chrome && android) {\n            return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n          }\n          return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n        }\n        function pageScrollY() {\n          if (chrome && android) {\n            return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n          }\n          return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n        }\n\n        // Converts a {top, bottom, left, right} box from line-local\n        // coordinates into another coordinate system. Context may be one of\n        // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n        // or \"page\".\n        function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n          if (!includeWidgets && lineObj.widgets) {\n            for (var i = 0; i < lineObj.widgets.length; ++i) {\n              if (lineObj.widgets[i].above) {\n                var size = widgetHeight(lineObj.widgets[i]);\n                rect.top += size;rect.bottom += size;\n              }\n            }\n          }\n          if (context == \"line\") {\n            return rect;\n          }\n          if (!context) {\n            context = \"local\";\n          }\n          var yOff = _heightAtLine(lineObj);\n          if (context == \"local\") {\n            yOff += paddingTop(cm.display);\n          } else {\n            yOff -= cm.display.viewOffset;\n          }\n          if (context == \"page\" || context == \"window\") {\n            var lOff = cm.display.lineSpace.getBoundingClientRect();\n            yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n            var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n            rect.left += xOff;rect.right += xOff;\n          }\n          rect.top += yOff;rect.bottom += yOff;\n          return rect;\n        }\n\n        // Coverts a box from \"div\" coords to another coordinate system.\n        // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n        function fromCoordSystem(cm, coords, context) {\n          if (context == \"div\") {\n            return coords;\n          }\n          var left = coords.left,\n              top = coords.top;\n          // First move into \"page\" coordinate system\n          if (context == \"page\") {\n            left -= pageScrollX();\n            top -= pageScrollY();\n          } else if (context == \"local\" || !context) {\n            var localBox = cm.display.sizer.getBoundingClientRect();\n            left += localBox.left;\n            top += localBox.top;\n          }\n\n          var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n          return { left: left - lineSpaceBox.left, top: top - lineSpaceBox.top };\n        }\n\n        function _charCoords(cm, pos, context, lineObj, bias) {\n          if (!lineObj) {\n            lineObj = getLine(cm.doc, pos.line);\n          }\n          return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n        }\n\n        // Returns a box for a given cursor position, which may have an\n        // 'other' property containing the position of the secondary cursor\n        // on a bidi boundary.\n        // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n        // and after `char - 1` in writing order of `char - 1`\n        // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n        // and before `char` in writing order of `char`\n        // Examples (upper-case letters are RTL, lower-case are LTR):\n        //     Pos(0, 1, ...)\n        //     before   after\n        // ab     a|b     a|b\n        // aB     a|B     aB|\n        // Ab     |Ab     A|b\n        // AB     B|A     B|A\n        // Every position after the last character on a line is considered to stick\n        // to the last character on the line.\n        function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n          lineObj = lineObj || getLine(cm.doc, pos.line);\n          if (!preparedMeasure) {\n            preparedMeasure = prepareMeasureForLine(cm, lineObj);\n          }\n          function get(ch, right) {\n            var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n            if (right) {\n              m.left = m.right;\n            } else {\n              m.right = m.left;\n            }\n            return intoCoordSystem(cm, lineObj, m, context);\n          }\n          var order = getOrder(lineObj, cm.doc.direction),\n              ch = pos.ch,\n              sticky = pos.sticky;\n          if (ch >= lineObj.text.length) {\n            ch = lineObj.text.length;\n            sticky = \"before\";\n          } else if (ch <= 0) {\n            ch = 0;\n            sticky = \"after\";\n          }\n          if (!order) {\n            return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n          }\n\n          function getBidi(ch, partPos, invert) {\n            var part = order[partPos],\n                right = part.level % 2 != 0;\n            return get(invert ? ch - 1 : ch, right != invert);\n          }\n          var partPos = getBidiPartAt(order, ch, sticky);\n          var other = bidiOther;\n          var val = getBidi(ch, partPos, sticky == \"before\");\n          if (other != null) {\n            val.other = getBidi(ch, other, sticky != \"before\");\n          }\n          return val;\n        }\n\n        // Used to cheaply estimate the coordinates for a position. Used for\n        // intermediate scroll updates.\n        function estimateCoords(cm, pos) {\n          var left = 0;\n          pos = _clipPos(cm.doc, pos);\n          if (!cm.options.lineWrapping) {\n            left = charWidth(cm.display) * pos.ch;\n          }\n          var lineObj = getLine(cm.doc, pos.line);\n          var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n          return { left: left, right: left, top: top, bottom: top + lineObj.height };\n        }\n\n        // Positions returned by coordsChar contain some extra information.\n        // xRel is the relative x position of the input coordinates compared\n        // to the found position (so xRel > 0 means the coordinates are to\n        // the right of the character position, for example). When outside\n        // is true, that means the coordinates lie outside the line's\n        // vertical range.\n        function PosWithInfo(line, ch, sticky, outside, xRel) {\n          var pos = Pos(line, ch, sticky);\n          pos.xRel = xRel;\n          if (outside) {\n            pos.outside = true;\n          }\n          return pos;\n        }\n\n        // Compute the character position closest to the given coordinates.\n        // Input must be lineSpace-local (\"div\" coordinate system).\n        function _coordsChar(cm, x, y) {\n          var doc = cm.doc;\n          y += cm.display.viewOffset;\n          if (y < 0) {\n            return PosWithInfo(doc.first, 0, null, true, -1);\n          }\n          var lineN = _lineAtHeight(doc, y),\n              last = doc.first + doc.size - 1;\n          if (lineN > last) {\n            return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1);\n          }\n          if (x < 0) {\n            x = 0;\n          }\n\n          var lineObj = getLine(doc, lineN);\n          for (;;) {\n            var found = coordsCharInner(cm, lineObj, lineN, x, y);\n            var merged = collapsedSpanAtEnd(lineObj);\n            var mergedPos = merged && merged.find(0, true);\n            if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0)) {\n              lineN = lineNo(lineObj = mergedPos.to.line);\n            } else {\n              return found;\n            }\n          }\n        }\n\n        function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n          var measure = function measure(ch) {\n            return intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n          };\n          var end = lineObj.text.length;\n          var begin = findFirst(function (ch) {\n            return measure(ch - 1).bottom <= y;\n          }, end, 0);\n          end = findFirst(function (ch) {\n            return measure(ch).top > y;\n          }, begin, end);\n          return { begin: begin, end: end };\n        }\n\n        function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n          var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n          return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n        }\n\n        function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n          y -= _heightAtLine(lineObj);\n          var begin = 0,\n              end = lineObj.text.length;\n          var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n          var pos;\n          var order = getOrder(lineObj, cm.doc.direction);\n          if (order) {\n            if (cm.options.lineWrapping) {\n              var assign;\n              assign = wrappedLineExtent(cm, lineObj, preparedMeasure, y), begin = assign.begin, end = assign.end, assign;\n            }\n            pos = new Pos(lineNo$$1, Math.floor(begin + (end - begin) / 2));\n            var beginLeft = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left;\n            var dir = beginLeft < x ? 1 : -1;\n            var prevDiff,\n                diff = beginLeft - x,\n                prevPos;\n            var steps = Math.ceil((end - begin) / 4);\n            outer: do {\n              prevDiff = diff;\n              prevPos = pos;\n              var i = 0;\n              for (; i < steps; ++i) {\n                var prevPos$1 = pos;\n                pos = moveVisually(cm, lineObj, pos, dir);\n                if (pos == null || pos.ch < begin || end <= (pos.sticky == \"before\" ? pos.ch - 1 : pos.ch)) {\n                  pos = prevPos$1;\n                  break outer;\n                }\n              }\n              diff = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure).left - x;\n              if (steps > 1) {\n                var diff_change_per_step = Math.abs(diff - prevDiff) / steps;\n                steps = Math.min(steps, Math.ceil(Math.abs(diff) / diff_change_per_step));\n                dir = diff < 0 ? 1 : -1;\n              }\n            } while (diff != 0 && (steps > 1 || dir < 0 != diff < 0 && Math.abs(diff) <= Math.abs(prevDiff)));\n            if (Math.abs(diff) > Math.abs(prevDiff)) {\n              if (diff < 0 == prevDiff < 0) {\n                throw new Error(\"Broke out of infinite loop in coordsCharInner\");\n              }\n              pos = prevPos;\n            }\n          } else {\n            var ch = findFirst(function (ch) {\n              var box = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, ch), \"line\");\n              if (box.top > y) {\n                // For the cursor stickiness\n                end = Math.min(ch, end);\n                return true;\n              } else if (box.bottom <= y) {\n                return false;\n              } else if (box.left > x) {\n                return true;\n              } else if (box.right < x) {\n                return false;\n              } else {\n                return x - box.left < box.right - x;\n              }\n            }, begin, end);\n            ch = skipExtendingChars(lineObj.text, ch, 1);\n            pos = new Pos(lineNo$$1, ch, ch == end ? \"before\" : \"after\");\n          }\n          var coords = _cursorCoords(cm, pos, \"line\", lineObj, preparedMeasure);\n          if (y < coords.top || coords.bottom < y) {\n            pos.outside = true;\n          }\n          pos.xRel = x < coords.left ? -1 : x > coords.right ? 1 : 0;\n          return pos;\n        }\n\n        var measureText;\n        // Compute the default text height.\n        function textHeight(display) {\n          if (display.cachedTextHeight != null) {\n            return display.cachedTextHeight;\n          }\n          if (measureText == null) {\n            measureText = elt(\"pre\");\n            // Measure a bunch of lines, for browsers that compute\n            // fractional heights.\n            for (var i = 0; i < 49; ++i) {\n              measureText.appendChild(document.createTextNode(\"x\"));\n              measureText.appendChild(elt(\"br\"));\n            }\n            measureText.appendChild(document.createTextNode(\"x\"));\n          }\n          removeChildrenAndAdd(display.measure, measureText);\n          var height = measureText.offsetHeight / 50;\n          if (height > 3) {\n            display.cachedTextHeight = height;\n          }\n          removeChildren(display.measure);\n          return height || 1;\n        }\n\n        // Compute the default character width.\n        function charWidth(display) {\n          if (display.cachedCharWidth != null) {\n            return display.cachedCharWidth;\n          }\n          var anchor = elt(\"span\", \"xxxxxxxxxx\");\n          var pre = elt(\"pre\", [anchor]);\n          removeChildrenAndAdd(display.measure, pre);\n          var rect = anchor.getBoundingClientRect(),\n              width = (rect.right - rect.left) / 10;\n          if (width > 2) {\n            display.cachedCharWidth = width;\n          }\n          return width || 10;\n        }\n\n        // Do a bulk-read of the DOM positions and sizes needed to draw the\n        // view, so that we don't interleave reading and writing to the DOM.\n        function getDimensions(cm) {\n          var d = cm.display,\n              left = {},\n              width = {};\n          var gutterLeft = d.gutters.clientLeft;\n          for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n            left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n            width[cm.options.gutters[i]] = n.clientWidth;\n          }\n          return { fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth };\n        }\n\n        // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n        // but using getBoundingClientRect to get a sub-pixel-accurate\n        // result.\n        function compensateForHScroll(display) {\n          return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n        }\n\n        // Returns a function that estimates the height of a line, to use as\n        // first approximation until the line becomes visible (and is thus\n        // properly measurable).\n        function estimateHeight(cm) {\n          var th = textHeight(cm.display),\n              wrapping = cm.options.lineWrapping;\n          var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n          return function (line) {\n            if (lineIsHidden(cm.doc, line)) {\n              return 0;\n            }\n\n            var widgetsHeight = 0;\n            if (line.widgets) {\n              for (var i = 0; i < line.widgets.length; i++) {\n                if (line.widgets[i].height) {\n                  widgetsHeight += line.widgets[i].height;\n                }\n              }\n            }\n\n            if (wrapping) {\n              return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n            } else {\n              return widgetsHeight + th;\n            }\n          };\n        }\n\n        function estimateLineHeights(cm) {\n          var doc = cm.doc,\n              est = estimateHeight(cm);\n          doc.iter(function (line) {\n            var estHeight = est(line);\n            if (estHeight != line.height) {\n              updateLineHeight(line, estHeight);\n            }\n          });\n        }\n\n        // Given a mouse event, find the corresponding position. If liberal\n        // is false, it checks whether a gutter or scrollbar was clicked,\n        // and returns null if it was. forRect is used by rectangular\n        // selections, and tries to estimate a character position even for\n        // coordinates beyond the right of the text.\n        function posFromMouse(cm, e, liberal, forRect) {\n          var display = cm.display;\n          if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n            return null;\n          }\n\n          var x,\n              y,\n              space = display.lineSpace.getBoundingClientRect();\n          // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n          try {\n            x = e.clientX - space.left;y = e.clientY - space.top;\n          } catch (e) {\n            return null;\n          }\n          var coords = _coordsChar(cm, x, y),\n              line;\n          if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n            var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n            coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n          }\n          return coords;\n        }\n\n        // Find the view element corresponding to a given line. Return null\n        // when the line isn't visible.\n        function findViewIndex(cm, n) {\n          if (n >= cm.display.viewTo) {\n            return null;\n          }\n          n -= cm.display.viewFrom;\n          if (n < 0) {\n            return null;\n          }\n          var view = cm.display.view;\n          for (var i = 0; i < view.length; i++) {\n            n -= view[i].size;\n            if (n < 0) {\n              return i;\n            }\n          }\n        }\n\n        function updateSelection(cm) {\n          cm.display.input.showSelection(cm.display.input.prepareSelection());\n        }\n\n        function prepareSelection(cm, primary) {\n          var doc = cm.doc,\n              result = {};\n          var curFragment = result.cursors = document.createDocumentFragment();\n          var selFragment = result.selection = document.createDocumentFragment();\n\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            if (primary === false && i == doc.sel.primIndex) {\n              continue;\n            }\n            var range$$1 = doc.sel.ranges[i];\n            if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) {\n              continue;\n            }\n            var collapsed = range$$1.empty();\n            if (collapsed || cm.options.showCursorWhenSelecting) {\n              drawSelectionCursor(cm, range$$1.head, curFragment);\n            }\n            if (!collapsed) {\n              drawSelectionRange(cm, range$$1, selFragment);\n            }\n          }\n          return result;\n        }\n\n        // Draws a cursor for the given range\n        function drawSelectionCursor(cm, head, output) {\n          var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n          var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n          cursor.style.left = pos.left + \"px\";\n          cursor.style.top = pos.top + \"px\";\n          cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n          if (pos.other) {\n            // Secondary cursor, shown when on a 'jump' in bi-directional text\n            var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n            otherCursor.style.display = \"\";\n            otherCursor.style.left = pos.other.left + \"px\";\n            otherCursor.style.top = pos.other.top + \"px\";\n            otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n          }\n        }\n\n        // Draws the given range as a highlighted selection\n        function drawSelectionRange(cm, range$$1, output) {\n          var display = cm.display,\n              doc = cm.doc;\n          var fragment = document.createDocumentFragment();\n          var padding = paddingH(cm.display),\n              leftSide = padding.left;\n          var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n\n          function add(left, top, width, bottom) {\n            if (top < 0) {\n              top = 0;\n            }\n            top = Math.round(top);\n            bottom = Math.round(bottom);\n            fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n          }\n\n          function drawForLine(line, fromArg, toArg) {\n            var lineObj = getLine(doc, line);\n            var lineLen = lineObj.text.length;\n            var start, end;\n            function coords(ch, bias) {\n              return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n            }\n\n            iterateBidiSections(getOrder(lineObj, doc.direction), fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir) {\n              var leftPos = coords(from, \"left\"),\n                  rightPos,\n                  left,\n                  right;\n              if (from == to) {\n                rightPos = leftPos;\n                left = right = leftPos.left;\n              } else {\n                rightPos = coords(to - 1, \"right\");\n                if (dir == \"rtl\") {\n                  var tmp = leftPos;leftPos = rightPos;rightPos = tmp;\n                }\n                left = leftPos.left;\n                right = rightPos.right;\n              }\n              if (fromArg == null && from == 0) {\n                left = leftSide;\n              }\n              if (rightPos.top - leftPos.top > 3) {\n                // Different lines, draw top part\n                add(left, leftPos.top, null, leftPos.bottom);\n                left = leftSide;\n                if (leftPos.bottom < rightPos.top) {\n                  add(left, leftPos.bottom, null, rightPos.top);\n                }\n              }\n              if (toArg == null && to == lineLen) {\n                right = rightSide;\n              }\n              if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left) {\n                start = leftPos;\n              }\n              if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right) {\n                end = rightPos;\n              }\n              if (left < leftSide + 1) {\n                left = leftSide;\n              }\n              add(left, rightPos.top, right - left, rightPos.bottom);\n            });\n            return { start: start, end: end };\n          }\n\n          var sFrom = range$$1.from(),\n              sTo = range$$1.to();\n          if (sFrom.line == sTo.line) {\n            drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n          } else {\n            var fromLine = getLine(doc, sFrom.line),\n                toLine = getLine(doc, sTo.line);\n            var singleVLine = visualLine(fromLine) == visualLine(toLine);\n            var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n            var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n            if (singleVLine) {\n              if (leftEnd.top < rightStart.top - 2) {\n                add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n                add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n              } else {\n                add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n              }\n            }\n            if (leftEnd.bottom < rightStart.top) {\n              add(leftSide, leftEnd.bottom, null, rightStart.top);\n            }\n          }\n\n          output.appendChild(fragment);\n        }\n\n        // Cursor-blinking\n        function restartBlink(cm) {\n          if (!cm.state.focused) {\n            return;\n          }\n          var display = cm.display;\n          clearInterval(display.blinker);\n          var on = true;\n          display.cursorDiv.style.visibility = \"\";\n          if (cm.options.cursorBlinkRate > 0) {\n            display.blinker = setInterval(function () {\n              return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n            }, cm.options.cursorBlinkRate);\n          } else if (cm.options.cursorBlinkRate < 0) {\n            display.cursorDiv.style.visibility = \"hidden\";\n          }\n        }\n\n        function ensureFocus(cm) {\n          if (!cm.state.focused) {\n            cm.display.input.focus();onFocus(cm);\n          }\n        }\n\n        function delayBlurEvent(cm) {\n          cm.state.delayingBlurEvent = true;\n          setTimeout(function () {\n            if (cm.state.delayingBlurEvent) {\n              cm.state.delayingBlurEvent = false;\n              onBlur(cm);\n            }\n          }, 100);\n        }\n\n        function onFocus(cm, e) {\n          if (cm.state.delayingBlurEvent) {\n            cm.state.delayingBlurEvent = false;\n          }\n\n          if (cm.options.readOnly == \"nocursor\") {\n            return;\n          }\n          if (!cm.state.focused) {\n            signal(cm, \"focus\", cm, e);\n            cm.state.focused = true;\n            addClass(cm.display.wrapper, \"CodeMirror-focused\");\n            // This test prevents this from firing when a context\n            // menu is closed (since the input reset would kill the\n            // select-all detection hack)\n            if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n              cm.display.input.reset();\n              if (webkit) {\n                setTimeout(function () {\n                  return cm.display.input.reset(true);\n                }, 20);\n              } // Issue #1730\n            }\n            cm.display.input.receivedFocus();\n          }\n          restartBlink(cm);\n        }\n        function onBlur(cm, e) {\n          if (cm.state.delayingBlurEvent) {\n            return;\n          }\n\n          if (cm.state.focused) {\n            signal(cm, \"blur\", cm, e);\n            cm.state.focused = false;\n            rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n          }\n          clearInterval(cm.display.blinker);\n          setTimeout(function () {\n            if (!cm.state.focused) {\n              cm.display.shift = false;\n            }\n          }, 150);\n        }\n\n        // Read the actual heights of the rendered lines, and update their\n        // stored heights to match.\n        function updateHeightsInViewport(cm) {\n          var display = cm.display;\n          var prevBottom = display.lineDiv.offsetTop;\n          for (var i = 0; i < display.view.length; i++) {\n            var cur = display.view[i],\n                height = void 0;\n            if (cur.hidden) {\n              continue;\n            }\n            if (ie && ie_version < 8) {\n              var bot = cur.node.offsetTop + cur.node.offsetHeight;\n              height = bot - prevBottom;\n              prevBottom = bot;\n            } else {\n              var box = cur.node.getBoundingClientRect();\n              height = box.bottom - box.top;\n            }\n            var diff = cur.line.height - height;\n            if (height < 2) {\n              height = textHeight(display);\n            }\n            if (diff > .005 || diff < -.005) {\n              updateLineHeight(cur.line, height);\n              updateWidgetHeight(cur.line);\n              if (cur.rest) {\n                for (var j = 0; j < cur.rest.length; j++) {\n                  updateWidgetHeight(cur.rest[j]);\n                }\n              }\n            }\n          }\n        }\n\n        // Read and store the height of line widgets associated with the\n        // given line.\n        function updateWidgetHeight(line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; ++i) {\n              line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;\n            }\n          }\n        }\n\n        // Compute the lines that are visible in a given viewport (defaults\n        // the the current scroll position). viewport may contain top,\n        // height, and ensure (see op.scrollToPos) properties.\n        function visibleLines(display, doc, viewport) {\n          var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n          top = Math.floor(top - paddingTop(display));\n          var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n          var from = _lineAtHeight(doc, top),\n              to = _lineAtHeight(doc, bottom);\n          // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n          // forces those lines into the viewport (if possible).\n          if (viewport && viewport.ensure) {\n            var ensureFrom = viewport.ensure.from.line,\n                ensureTo = viewport.ensure.to.line;\n            if (ensureFrom < from) {\n              from = ensureFrom;\n              to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n            } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n              from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n              to = ensureTo;\n            }\n          }\n          return { from: from, to: Math.max(to, from + 1) };\n        }\n\n        // Re-align line numbers and gutter marks to compensate for\n        // horizontal scrolling.\n        function alignHorizontally(cm) {\n          var display = cm.display,\n              view = display.view;\n          if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n            return;\n          }\n          var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n          var gutterW = display.gutters.offsetWidth,\n              left = comp + \"px\";\n          for (var i = 0; i < view.length; i++) {\n            if (!view[i].hidden) {\n              if (cm.options.fixedGutter) {\n                if (view[i].gutter) {\n                  view[i].gutter.style.left = left;\n                }\n                if (view[i].gutterBackground) {\n                  view[i].gutterBackground.style.left = left;\n                }\n              }\n              var align = view[i].alignable;\n              if (align) {\n                for (var j = 0; j < align.length; j++) {\n                  align[j].style.left = left;\n                }\n              }\n            }\n          }\n          if (cm.options.fixedGutter) {\n            display.gutters.style.left = comp + gutterW + \"px\";\n          }\n        }\n\n        // Used to ensure that the line number gutter is still the right\n        // size for the current document size. Returns true when an update\n        // is needed.\n        function maybeUpdateLineNumberWidth(cm) {\n          if (!cm.options.lineNumbers) {\n            return false;\n          }\n          var doc = cm.doc,\n              last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n              display = cm.display;\n          if (last.length != display.lineNumChars) {\n            var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n            var innerW = test.firstChild.offsetWidth,\n                padding = test.offsetWidth - innerW;\n            display.lineGutter.style.width = \"\";\n            display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n            display.lineNumWidth = display.lineNumInnerWidth + padding;\n            display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n            display.lineGutter.style.width = display.lineNumWidth + \"px\";\n            updateGutterSpace(cm);\n            return true;\n          }\n          return false;\n        }\n\n        // SCROLLING THINGS INTO VIEW\n\n        // If an editor sits on the top or bottom of the window, partially\n        // scrolled out of view, this ensures that the cursor is visible.\n        function maybeScrollWindow(cm, rect) {\n          if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n            return;\n          }\n\n          var display = cm.display,\n              box = display.sizer.getBoundingClientRect(),\n              doScroll = null;\n          if (rect.top + box.top < 0) {\n            doScroll = true;\n          } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n            doScroll = false;\n          }\n          if (doScroll != null && !phantom) {\n            var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n            cm.display.lineSpace.appendChild(scrollNode);\n            scrollNode.scrollIntoView(doScroll);\n            cm.display.lineSpace.removeChild(scrollNode);\n          }\n        }\n\n        // Scroll a given position into view (immediately), verifying that\n        // it actually became visible (as line heights are accurately\n        // measured, the position of something may 'drift' during drawing).\n        function scrollPosIntoView(cm, pos, end, margin) {\n          if (margin == null) {\n            margin = 0;\n          }\n          var rect;\n          if (!cm.options.lineWrapping && pos == end) {\n            // Set pos and end to the cursor positions around the character pos sticks to\n            // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n            // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n            pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n            end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n          }\n          for (var limit = 0; limit < 5; limit++) {\n            var changed = false;\n            var coords = _cursorCoords(cm, pos);\n            var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n            rect = { left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin };\n            var scrollPos = calculateScrollPos(cm, rect);\n            var startTop = cm.doc.scrollTop,\n                startLeft = cm.doc.scrollLeft;\n            if (scrollPos.scrollTop != null) {\n              updateScrollTop(cm, scrollPos.scrollTop);\n              if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n                changed = true;\n              }\n            }\n            if (scrollPos.scrollLeft != null) {\n              setScrollLeft(cm, scrollPos.scrollLeft);\n              if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n                changed = true;\n              }\n            }\n            if (!changed) {\n              break;\n            }\n          }\n          return rect;\n        }\n\n        // Scroll a given set of coordinates into view (immediately).\n        function scrollIntoView(cm, rect) {\n          var scrollPos = calculateScrollPos(cm, rect);\n          if (scrollPos.scrollTop != null) {\n            updateScrollTop(cm, scrollPos.scrollTop);\n          }\n          if (scrollPos.scrollLeft != null) {\n            setScrollLeft(cm, scrollPos.scrollLeft);\n          }\n        }\n\n        // Calculate a new scroll position needed to scroll the given\n        // rectangle into view. Returns an object with scrollTop and\n        // scrollLeft properties. When these are undefined, the\n        // vertical/horizontal position does not need to be adjusted.\n        function calculateScrollPos(cm, rect) {\n          var display = cm.display,\n              snapMargin = textHeight(cm.display);\n          if (rect.top < 0) {\n            rect.top = 0;\n          }\n          var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n          var screen = displayHeight(cm),\n              result = {};\n          if (rect.bottom - rect.top > screen) {\n            rect.bottom = rect.top + screen;\n          }\n          var docBottom = cm.doc.height + paddingVert(display);\n          var atTop = rect.top < snapMargin,\n              atBottom = rect.bottom > docBottom - snapMargin;\n          if (rect.top < screentop) {\n            result.scrollTop = atTop ? 0 : rect.top;\n          } else if (rect.bottom > screentop + screen) {\n            var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n            if (newTop != screentop) {\n              result.scrollTop = newTop;\n            }\n          }\n\n          var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n          var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n          var tooWide = rect.right - rect.left > screenw;\n          if (tooWide) {\n            rect.right = rect.left + screenw;\n          }\n          if (rect.left < 10) {\n            result.scrollLeft = 0;\n          } else if (rect.left < screenleft) {\n            result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n          } else if (rect.right > screenw + screenleft - 3) {\n            result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n          }\n          return result;\n        }\n\n        // Store a relative adjustment to the scroll position in the current\n        // operation (to be applied when the operation finishes).\n        function addToScrollTop(cm, top) {\n          if (top == null) {\n            return;\n          }\n          resolveScrollToPos(cm);\n          cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n        }\n\n        // Make sure that at the end of the operation the current cursor is\n        // shown.\n        function ensureCursorVisible(cm) {\n          resolveScrollToPos(cm);\n          var cur = cm.getCursor();\n          cm.curOp.scrollToPos = { from: cur, to: cur, margin: cm.options.cursorScrollMargin };\n        }\n\n        function scrollToCoords(cm, x, y) {\n          if (x != null || y != null) {\n            resolveScrollToPos(cm);\n          }\n          if (x != null) {\n            cm.curOp.scrollLeft = x;\n          }\n          if (y != null) {\n            cm.curOp.scrollTop = y;\n          }\n        }\n\n        function scrollToRange(cm, range$$1) {\n          resolveScrollToPos(cm);\n          cm.curOp.scrollToPos = range$$1;\n        }\n\n        // When an operation has its scrollToPos property set, and another\n        // scroll action is applied before the end of the operation, this\n        // 'simulates' scrolling that position into view in a cheap way, so\n        // that the effect of intermediate scroll commands is not ignored.\n        function resolveScrollToPos(cm) {\n          var range$$1 = cm.curOp.scrollToPos;\n          if (range$$1) {\n            cm.curOp.scrollToPos = null;\n            var from = estimateCoords(cm, range$$1.from),\n                to = estimateCoords(cm, range$$1.to);\n            scrollToCoordsRange(cm, from, to, range$$1.margin);\n          }\n        }\n\n        function scrollToCoordsRange(cm, from, to, margin) {\n          var sPos = calculateScrollPos(cm, {\n            left: Math.min(from.left, to.left),\n            top: Math.min(from.top, to.top) - margin,\n            right: Math.max(from.right, to.right),\n            bottom: Math.max(from.bottom, to.bottom) + margin\n          });\n          scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n        }\n\n        // Sync the scrollable area and scrollbars, ensure the viewport\n        // covers the visible area.\n        function updateScrollTop(cm, val) {\n          if (Math.abs(cm.doc.scrollTop - val) < 2) {\n            return;\n          }\n          if (!gecko) {\n            updateDisplaySimple(cm, { top: val });\n          }\n          setScrollTop(cm, val, true);\n          if (gecko) {\n            updateDisplaySimple(cm);\n          }\n          startWorker(cm, 100);\n        }\n\n        function setScrollTop(cm, val, forceScroll) {\n          val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n          if (cm.display.scroller.scrollTop == val && !forceScroll) {\n            return;\n          }\n          cm.doc.scrollTop = val;\n          cm.display.scrollbars.setScrollTop(val);\n          if (cm.display.scroller.scrollTop != val) {\n            cm.display.scroller.scrollTop = val;\n          }\n        }\n\n        // Sync scroller and scrollbar, ensure the gutter elements are\n        // aligned.\n        function setScrollLeft(cm, val, isScroller, forceScroll) {\n          val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n          if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n            return;\n          }\n          cm.doc.scrollLeft = val;\n          alignHorizontally(cm);\n          if (cm.display.scroller.scrollLeft != val) {\n            cm.display.scroller.scrollLeft = val;\n          }\n          cm.display.scrollbars.setScrollLeft(val);\n        }\n\n        // SCROLLBARS\n\n        // Prepare DOM reads needed to update the scrollbars. Done in one\n        // shot to minimize update/measure roundtrips.\n        function measureForScrollbars(cm) {\n          var d = cm.display,\n              gutterW = d.gutters.offsetWidth;\n          var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n          return {\n            clientHeight: d.scroller.clientHeight,\n            viewHeight: d.wrapper.clientHeight,\n            scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n            viewWidth: d.wrapper.clientWidth,\n            barLeft: cm.options.fixedGutter ? gutterW : 0,\n            docHeight: docH,\n            scrollHeight: docH + scrollGap(cm) + d.barHeight,\n            nativeBarWidth: d.nativeBarWidth,\n            gutterWidth: gutterW\n          };\n        }\n\n        var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n          this.cm = cm;\n          var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n          var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n          place(vert);place(horiz);\n\n          on(vert, \"scroll\", function () {\n            if (vert.clientHeight) {\n              scroll(vert.scrollTop, \"vertical\");\n            }\n          });\n          on(horiz, \"scroll\", function () {\n            if (horiz.clientWidth) {\n              scroll(horiz.scrollLeft, \"horizontal\");\n            }\n          });\n\n          this.checkedZeroWidth = false;\n          // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n          if (ie && ie_version < 8) {\n            this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n          }\n        };\n\n        NativeScrollbars.prototype.update = function (measure) {\n          var needsH = measure.scrollWidth > measure.clientWidth + 1;\n          var needsV = measure.scrollHeight > measure.clientHeight + 1;\n          var sWidth = measure.nativeBarWidth;\n\n          if (needsV) {\n            this.vert.style.display = \"block\";\n            this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n            var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n            // A bug in IE8 can cause this value to be negative, so guard it.\n            this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n          } else {\n            this.vert.style.display = \"\";\n            this.vert.firstChild.style.height = \"0\";\n          }\n\n          if (needsH) {\n            this.horiz.style.display = \"block\";\n            this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n            this.horiz.style.left = measure.barLeft + \"px\";\n            var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n            this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n          } else {\n            this.horiz.style.display = \"\";\n            this.horiz.firstChild.style.width = \"0\";\n          }\n\n          if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n            if (sWidth == 0) {\n              this.zeroWidthHack();\n            }\n            this.checkedZeroWidth = true;\n          }\n\n          return { right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0 };\n        };\n\n        NativeScrollbars.prototype.setScrollLeft = function (pos) {\n          if (this.horiz.scrollLeft != pos) {\n            this.horiz.scrollLeft = pos;\n          }\n          if (this.disableHoriz) {\n            this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n          }\n        };\n\n        NativeScrollbars.prototype.setScrollTop = function (pos) {\n          if (this.vert.scrollTop != pos) {\n            this.vert.scrollTop = pos;\n          }\n          if (this.disableVert) {\n            this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n          }\n        };\n\n        NativeScrollbars.prototype.zeroWidthHack = function () {\n          var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n          this.horiz.style.height = this.vert.style.width = w;\n          this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n          this.disableHoriz = new Delayed();\n          this.disableVert = new Delayed();\n        };\n\n        NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n          bar.style.pointerEvents = \"auto\";\n          function maybeDisable() {\n            // To find out whether the scrollbar is still visible, we\n            // check whether the element under the pixel in the bottom\n            // right corner of the scrollbar box is the scrollbar box\n            // itself (when the bar is still visible) or its filler child\n            // (when the bar is hidden). If it is still visible, we keep\n            // it enabled, if it's hidden, we disable pointer events.\n            var box = bar.getBoundingClientRect();\n            var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n            if (elt$$1 != bar) {\n              bar.style.pointerEvents = \"none\";\n            } else {\n              delay.set(1000, maybeDisable);\n            }\n          }\n          delay.set(1000, maybeDisable);\n        };\n\n        NativeScrollbars.prototype.clear = function () {\n          var parent = this.horiz.parentNode;\n          parent.removeChild(this.horiz);\n          parent.removeChild(this.vert);\n        };\n\n        var NullScrollbars = function NullScrollbars() {};\n\n        NullScrollbars.prototype.update = function () {\n          return { bottom: 0, right: 0 };\n        };\n        NullScrollbars.prototype.setScrollLeft = function () {};\n        NullScrollbars.prototype.setScrollTop = function () {};\n        NullScrollbars.prototype.clear = function () {};\n\n        function updateScrollbars(cm, measure) {\n          if (!measure) {\n            measure = measureForScrollbars(cm);\n          }\n          var startWidth = cm.display.barWidth,\n              startHeight = cm.display.barHeight;\n          updateScrollbarsInner(cm, measure);\n          for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n            if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n              updateHeightsInViewport(cm);\n            }\n            updateScrollbarsInner(cm, measureForScrollbars(cm));\n            startWidth = cm.display.barWidth;startHeight = cm.display.barHeight;\n          }\n        }\n\n        // Re-synchronize the fake scrollbars with the actual size of the\n        // content.\n        function updateScrollbarsInner(cm, measure) {\n          var d = cm.display;\n          var sizes = d.scrollbars.update(measure);\n\n          d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n          d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n          d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n          if (sizes.right && sizes.bottom) {\n            d.scrollbarFiller.style.display = \"block\";\n            d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n            d.scrollbarFiller.style.width = sizes.right + \"px\";\n          } else {\n            d.scrollbarFiller.style.display = \"\";\n          }\n          if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n            d.gutterFiller.style.display = \"block\";\n            d.gutterFiller.style.height = sizes.bottom + \"px\";\n            d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n          } else {\n            d.gutterFiller.style.display = \"\";\n          }\n        }\n\n        var scrollbarModel = { \"native\": NativeScrollbars, \"null\": NullScrollbars };\n\n        function initScrollbars(cm) {\n          if (cm.display.scrollbars) {\n            cm.display.scrollbars.clear();\n            if (cm.display.scrollbars.addClass) {\n              rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n            }\n          }\n\n          cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n            cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n            // Prevent clicks in the scrollbars from killing focus\n            on(node, \"mousedown\", function () {\n              if (cm.state.focused) {\n                setTimeout(function () {\n                  return cm.display.input.focus();\n                }, 0);\n              }\n            });\n            node.setAttribute(\"cm-not-content\", \"true\");\n          }, function (pos, axis) {\n            if (axis == \"horizontal\") {\n              setScrollLeft(cm, pos);\n            } else {\n              updateScrollTop(cm, pos);\n            }\n          }, cm);\n          if (cm.display.scrollbars.addClass) {\n            addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n          }\n        }\n\n        // Operations are used to wrap a series of changes to the editor\n        // state in such a way that each change won't have to update the\n        // cursor and display (which would be awkward, slow, and\n        // error-prone). Instead, display updates are batched and then all\n        // combined and executed at once.\n\n        var nextOpId = 0;\n        // Start a new operation.\n        function _startOperation(cm) {\n          cm.curOp = {\n            cm: cm,\n            viewChanged: false, // Flag that indicates that lines might need to be redrawn\n            startHeight: cm.doc.height, // Used to detect need to update scrollbar\n            forceUpdate: false, // Used to force a redraw\n            updateInput: null, // Whether to reset the input textarea\n            typing: false, // Whether this reset should be careful to leave existing text (for compositing)\n            changeObjs: null, // Accumulated changes, for firing change events\n            cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n            cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n            selectionChanged: false, // Whether the selection needs to be redrawn\n            updateMaxLine: false, // Set when the widest line needs to be determined anew\n            scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n            scrollToPos: null, // Used to scroll to a specific position\n            focus: false,\n            id: ++nextOpId // Unique ID\n          };\n          pushOperation(cm.curOp);\n        }\n\n        // Finish an operation, updating the display and signalling delayed events\n        function _endOperation(cm) {\n          var op = cm.curOp;\n          finishOperation(op, function (group) {\n            for (var i = 0; i < group.ops.length; i++) {\n              group.ops[i].cm.curOp = null;\n            }\n            endOperations(group);\n          });\n        }\n\n        // The DOM updates done when an operation finishes are batched so\n        // that the minimum number of relayouts are required.\n        function endOperations(group) {\n          var ops = group.ops;\n          for (var i = 0; i < ops.length; i++) // Read DOM\n          {\n            endOperation_R1(ops[i]);\n          }\n          for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n          {\n            endOperation_W1(ops[i$1]);\n          }\n          for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n          {\n            endOperation_R2(ops[i$2]);\n          }\n          for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n          {\n            endOperation_W2(ops[i$3]);\n          }\n          for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n          {\n            endOperation_finish(ops[i$4]);\n          }\n        }\n\n        function endOperation_R1(op) {\n          var cm = op.cm,\n              display = cm.display;\n          maybeClipScrollbars(cm);\n          if (op.updateMaxLine) {\n            findMaxLine(cm);\n          }\n\n          op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n          op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && { top: op.scrollTop, ensure: op.scrollToPos }, op.forceUpdate);\n        }\n\n        function endOperation_W1(op) {\n          op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n        }\n\n        function endOperation_R2(op) {\n          var cm = op.cm,\n              display = cm.display;\n          if (op.updatedDisplay) {\n            updateHeightsInViewport(cm);\n          }\n\n          op.barMeasure = measureForScrollbars(cm);\n\n          // If the max line changed since it was last measured, measure it,\n          // and ensure the document's width matches it.\n          // updateDisplay_W2 will use these properties to do the actual resizing\n          if (display.maxLineChanged && !cm.options.lineWrapping) {\n            op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n            cm.display.sizerWidth = op.adjustWidthTo;\n            op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n            op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n          }\n\n          if (op.updatedDisplay || op.selectionChanged) {\n            op.preparedSelection = display.input.prepareSelection(op.focus);\n          }\n        }\n\n        function endOperation_W2(op) {\n          var cm = op.cm;\n\n          if (op.adjustWidthTo != null) {\n            cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n            if (op.maxScrollLeft < cm.doc.scrollLeft) {\n              setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n            }\n            cm.display.maxLineChanged = false;\n          }\n\n          var takeFocus = op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus());\n          if (op.preparedSelection) {\n            cm.display.input.showSelection(op.preparedSelection, takeFocus);\n          }\n          if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n            updateScrollbars(cm, op.barMeasure);\n          }\n          if (op.updatedDisplay) {\n            setDocumentHeight(cm, op.barMeasure);\n          }\n\n          if (op.selectionChanged) {\n            restartBlink(cm);\n          }\n\n          if (cm.state.focused && op.updateInput) {\n            cm.display.input.reset(op.typing);\n          }\n          if (takeFocus) {\n            ensureFocus(op.cm);\n          }\n        }\n\n        function endOperation_finish(op) {\n          var cm = op.cm,\n              display = cm.display,\n              doc = cm.doc;\n\n          if (op.updatedDisplay) {\n            postUpdateDisplay(cm, op.update);\n          }\n\n          // Abort mouse wheel delta measurement, when scrolling explicitly\n          if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n            display.wheelStartX = display.wheelStartY = null;\n          }\n\n          // Propagate the scroll position to the actual DOM scroller\n          if (op.scrollTop != null) {\n            setScrollTop(cm, op.scrollTop, op.forceScroll);\n          }\n\n          if (op.scrollLeft != null) {\n            setScrollLeft(cm, op.scrollLeft, true, true);\n          }\n          // If we need to scroll a specific position into view, do so.\n          if (op.scrollToPos) {\n            var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n            maybeScrollWindow(cm, rect);\n          }\n\n          // Fire events for markers that are hidden/unidden by editing or\n          // undoing\n          var hidden = op.maybeHiddenMarkers,\n              unhidden = op.maybeUnhiddenMarkers;\n          if (hidden) {\n            for (var i = 0; i < hidden.length; ++i) {\n              if (!hidden[i].lines.length) {\n                signal(hidden[i], \"hide\");\n              }\n            }\n          }\n          if (unhidden) {\n            for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n              if (unhidden[i$1].lines.length) {\n                signal(unhidden[i$1], \"unhide\");\n              }\n            }\n          }\n\n          if (display.wrapper.offsetHeight) {\n            doc.scrollTop = cm.display.scroller.scrollTop;\n          }\n\n          // Fire change events, and delayed event handlers\n          if (op.changeObjs) {\n            signal(cm, \"changes\", cm, op.changeObjs);\n          }\n          if (op.update) {\n            op.update.finish();\n          }\n        }\n\n        // Run the given function in an operation\n        function runInOp(cm, f) {\n          if (cm.curOp) {\n            return f();\n          }\n          _startOperation(cm);\n          try {\n            return f();\n          } finally {\n            _endOperation(cm);\n          }\n        }\n        // Wraps a function in an operation. Returns the wrapped function.\n        function operation(cm, f) {\n          return function () {\n            if (cm.curOp) {\n              return f.apply(cm, arguments);\n            }\n            _startOperation(cm);\n            try {\n              return f.apply(cm, arguments);\n            } finally {\n              _endOperation(cm);\n            }\n          };\n        }\n        // Used to add methods to editor and doc instances, wrapping them in\n        // operations.\n        function methodOp(f) {\n          return function () {\n            if (this.curOp) {\n              return f.apply(this, arguments);\n            }\n            _startOperation(this);\n            try {\n              return f.apply(this, arguments);\n            } finally {\n              _endOperation(this);\n            }\n          };\n        }\n        function docMethodOp(f) {\n          return function () {\n            var cm = this.cm;\n            if (!cm || cm.curOp) {\n              return f.apply(this, arguments);\n            }\n            _startOperation(cm);\n            try {\n              return f.apply(this, arguments);\n            } finally {\n              _endOperation(cm);\n            }\n          };\n        }\n\n        // Updates the display.view data structure for a given change to the\n        // document. From and to are in pre-change coordinates. Lendiff is\n        // the amount of lines added or subtracted by the change. This is\n        // used for changes that span multiple lines, or change the way\n        // lines are divided into visual lines. regLineChange (below)\n        // registers single-line changes.\n        function regChange(cm, from, to, lendiff) {\n          if (from == null) {\n            from = cm.doc.first;\n          }\n          if (to == null) {\n            to = cm.doc.first + cm.doc.size;\n          }\n          if (!lendiff) {\n            lendiff = 0;\n          }\n\n          var display = cm.display;\n          if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n            display.updateLineNumbers = from;\n          }\n\n          cm.curOp.viewChanged = true;\n\n          if (from >= display.viewTo) {\n            // Change after\n            if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n              resetView(cm);\n            }\n          } else if (to <= display.viewFrom) {\n            // Change before\n            if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n              resetView(cm);\n            } else {\n              display.viewFrom += lendiff;\n              display.viewTo += lendiff;\n            }\n          } else if (from <= display.viewFrom && to >= display.viewTo) {\n            // Full overlap\n            resetView(cm);\n          } else if (from <= display.viewFrom) {\n            // Top overlap\n            var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cut) {\n              display.view = display.view.slice(cut.index);\n              display.viewFrom = cut.lineN;\n              display.viewTo += lendiff;\n            } else {\n              resetView(cm);\n            }\n          } else if (to >= display.viewTo) {\n            // Bottom overlap\n            var cut$1 = viewCuttingPoint(cm, from, from, -1);\n            if (cut$1) {\n              display.view = display.view.slice(0, cut$1.index);\n              display.viewTo = cut$1.lineN;\n            } else {\n              resetView(cm);\n            }\n          } else {\n            // Gap in the middle\n            var cutTop = viewCuttingPoint(cm, from, from, -1);\n            var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n            if (cutTop && cutBot) {\n              display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n              display.viewTo += lendiff;\n            } else {\n              resetView(cm);\n            }\n          }\n\n          var ext = display.externalMeasured;\n          if (ext) {\n            if (to < ext.lineN) {\n              ext.lineN += lendiff;\n            } else if (from < ext.lineN + ext.size) {\n              display.externalMeasured = null;\n            }\n          }\n        }\n\n        // Register a change to a single line. Type must be one of \"text\",\n        // \"gutter\", \"class\", \"widget\"\n        function regLineChange(cm, line, type) {\n          cm.curOp.viewChanged = true;\n          var display = cm.display,\n              ext = cm.display.externalMeasured;\n          if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n            display.externalMeasured = null;\n          }\n\n          if (line < display.viewFrom || line >= display.viewTo) {\n            return;\n          }\n          var lineView = display.view[findViewIndex(cm, line)];\n          if (lineView.node == null) {\n            return;\n          }\n          var arr = lineView.changes || (lineView.changes = []);\n          if (indexOf(arr, type) == -1) {\n            arr.push(type);\n          }\n        }\n\n        // Clear the view.\n        function resetView(cm) {\n          cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n          cm.display.view = [];\n          cm.display.viewOffset = 0;\n        }\n\n        function viewCuttingPoint(cm, oldN, newN, dir) {\n          var index = findViewIndex(cm, oldN),\n              diff,\n              view = cm.display.view;\n          if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n            return { index: index, lineN: newN };\n          }\n          var n = cm.display.viewFrom;\n          for (var i = 0; i < index; i++) {\n            n += view[i].size;\n          }\n          if (n != oldN) {\n            if (dir > 0) {\n              if (index == view.length - 1) {\n                return null;\n              }\n              diff = n + view[index].size - oldN;\n              index++;\n            } else {\n              diff = n - oldN;\n            }\n            oldN += diff;newN += diff;\n          }\n          while (visualLineNo(cm.doc, newN) != newN) {\n            if (index == (dir < 0 ? 0 : view.length - 1)) {\n              return null;\n            }\n            newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n            index += dir;\n          }\n          return { index: index, lineN: newN };\n        }\n\n        // Force the view to cover a given range, adding empty view element\n        // or clipping off existing ones as needed.\n        function adjustView(cm, from, to) {\n          var display = cm.display,\n              view = display.view;\n          if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n            display.view = buildViewArray(cm, from, to);\n            display.viewFrom = from;\n          } else {\n            if (display.viewFrom > from) {\n              display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n            } else if (display.viewFrom < from) {\n              display.view = display.view.slice(findViewIndex(cm, from));\n            }\n            display.viewFrom = from;\n            if (display.viewTo < to) {\n              display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n            } else if (display.viewTo > to) {\n              display.view = display.view.slice(0, findViewIndex(cm, to));\n            }\n          }\n          display.viewTo = to;\n        }\n\n        // Count the number of lines in the view whose DOM representation is\n        // out of date (or nonexistent).\n        function countDirtyView(cm) {\n          var view = cm.display.view,\n              dirty = 0;\n          for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n              ++dirty;\n            }\n          }\n          return dirty;\n        }\n\n        // HIGHLIGHT WORKER\n\n        function startWorker(cm, time) {\n          if (cm.doc.highlightFrontier < cm.display.viewTo) {\n            cm.state.highlight.set(time, bind(highlightWorker, cm));\n          }\n        }\n\n        function highlightWorker(cm) {\n          var doc = cm.doc;\n          if (doc.highlightFrontier >= cm.display.viewTo) {\n            return;\n          }\n          var end = +new Date() + cm.options.workTime;\n          var context = getContextBefore(cm, doc.highlightFrontier);\n          var changedLines = [];\n\n          doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n            if (context.line >= cm.display.viewFrom) {\n              // Visible\n              var oldStyles = line.styles;\n              var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n              var highlighted = highlightLine(cm, line, context, true);\n              if (resetState) {\n                context.state = resetState;\n              }\n              line.styles = highlighted.styles;\n              var oldCls = line.styleClasses,\n                  newCls = highlighted.classes;\n              if (newCls) {\n                line.styleClasses = newCls;\n              } else if (oldCls) {\n                line.styleClasses = null;\n              }\n              var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n              for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n                ischange = oldStyles[i] != line.styles[i];\n              }\n              if (ischange) {\n                changedLines.push(context.line);\n              }\n              line.stateAfter = context.save();\n              context.nextLine();\n            } else {\n              if (line.text.length <= cm.options.maxHighlightLength) {\n                processLine(cm, line.text, context);\n              }\n              line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n              context.nextLine();\n            }\n            if (+new Date() > end) {\n              startWorker(cm, cm.options.workDelay);\n              return true;\n            }\n          });\n          doc.highlightFrontier = context.line;\n          doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n          if (changedLines.length) {\n            runInOp(cm, function () {\n              for (var i = 0; i < changedLines.length; i++) {\n                regLineChange(cm, changedLines[i], \"text\");\n              }\n            });\n          }\n        }\n\n        // DISPLAY DRAWING\n\n        var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n          var display = cm.display;\n\n          this.viewport = viewport;\n          // Store some values that we'll need later (but don't want to force a relayout for)\n          this.visible = visibleLines(display, cm.doc, viewport);\n          this.editorIsHidden = !display.wrapper.offsetWidth;\n          this.wrapperHeight = display.wrapper.clientHeight;\n          this.wrapperWidth = display.wrapper.clientWidth;\n          this.oldDisplayWidth = displayWidth(cm);\n          this.force = force;\n          this.dims = getDimensions(cm);\n          this.events = [];\n        };\n\n        DisplayUpdate.prototype.signal = function (emitter, type) {\n          if (hasHandler(emitter, type)) {\n            this.events.push(arguments);\n          }\n        };\n        DisplayUpdate.prototype.finish = function () {\n          var this$1 = this;\n\n          for (var i = 0; i < this.events.length; i++) {\n            signal.apply(null, this$1.events[i]);\n          }\n        };\n\n        function maybeClipScrollbars(cm) {\n          var display = cm.display;\n          if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n            display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n            display.heightForcer.style.height = scrollGap(cm) + \"px\";\n            display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n            display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n            display.scrollbarsClipped = true;\n          }\n        }\n\n        function selectionSnapshot(cm) {\n          if (cm.hasFocus()) {\n            return null;\n          }\n          var active = activeElt();\n          if (!active || !contains(cm.display.lineDiv, active)) {\n            return null;\n          }\n          var result = { activeElt: active };\n          if (window.getSelection) {\n            var sel = window.getSelection();\n            if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n              result.anchorNode = sel.anchorNode;\n              result.anchorOffset = sel.anchorOffset;\n              result.focusNode = sel.focusNode;\n              result.focusOffset = sel.focusOffset;\n            }\n          }\n          return result;\n        }\n\n        function restoreSelection(snapshot) {\n          if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n            return;\n          }\n          snapshot.activeElt.focus();\n          if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n            var sel = window.getSelection(),\n                range$$1 = document.createRange();\n            range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n            range$$1.collapse(false);\n            sel.removeAllRanges();\n            sel.addRange(range$$1);\n            sel.extend(snapshot.focusNode, snapshot.focusOffset);\n          }\n        }\n\n        // Does the actual updating of the line display. Bails out\n        // (returning false) when there is nothing to be done and forced is\n        // false.\n        function updateDisplayIfNeeded(cm, update) {\n          var display = cm.display,\n              doc = cm.doc;\n\n          if (update.editorIsHidden) {\n            resetView(cm);\n            return false;\n          }\n\n          // Bail out if the visible area is already rendered and nothing changed.\n          if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n            return false;\n          }\n\n          if (maybeUpdateLineNumberWidth(cm)) {\n            resetView(cm);\n            update.dims = getDimensions(cm);\n          }\n\n          // Compute a suitable new viewport (from & to)\n          var end = doc.first + doc.size;\n          var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n          var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n          if (display.viewFrom < from && from - display.viewFrom < 20) {\n            from = Math.max(doc.first, display.viewFrom);\n          }\n          if (display.viewTo > to && display.viewTo - to < 20) {\n            to = Math.min(end, display.viewTo);\n          }\n          if (sawCollapsedSpans) {\n            from = visualLineNo(cm.doc, from);\n            to = visualLineEndNo(cm.doc, to);\n          }\n\n          var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n          adjustView(cm, from, to);\n\n          display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom));\n          // Position the mover div to align with the current scroll position\n          cm.display.mover.style.top = display.viewOffset + \"px\";\n\n          var toUpdate = countDirtyView(cm);\n          if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n            return false;\n          }\n\n          // For big changes, we hide the enclosing element during the\n          // update, since that speeds up the operations on most browsers.\n          var selSnapshot = selectionSnapshot(cm);\n          if (toUpdate > 4) {\n            display.lineDiv.style.display = \"none\";\n          }\n          patchDisplay(cm, display.updateLineNumbers, update.dims);\n          if (toUpdate > 4) {\n            display.lineDiv.style.display = \"\";\n          }\n          display.renderedView = display.view;\n          // There might have been a widget with a focused element that got\n          // hidden or updated, if so re-focus it.\n          restoreSelection(selSnapshot);\n\n          // Prevent selection and cursors from interfering with the scroll\n          // width and height.\n          removeChildren(display.cursorDiv);\n          removeChildren(display.selectionDiv);\n          display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n          if (different) {\n            display.lastWrapHeight = update.wrapperHeight;\n            display.lastWrapWidth = update.wrapperWidth;\n            startWorker(cm, 400);\n          }\n\n          display.updateLineNumbers = null;\n\n          return true;\n        }\n\n        function postUpdateDisplay(cm, update) {\n          var viewport = update.viewport;\n\n          for (var first = true;; first = false) {\n            if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n              // Clip forced viewport to actual scrollable area.\n              if (viewport && viewport.top != null) {\n                viewport = { top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top) };\n              }\n              // Updated line heights might result in the drawn area not\n              // actually covering the viewport. Keep looping until it does.\n              update.visible = visibleLines(cm.display, cm.doc, viewport);\n              if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n                break;\n              }\n            }\n            if (!updateDisplayIfNeeded(cm, update)) {\n              break;\n            }\n            updateHeightsInViewport(cm);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.force = false;\n          }\n\n          update.signal(cm, \"update\", cm);\n          if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n            update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n            cm.display.reportedViewFrom = cm.display.viewFrom;cm.display.reportedViewTo = cm.display.viewTo;\n          }\n        }\n\n        function updateDisplaySimple(cm, viewport) {\n          var update = new DisplayUpdate(cm, viewport);\n          if (updateDisplayIfNeeded(cm, update)) {\n            updateHeightsInViewport(cm);\n            postUpdateDisplay(cm, update);\n            var barMeasure = measureForScrollbars(cm);\n            updateSelection(cm);\n            updateScrollbars(cm, barMeasure);\n            setDocumentHeight(cm, barMeasure);\n            update.finish();\n          }\n        }\n\n        // Sync the actual display DOM structure with display.view, removing\n        // nodes for lines that are no longer in view, and creating the ones\n        // that are not there yet, and updating the ones that are out of\n        // date.\n        function patchDisplay(cm, updateNumbersFrom, dims) {\n          var display = cm.display,\n              lineNumbers = cm.options.lineNumbers;\n          var container = display.lineDiv,\n              cur = container.firstChild;\n\n          function rm(node) {\n            var next = node.nextSibling;\n            // Works around a throw-scroll bug in OS X Webkit\n            if (webkit && mac && cm.display.currentWheelTarget == node) {\n              node.style.display = \"none\";\n            } else {\n              node.parentNode.removeChild(node);\n            }\n            return next;\n          }\n\n          var view = display.view,\n              lineN = display.viewFrom;\n          // Loop over the elements in the view, syncing cur (the DOM nodes\n          // in display.lineDiv) with the view as we go.\n          for (var i = 0; i < view.length; i++) {\n            var lineView = view[i];\n            if (lineView.hidden) {} else if (!lineView.node || lineView.node.parentNode != container) {\n              // Not drawn yet\n              var node = buildLineElement(cm, lineView, lineN, dims);\n              container.insertBefore(node, cur);\n            } else {\n              // Already drawn\n              while (cur != lineView.node) {\n                cur = rm(cur);\n              }\n              var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n              if (lineView.changes) {\n                if (indexOf(lineView.changes, \"gutter\") > -1) {\n                  updateNumber = false;\n                }\n                updateLineForChanges(cm, lineView, lineN, dims);\n              }\n              if (updateNumber) {\n                removeChildren(lineView.lineNumber);\n                lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n              }\n              cur = lineView.node.nextSibling;\n            }\n            lineN += lineView.size;\n          }\n          while (cur) {\n            cur = rm(cur);\n          }\n        }\n\n        function updateGutterSpace(cm) {\n          var width = cm.display.gutters.offsetWidth;\n          cm.display.sizer.style.marginLeft = width + \"px\";\n        }\n\n        function setDocumentHeight(cm, measure) {\n          cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n          cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n          cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n        }\n\n        // Rebuild the gutter elements, ensure the margin to the left of the\n        // code matches their width.\n        function updateGutters(cm) {\n          var gutters = cm.display.gutters,\n              specs = cm.options.gutters;\n          removeChildren(gutters);\n          var i = 0;\n          for (; i < specs.length; ++i) {\n            var gutterClass = specs[i];\n            var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n            if (gutterClass == \"CodeMirror-linenumbers\") {\n              cm.display.lineGutter = gElt;\n              gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n            }\n          }\n          gutters.style.display = i ? \"\" : \"none\";\n          updateGutterSpace(cm);\n        }\n\n        // Make sure the gutters options contains the element\n        // \"CodeMirror-linenumbers\" when the lineNumbers option is true.\n        function setGuttersForLineNumbers(options) {\n          var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n          if (found == -1 && options.lineNumbers) {\n            options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n          } else if (found > -1 && !options.lineNumbers) {\n            options.gutters = options.gutters.slice(0);\n            options.gutters.splice(found, 1);\n          }\n        }\n\n        // Since the delta values reported on mouse wheel events are\n        // unstandardized between browsers and even browser versions, and\n        // generally horribly unpredictable, this code starts by measuring\n        // the scroll effect that the first few mouse wheel events have,\n        // and, from that, detects the way it can convert deltas to pixel\n        // offsets afterwards.\n        //\n        // The reason we want to know the amount a wheel event will scroll\n        // is that it gives us a chance to update the display before the\n        // actual scrolling happens, reducing flickering.\n\n        var wheelSamples = 0;\n        var wheelPixelsPerUnit = null;\n        // Fill in a browser-detected starting value on browsers where we\n        // know one. These don't have to be accurate -- the result of them\n        // being wrong would just be a slight flicker on the first wheel\n        // scroll (if it is large enough).\n        if (ie) {\n          wheelPixelsPerUnit = -.53;\n        } else if (gecko) {\n          wheelPixelsPerUnit = 15;\n        } else if (chrome) {\n          wheelPixelsPerUnit = -.7;\n        } else if (safari) {\n          wheelPixelsPerUnit = -1 / 3;\n        }\n\n        function wheelEventDelta(e) {\n          var dx = e.wheelDeltaX,\n              dy = e.wheelDeltaY;\n          if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n            dx = e.detail;\n          }\n          if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n            dy = e.detail;\n          } else if (dy == null) {\n            dy = e.wheelDelta;\n          }\n          return { x: dx, y: dy };\n        }\n        function wheelEventPixels(e) {\n          var delta = wheelEventDelta(e);\n          delta.x *= wheelPixelsPerUnit;\n          delta.y *= wheelPixelsPerUnit;\n          return delta;\n        }\n\n        function onScrollWheel(cm, e) {\n          var delta = wheelEventDelta(e),\n              dx = delta.x,\n              dy = delta.y;\n\n          var display = cm.display,\n              scroll = display.scroller;\n          // Quit if there's nothing to scroll here\n          var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n          var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n          if (!(dx && canScrollX || dy && canScrollY)) {\n            return;\n          }\n\n          // Webkit browsers on OS X abort momentum scrolls when the target\n          // of the scroll event is removed from the scrollable element.\n          // This hack (see related code in patchDisplay) makes sure the\n          // element is kept around.\n          if (dy && mac && webkit) {\n            outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n              for (var i = 0; i < view.length; i++) {\n                if (view[i].node == cur) {\n                  cm.display.currentWheelTarget = cur;\n                  break outer;\n                }\n              }\n            }\n          }\n\n          // On some browsers, horizontal scrolling will cause redraws to\n          // happen before the gutter has been realigned, causing it to\n          // wriggle around in a most unseemly way. When we have an\n          // estimated pixels/delta value, we just handle horizontal\n          // scrolling entirely here. It'll be slightly off from native, but\n          // better than glitching out.\n          if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n            if (dy && canScrollY) {\n              updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n            }\n            setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n            // Only prevent default scrolling if vertical scrolling is\n            // actually possible. Otherwise, it causes vertical scroll\n            // jitter on OSX trackpads when deltaX is small and deltaY\n            // is large (issue #3579)\n            if (!dy || dy && canScrollY) {\n              e_preventDefault(e);\n            }\n            display.wheelStartX = null; // Abort measurement, if in progress\n            return;\n          }\n\n          // 'Project' the visible viewport to cover the area that is being\n          // scrolled into view (if we know enough to estimate it).\n          if (dy && wheelPixelsPerUnit != null) {\n            var pixels = dy * wheelPixelsPerUnit;\n            var top = cm.doc.scrollTop,\n                bot = top + display.wrapper.clientHeight;\n            if (pixels < 0) {\n              top = Math.max(0, top + pixels - 50);\n            } else {\n              bot = Math.min(cm.doc.height, bot + pixels + 50);\n            }\n            updateDisplaySimple(cm, { top: top, bottom: bot });\n          }\n\n          if (wheelSamples < 20) {\n            if (display.wheelStartX == null) {\n              display.wheelStartX = scroll.scrollLeft;display.wheelStartY = scroll.scrollTop;\n              display.wheelDX = dx;display.wheelDY = dy;\n              setTimeout(function () {\n                if (display.wheelStartX == null) {\n                  return;\n                }\n                var movedX = scroll.scrollLeft - display.wheelStartX;\n                var movedY = scroll.scrollTop - display.wheelStartY;\n                var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n                display.wheelStartX = display.wheelStartY = null;\n                if (!sample) {\n                  return;\n                }\n                wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n                ++wheelSamples;\n              }, 200);\n            } else {\n              display.wheelDX += dx;display.wheelDY += dy;\n            }\n          }\n        }\n\n        // Selection objects are immutable. A new one is created every time\n        // the selection changes. A selection is one or more non-overlapping\n        // (and non-touching) ranges, sorted, and an integer that indicates\n        // which one is the primary selection (the one that's scrolled into\n        // view, that getCursor returns, etc).\n        var Selection = function Selection(ranges, primIndex) {\n          this.ranges = ranges;\n          this.primIndex = primIndex;\n        };\n\n        Selection.prototype.primary = function () {\n          return this.ranges[this.primIndex];\n        };\n\n        Selection.prototype.equals = function (other) {\n          var this$1 = this;\n\n          if (other == this) {\n            return true;\n          }\n          if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n            return false;\n          }\n          for (var i = 0; i < this.ranges.length; i++) {\n            var here = this$1.ranges[i],\n                there = other.ranges[i];\n            if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n              return false;\n            }\n          }\n          return true;\n        };\n\n        Selection.prototype.deepCopy = function () {\n          var this$1 = this;\n\n          var out = [];\n          for (var i = 0; i < this.ranges.length; i++) {\n            out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head));\n          }\n          return new Selection(out, this.primIndex);\n        };\n\n        Selection.prototype.somethingSelected = function () {\n          var this$1 = this;\n\n          for (var i = 0; i < this.ranges.length; i++) {\n            if (!this$1.ranges[i].empty()) {\n              return true;\n            }\n          }\n          return false;\n        };\n\n        Selection.prototype.contains = function (pos, end) {\n          var this$1 = this;\n\n          if (!end) {\n            end = pos;\n          }\n          for (var i = 0; i < this.ranges.length; i++) {\n            var range = this$1.ranges[i];\n            if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n              return i;\n            }\n          }\n          return -1;\n        };\n\n        var Range = function Range(anchor, head) {\n          this.anchor = anchor;this.head = head;\n        };\n\n        Range.prototype.from = function () {\n          return minPos(this.anchor, this.head);\n        };\n        Range.prototype.to = function () {\n          return maxPos(this.anchor, this.head);\n        };\n        Range.prototype.empty = function () {\n          return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n        };\n\n        // Take an unsorted, potentially overlapping set of ranges, and\n        // build a selection out of it. 'Consumes' ranges array (modifying\n        // it).\n        function normalizeSelection(ranges, primIndex) {\n          var prim = ranges[primIndex];\n          ranges.sort(function (a, b) {\n            return cmp(a.from(), b.from());\n          });\n          primIndex = indexOf(ranges, prim);\n          for (var i = 1; i < ranges.length; i++) {\n            var cur = ranges[i],\n                prev = ranges[i - 1];\n            if (cmp(prev.to(), cur.from()) >= 0) {\n              var from = minPos(prev.from(), cur.from()),\n                  to = maxPos(prev.to(), cur.to());\n              var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n              if (i <= primIndex) {\n                --primIndex;\n              }\n              ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n            }\n          }\n          return new Selection(ranges, primIndex);\n        }\n\n        function simpleSelection(anchor, head) {\n          return new Selection([new Range(anchor, head || anchor)], 0);\n        }\n\n        // Compute the position of the end of a change (its 'to' property\n        // refers to the pre-change end).\n        function changeEnd(change) {\n          if (!change.text) {\n            return change.to;\n          }\n          return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n        }\n\n        // Adjust a position to refer to the post-change position of the\n        // same text, or the end of the change if the change covers it.\n        function adjustForChange(pos, change) {\n          if (cmp(pos, change.from) < 0) {\n            return pos;\n          }\n          if (cmp(pos, change.to) <= 0) {\n            return changeEnd(change);\n          }\n\n          var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n              ch = pos.ch;\n          if (pos.line == change.to.line) {\n            ch += changeEnd(change).ch - change.to.ch;\n          }\n          return Pos(line, ch);\n        }\n\n        function computeSelAfterChange(doc, change) {\n          var out = [];\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            var range = doc.sel.ranges[i];\n            out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n          }\n          return normalizeSelection(out, doc.sel.primIndex);\n        }\n\n        function offsetPos(pos, old, nw) {\n          if (pos.line == old.line) {\n            return Pos(nw.line, pos.ch - old.ch + nw.ch);\n          } else {\n            return Pos(nw.line + (pos.line - old.line), pos.ch);\n          }\n        }\n\n        // Used by replaceSelections to allow moving the selection to the\n        // start or around the replaced test. Hint may be \"start\" or \"around\".\n        function computeReplacedSel(doc, changes, hint) {\n          var out = [];\n          var oldPrev = Pos(doc.first, 0),\n              newPrev = oldPrev;\n          for (var i = 0; i < changes.length; i++) {\n            var change = changes[i];\n            var from = offsetPos(change.from, oldPrev, newPrev);\n            var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n            oldPrev = change.to;\n            newPrev = to;\n            if (hint == \"around\") {\n              var range = doc.sel.ranges[i],\n                  inv = cmp(range.head, range.anchor) < 0;\n              out[i] = new Range(inv ? to : from, inv ? from : to);\n            } else {\n              out[i] = new Range(from, from);\n            }\n          }\n          return new Selection(out, doc.sel.primIndex);\n        }\n\n        // Used to get the editor into a consistent state again when options change.\n\n        function loadMode(cm) {\n          cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n          resetModeState(cm);\n        }\n\n        function resetModeState(cm) {\n          cm.doc.iter(function (line) {\n            if (line.stateAfter) {\n              line.stateAfter = null;\n            }\n            if (line.styles) {\n              line.styles = null;\n            }\n          });\n          cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n          startWorker(cm, 100);\n          cm.state.modeGen++;\n          if (cm.curOp) {\n            regChange(cm);\n          }\n        }\n\n        // DOCUMENT DATA STRUCTURE\n\n        // By default, updates that start and end at the beginning of a line\n        // are treated specially, in order to make the association of line\n        // widgets and marker elements with the text behave more intuitive.\n        function isWholeLineUpdate(doc, change) {\n          return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n        }\n\n        // Perform a change on the document data structure.\n        function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n          function spansFor(n) {\n            return markedSpans ? markedSpans[n] : null;\n          }\n          function update(line, text, spans) {\n            updateLine(line, text, spans, estimateHeight$$1);\n            signalLater(line, \"change\", line, change);\n          }\n          function linesFor(start, end) {\n            var result = [];\n            for (var i = start; i < end; ++i) {\n              result.push(new Line(text[i], spansFor(i), estimateHeight$$1));\n            }\n            return result;\n          }\n\n          var from = change.from,\n              to = change.to,\n              text = change.text;\n          var firstLine = getLine(doc, from.line),\n              lastLine = getLine(doc, to.line);\n          var lastText = lst(text),\n              lastSpans = spansFor(text.length - 1),\n              nlines = to.line - from.line;\n\n          // Adjust the line structure\n          if (change.full) {\n            doc.insert(0, linesFor(0, text.length));\n            doc.remove(text.length, doc.size - text.length);\n          } else if (isWholeLineUpdate(doc, change)) {\n            // This is a whole-line replace. Treated specially to make\n            // sure line objects move the way they are supposed to.\n            var added = linesFor(0, text.length - 1);\n            update(lastLine, lastLine.text, lastSpans);\n            if (nlines) {\n              doc.remove(from.line, nlines);\n            }\n            if (added.length) {\n              doc.insert(from.line, added);\n            }\n          } else if (firstLine == lastLine) {\n            if (text.length == 1) {\n              update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n            } else {\n              var added$1 = linesFor(1, text.length - 1);\n              added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n              update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n              doc.insert(from.line + 1, added$1);\n            }\n          } else if (text.length == 1) {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n            doc.remove(from.line + 1, nlines);\n          } else {\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n            update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n            var added$2 = linesFor(1, text.length - 1);\n            if (nlines > 1) {\n              doc.remove(from.line + 1, nlines - 1);\n            }\n            doc.insert(from.line + 1, added$2);\n          }\n\n          signalLater(doc, \"change\", doc, change);\n        }\n\n        // Call f for all linked documents.\n        function linkedDocs(doc, f, sharedHistOnly) {\n          function propagate(doc, skip, sharedHist) {\n            if (doc.linked) {\n              for (var i = 0; i < doc.linked.length; ++i) {\n                var rel = doc.linked[i];\n                if (rel.doc == skip) {\n                  continue;\n                }\n                var shared = sharedHist && rel.sharedHist;\n                if (sharedHistOnly && !shared) {\n                  continue;\n                }\n                f(rel.doc, shared);\n                propagate(rel.doc, doc, shared);\n              }\n            }\n          }\n          propagate(doc, null, true);\n        }\n\n        // Attach a document to an editor.\n        function attachDoc(cm, doc) {\n          if (doc.cm) {\n            throw new Error(\"This document is already in use.\");\n          }\n          cm.doc = doc;\n          doc.cm = cm;\n          estimateLineHeights(cm);\n          loadMode(cm);\n          setDirectionClass(cm);\n          if (!cm.options.lineWrapping) {\n            findMaxLine(cm);\n          }\n          cm.options.mode = doc.modeOption;\n          regChange(cm);\n        }\n\n        function setDirectionClass(cm) {\n          (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n        }\n\n        function directionChanged(cm) {\n          runInOp(cm, function () {\n            setDirectionClass(cm);\n            regChange(cm);\n          });\n        }\n\n        function History(startGen) {\n          // Arrays of change events and selections. Doing something adds an\n          // event to done and clears undo. Undoing moves events from done\n          // to undone, redoing moves them in the other direction.\n          this.done = [];this.undone = [];\n          this.undoDepth = Infinity;\n          // Used to track when changes can be merged into a single undo\n          // event\n          this.lastModTime = this.lastSelTime = 0;\n          this.lastOp = this.lastSelOp = null;\n          this.lastOrigin = this.lastSelOrigin = null;\n          // Used by the isClean() method\n          this.generation = this.maxGeneration = startGen || 1;\n        }\n\n        // Create a history change event from an updateDoc-style change\n        // object.\n        function historyChangeFromChange(doc, change) {\n          var histChange = { from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to) };\n          attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n          linkedDocs(doc, function (doc) {\n            return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n          }, true);\n          return histChange;\n        }\n\n        // Pop all selection events off the end of a history array. Stop at\n        // a change event.\n        function clearSelectionEvents(array) {\n          while (array.length) {\n            var last = lst(array);\n            if (last.ranges) {\n              array.pop();\n            } else {\n              break;\n            }\n          }\n        }\n\n        // Find the top change event in the history. Pop off selection\n        // events that are in the way.\n        function lastChangeEvent(hist, force) {\n          if (force) {\n            clearSelectionEvents(hist.done);\n            return lst(hist.done);\n          } else if (hist.done.length && !lst(hist.done).ranges) {\n            return lst(hist.done);\n          } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n            hist.done.pop();\n            return lst(hist.done);\n          }\n        }\n\n        // Register a change in the history. Merges changes that are within\n        // a single operation, or are close together with an origin that\n        // allows merging (starting with \"+\") into a single event.\n        function addChangeToHistory(doc, change, selAfter, opId) {\n          var hist = doc.history;\n          hist.undone.length = 0;\n          var time = +new Date(),\n              cur;\n          var last;\n\n          if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n            // Merge this change into the last event\n            last = lst(cur.changes);\n            if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n              // Optimized case for simple insertion -- don't want to add\n              // new changesets for every character typed\n              last.to = changeEnd(change);\n            } else {\n              // Add new sub-event\n              cur.changes.push(historyChangeFromChange(doc, change));\n            }\n          } else {\n            // Can not be merged, start a new event.\n            var before = lst(hist.done);\n            if (!before || !before.ranges) {\n              pushSelectionToHistory(doc.sel, hist.done);\n            }\n            cur = { changes: [historyChangeFromChange(doc, change)],\n              generation: hist.generation };\n            hist.done.push(cur);\n            while (hist.done.length > hist.undoDepth) {\n              hist.done.shift();\n              if (!hist.done[0].ranges) {\n                hist.done.shift();\n              }\n            }\n          }\n          hist.done.push(selAfter);\n          hist.generation = ++hist.maxGeneration;\n          hist.lastModTime = hist.lastSelTime = time;\n          hist.lastOp = hist.lastSelOp = opId;\n          hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n          if (!last) {\n            signal(doc, \"historyAdded\");\n          }\n        }\n\n        function selectionEventCanBeMerged(doc, origin, prev, sel) {\n          var ch = origin.charAt(0);\n          return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n        }\n\n        // Called whenever the selection changes, sets the new selection as\n        // the pending selection in the history, and pushes the old pending\n        // selection into the 'done' array when it was significantly\n        // different (in number of selected ranges, emptiness, or time).\n        function addSelectionToHistory(doc, sel, opId, options) {\n          var hist = doc.history,\n              origin = options && options.origin;\n\n          // A new event is started when the previous origin does not match\n          // the current, or the origins don't allow matching. Origins\n          // starting with * are always merged, those starting with + are\n          // merged when similar and close together in time.\n          if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n            hist.done[hist.done.length - 1] = sel;\n          } else {\n            pushSelectionToHistory(sel, hist.done);\n          }\n\n          hist.lastSelTime = +new Date();\n          hist.lastSelOrigin = origin;\n          hist.lastSelOp = opId;\n          if (options && options.clearRedo !== false) {\n            clearSelectionEvents(hist.undone);\n          }\n        }\n\n        function pushSelectionToHistory(sel, dest) {\n          var top = lst(dest);\n          if (!(top && top.ranges && top.equals(sel))) {\n            dest.push(sel);\n          }\n        }\n\n        // Used to store marked span information in the history.\n        function attachLocalSpans(doc, change, from, to) {\n          var existing = change[\"spans_\" + doc.id],\n              n = 0;\n          doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n            if (line.markedSpans) {\n              (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n            }\n            ++n;\n          });\n        }\n\n        // When un/re-doing restores text containing marked spans, those\n        // that have been explicitly cleared should not be restored.\n        function removeClearedSpans(spans) {\n          if (!spans) {\n            return null;\n          }\n          var out;\n          for (var i = 0; i < spans.length; ++i) {\n            if (spans[i].marker.explicitlyCleared) {\n              if (!out) {\n                out = spans.slice(0, i);\n              }\n            } else if (out) {\n              out.push(spans[i]);\n            }\n          }\n          return !out ? spans : out.length ? out : null;\n        }\n\n        // Retrieve and filter the old marked spans stored in a change event.\n        function getOldSpans(doc, change) {\n          var found = change[\"spans_\" + doc.id];\n          if (!found) {\n            return null;\n          }\n          var nw = [];\n          for (var i = 0; i < change.text.length; ++i) {\n            nw.push(removeClearedSpans(found[i]));\n          }\n          return nw;\n        }\n\n        // Used for un/re-doing changes from the history. Combines the\n        // result of computing the existing spans with the set of spans that\n        // existed in the history (so that deleting around a span and then\n        // undoing brings back the span).\n        function mergeOldSpans(doc, change) {\n          var old = getOldSpans(doc, change);\n          var stretched = stretchSpansOverChange(doc, change);\n          if (!old) {\n            return stretched;\n          }\n          if (!stretched) {\n            return old;\n          }\n\n          for (var i = 0; i < old.length; ++i) {\n            var oldCur = old[i],\n                stretchCur = stretched[i];\n            if (oldCur && stretchCur) {\n              spans: for (var j = 0; j < stretchCur.length; ++j) {\n                var span = stretchCur[j];\n                for (var k = 0; k < oldCur.length; ++k) {\n                  if (oldCur[k].marker == span.marker) {\n                    continue spans;\n                  }\n                }\n                oldCur.push(span);\n              }\n            } else if (stretchCur) {\n              old[i] = stretchCur;\n            }\n          }\n          return old;\n        }\n\n        // Used both to provide a JSON-safe object in .getHistory, and, when\n        // detaching a document, to split the history in two\n        function copyHistoryArray(events, newGroup, instantiateSel) {\n          var copy = [];\n          for (var i = 0; i < events.length; ++i) {\n            var event = events[i];\n            if (event.ranges) {\n              copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n              continue;\n            }\n            var changes = event.changes,\n                newChanges = [];\n            copy.push({ changes: newChanges });\n            for (var j = 0; j < changes.length; ++j) {\n              var change = changes[j],\n                  m = void 0;\n              newChanges.push({ from: change.from, to: change.to, text: change.text });\n              if (newGroup) {\n                for (var prop in change) {\n                  if (m = prop.match(/^spans_(\\d+)$/)) {\n                    if (indexOf(newGroup, Number(m[1])) > -1) {\n                      lst(newChanges)[prop] = change[prop];\n                      delete change[prop];\n                    }\n                  }\n                }\n              }\n            }\n          }\n          return copy;\n        }\n\n        // The 'scroll' parameter given to many of these indicated whether\n        // the new cursor position should be scrolled into view after\n        // modifying the selection.\n\n        // If shift is held or the extend flag is set, extends a range to\n        // include a given position (and optionally a second position).\n        // Otherwise, simply returns the range between the given positions.\n        // Used for cursor motion and such.\n        function extendRange(range, head, other, extend) {\n          if (extend) {\n            var anchor = range.anchor;\n            if (other) {\n              var posBefore = cmp(head, anchor) < 0;\n              if (posBefore != cmp(other, anchor) < 0) {\n                anchor = head;\n                head = other;\n              } else if (posBefore != cmp(head, other) < 0) {\n                head = other;\n              }\n            }\n            return new Range(anchor, head);\n          } else {\n            return new Range(other || head, head);\n          }\n        }\n\n        // Extend the primary selection range, discard the rest.\n        function extendSelection(doc, head, other, options, extend) {\n          if (extend == null) {\n            extend = doc.cm && (doc.cm.display.shift || doc.extend);\n          }\n          setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n        }\n\n        // Extend all selections (pos is an array of selections with length\n        // equal the number of selections)\n        function extendSelections(doc, heads, options) {\n          var out = [];\n          var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n          }\n          var newSel = normalizeSelection(out, doc.sel.primIndex);\n          setSelection(doc, newSel, options);\n        }\n\n        // Updates a single range in the selection.\n        function replaceOneSelection(doc, i, range, options) {\n          var ranges = doc.sel.ranges.slice(0);\n          ranges[i] = range;\n          setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n        }\n\n        // Reset the selection to a single range.\n        function setSimpleSelection(doc, anchor, head, options) {\n          setSelection(doc, simpleSelection(anchor, head), options);\n        }\n\n        // Give beforeSelectionChange handlers a change to influence a\n        // selection update.\n        function filterSelectionChange(doc, sel, options) {\n          var obj = {\n            ranges: sel.ranges,\n            update: function update(ranges) {\n              var this$1 = this;\n\n              this.ranges = [];\n              for (var i = 0; i < ranges.length; i++) {\n                this$1.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n              }\n            },\n            origin: options && options.origin\n          };\n          signal(doc, \"beforeSelectionChange\", doc, obj);\n          if (doc.cm) {\n            signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n          }\n          if (obj.ranges != sel.ranges) {\n            return normalizeSelection(obj.ranges, obj.ranges.length - 1);\n          } else {\n            return sel;\n          }\n        }\n\n        function setSelectionReplaceHistory(doc, sel, options) {\n          var done = doc.history.done,\n              last = lst(done);\n          if (last && last.ranges) {\n            done[done.length - 1] = sel;\n            setSelectionNoUndo(doc, sel, options);\n          } else {\n            setSelection(doc, sel, options);\n          }\n        }\n\n        // Set a new selection.\n        function setSelection(doc, sel, options) {\n          setSelectionNoUndo(doc, sel, options);\n          addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n        }\n\n        function setSelectionNoUndo(doc, sel, options) {\n          if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n            sel = filterSelectionChange(doc, sel, options);\n          }\n\n          var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n          setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n          if (!(options && options.scroll === false) && doc.cm) {\n            ensureCursorVisible(doc.cm);\n          }\n        }\n\n        function setSelectionInner(doc, sel) {\n          if (sel.equals(doc.sel)) {\n            return;\n          }\n\n          doc.sel = sel;\n\n          if (doc.cm) {\n            doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n            signalCursorActivity(doc.cm);\n          }\n          signalLater(doc, \"cursorActivity\", doc);\n        }\n\n        // Verify that the selection does not partially select any atomic\n        // marked ranges.\n        function reCheckSelection(doc) {\n          setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n        }\n\n        // Return a selection that does not partially select any atomic\n        // ranges.\n        function skipAtomicInSelection(doc, sel, bias, mayClear) {\n          var out;\n          for (var i = 0; i < sel.ranges.length; i++) {\n            var range = sel.ranges[i];\n            var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n            var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n            var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n            if (out || newAnchor != range.anchor || newHead != range.head) {\n              if (!out) {\n                out = sel.ranges.slice(0, i);\n              }\n              out[i] = new Range(newAnchor, newHead);\n            }\n          }\n          return out ? normalizeSelection(out, sel.primIndex) : sel;\n        }\n\n        function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n          var line = getLine(doc, pos.line);\n          if (line.markedSpans) {\n            for (var i = 0; i < line.markedSpans.length; ++i) {\n              var sp = line.markedSpans[i],\n                  m = sp.marker;\n              if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n                if (mayClear) {\n                  signal(m, \"beforeCursorEnter\");\n                  if (m.explicitlyCleared) {\n                    if (!line.markedSpans) {\n                      break;\n                    } else {\n                      --i;continue;\n                    }\n                  }\n                }\n                if (!m.atomic) {\n                  continue;\n                }\n\n                if (oldPos) {\n                  var near = m.find(dir < 0 ? 1 : -1),\n                      diff = void 0;\n                  if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft) {\n                    near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n                  }\n                  if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n                    return skipAtomicInner(doc, near, pos, dir, mayClear);\n                  }\n                }\n\n                var far = m.find(dir < 0 ? -1 : 1);\n                if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight) {\n                  far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n                }\n                return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n              }\n            }\n          }\n          return pos;\n        }\n\n        // Ensure a given position is not inside an atomic range.\n        function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n          var dir = bias || 1;\n          var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n          if (!found) {\n            doc.cantEdit = true;\n            return Pos(doc.first, 0);\n          }\n          return found;\n        }\n\n        function movePos(doc, pos, dir, line) {\n          if (dir < 0 && pos.ch == 0) {\n            if (pos.line > doc.first) {\n              return _clipPos(doc, Pos(pos.line - 1));\n            } else {\n              return null;\n            }\n          } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n            if (pos.line < doc.first + doc.size - 1) {\n              return Pos(pos.line + 1, 0);\n            } else {\n              return null;\n            }\n          } else {\n            return new Pos(pos.line, pos.ch + dir);\n          }\n        }\n\n        function selectAll(cm) {\n          cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n        }\n\n        // UPDATING\n\n        // Allow \"beforeChange\" event handlers to influence a change\n        function filterChange(doc, change, update) {\n          var obj = {\n            canceled: false,\n            from: change.from,\n            to: change.to,\n            text: change.text,\n            origin: change.origin,\n            cancel: function cancel() {\n              return obj.canceled = true;\n            }\n          };\n          if (update) {\n            obj.update = function (from, to, text, origin) {\n              if (from) {\n                obj.from = _clipPos(doc, from);\n              }\n              if (to) {\n                obj.to = _clipPos(doc, to);\n              }\n              if (text) {\n                obj.text = text;\n              }\n              if (origin !== undefined) {\n                obj.origin = origin;\n              }\n            };\n          }\n          signal(doc, \"beforeChange\", doc, obj);\n          if (doc.cm) {\n            signal(doc.cm, \"beforeChange\", doc.cm, obj);\n          }\n\n          if (obj.canceled) {\n            return null;\n          }\n          return { from: obj.from, to: obj.to, text: obj.text, origin: obj.origin };\n        }\n\n        // Apply a change to a document, and add it to the document's\n        // history, and propagating it to all linked documents.\n        function makeChange(doc, change, ignoreReadOnly) {\n          if (doc.cm) {\n            if (!doc.cm.curOp) {\n              return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n            }\n            if (doc.cm.state.suppressEdits) {\n              return;\n            }\n          }\n\n          if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n            change = filterChange(doc, change, true);\n            if (!change) {\n              return;\n            }\n          }\n\n          // Possibly split or suppress the update based on the presence\n          // of read-only spans in its range.\n          var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n          if (split) {\n            for (var i = split.length - 1; i >= 0; --i) {\n              makeChangeInner(doc, { from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin });\n            }\n          } else {\n            makeChangeInner(doc, change);\n          }\n        }\n\n        function makeChangeInner(doc, change) {\n          if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n            return;\n          }\n          var selAfter = computeSelAfterChange(doc, change);\n          addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n          makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n          var rebased = [];\n\n          linkedDocs(doc, function (doc, sharedHist) {\n            if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n              rebaseHist(doc.history, change);\n              rebased.push(doc.history);\n            }\n            makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n          });\n        }\n\n        // Revert a change stored in a document's history.\n        function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n          if (doc.cm && doc.cm.state.suppressEdits && !allowSelectionOnly) {\n            return;\n          }\n\n          var hist = doc.history,\n              event,\n              selAfter = doc.sel;\n          var source = type == \"undo\" ? hist.done : hist.undone,\n              dest = type == \"undo\" ? hist.undone : hist.done;\n\n          // Verify that there is a useable event (so that ctrl-z won't\n          // needlessly clear selection events)\n          var i = 0;\n          for (; i < source.length; i++) {\n            event = source[i];\n            if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n              break;\n            }\n          }\n          if (i == source.length) {\n            return;\n          }\n          hist.lastOrigin = hist.lastSelOrigin = null;\n\n          for (;;) {\n            event = source.pop();\n            if (event.ranges) {\n              pushSelectionToHistory(event, dest);\n              if (allowSelectionOnly && !event.equals(doc.sel)) {\n                setSelection(doc, event, { clearRedo: false });\n                return;\n              }\n              selAfter = event;\n            } else {\n              break;\n            }\n          }\n\n          // Build up a reverse change object to add to the opposite history\n          // stack (redo when undoing, and vice versa).\n          var antiChanges = [];\n          pushSelectionToHistory(selAfter, dest);\n          dest.push({ changes: antiChanges, generation: hist.generation });\n          hist.generation = event.generation || ++hist.maxGeneration;\n\n          var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n          var loop = function loop(i) {\n            var change = event.changes[i];\n            change.origin = type;\n            if (filter && !filterChange(doc, change, false)) {\n              source.length = 0;\n              return {};\n            }\n\n            antiChanges.push(historyChangeFromChange(doc, change));\n\n            var after = i ? computeSelAfterChange(doc, change) : lst(source);\n            makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n            if (!i && doc.cm) {\n              doc.cm.scrollIntoView({ from: change.from, to: changeEnd(change) });\n            }\n            var rebased = [];\n\n            // Propagate to the linked documents\n            linkedDocs(doc, function (doc, sharedHist) {\n              if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n                rebaseHist(doc.history, change);\n                rebased.push(doc.history);\n              }\n              makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n            });\n          };\n\n          for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n            var returned = loop(i$1);\n\n            if (returned) return returned.v;\n          }\n        }\n\n        // Sub-views need their line numbers shifted when text is added\n        // above or below them in the parent document.\n        function shiftDoc(doc, distance) {\n          if (distance == 0) {\n            return;\n          }\n          doc.first += distance;\n          doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n            return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n          }), doc.sel.primIndex);\n          if (doc.cm) {\n            regChange(doc.cm, doc.first, doc.first - distance, distance);\n            for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n              regLineChange(doc.cm, l, \"gutter\");\n            }\n          }\n        }\n\n        // More lower-level change function, handling only a single document\n        // (not linked ones).\n        function makeChangeSingleDoc(doc, change, selAfter, spans) {\n          if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n          }\n\n          if (change.to.line < doc.first) {\n            shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n            return;\n          }\n          if (change.from.line > doc.lastLine()) {\n            return;\n          }\n\n          // Clip the change to the size of this doc\n          if (change.from.line < doc.first) {\n            var shift = change.text.length - 1 - (doc.first - change.from.line);\n            shiftDoc(doc, shift);\n            change = { from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin };\n          }\n          var last = doc.lastLine();\n          if (change.to.line > last) {\n            change = { from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin };\n          }\n\n          change.removed = getBetween(doc, change.from, change.to);\n\n          if (!selAfter) {\n            selAfter = computeSelAfterChange(doc, change);\n          }\n          if (doc.cm) {\n            makeChangeSingleDocInEditor(doc.cm, change, spans);\n          } else {\n            updateDoc(doc, change, spans);\n          }\n          setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n        }\n\n        // Handle the interaction of a change to a document with the editor\n        // that this document is part of.\n        function makeChangeSingleDocInEditor(cm, change, spans) {\n          var doc = cm.doc,\n              display = cm.display,\n              from = change.from,\n              to = change.to;\n\n          var recomputeMaxLength = false,\n              checkWidthStart = from.line;\n          if (!cm.options.lineWrapping) {\n            checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n            doc.iter(checkWidthStart, to.line + 1, function (line) {\n              if (line == display.maxLine) {\n                recomputeMaxLength = true;\n                return true;\n              }\n            });\n          }\n\n          if (doc.sel.contains(change.from, change.to) > -1) {\n            signalCursorActivity(cm);\n          }\n\n          updateDoc(doc, change, spans, estimateHeight(cm));\n\n          if (!cm.options.lineWrapping) {\n            doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n              var len = lineLength(line);\n              if (len > display.maxLineLength) {\n                display.maxLine = line;\n                display.maxLineLength = len;\n                display.maxLineChanged = true;\n                recomputeMaxLength = false;\n              }\n            });\n            if (recomputeMaxLength) {\n              cm.curOp.updateMaxLine = true;\n            }\n          }\n\n          retreatFrontier(doc, from.line);\n          startWorker(cm, 400);\n\n          var lendiff = change.text.length - (to.line - from.line) - 1;\n          // Remember that these lines changed, for updating the display\n          if (change.full) {\n            regChange(cm);\n          } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n            regLineChange(cm, from.line, \"text\");\n          } else {\n            regChange(cm, from.line, to.line + 1, lendiff);\n          }\n\n          var changesHandler = hasHandler(cm, \"changes\"),\n              changeHandler = hasHandler(cm, \"change\");\n          if (changeHandler || changesHandler) {\n            var obj = {\n              from: from, to: to,\n              text: change.text,\n              removed: change.removed,\n              origin: change.origin\n            };\n            if (changeHandler) {\n              signalLater(cm, \"change\", cm, obj);\n            }\n            if (changesHandler) {\n              (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n            }\n          }\n          cm.display.selForContextMenu = null;\n        }\n\n        function _replaceRange(doc, code, from, to, origin) {\n          if (!to) {\n            to = from;\n          }\n          if (cmp(to, from) < 0) {\n            var tmp = to;to = from;from = tmp;\n          }\n          if (typeof code == \"string\") {\n            code = doc.splitLines(code);\n          }\n          makeChange(doc, { from: from, to: to, text: code, origin: origin });\n        }\n\n        // Rebasing/resetting history to deal with externally-sourced changes\n\n        function rebaseHistSelSingle(pos, from, to, diff) {\n          if (to < pos.line) {\n            pos.line += diff;\n          } else if (from < pos.line) {\n            pos.line = from;\n            pos.ch = 0;\n          }\n        }\n\n        // Tries to rebase an array of history events given a change in the\n        // document. If the change touches the same lines as the event, the\n        // event, and everything 'behind' it, is discarded. If the change is\n        // before the event, the event's positions are updated. Uses a\n        // copy-on-write scheme for the positions, to avoid having to\n        // reallocate them all on every rebase, but also avoid problems with\n        // shared position objects being unsafely updated.\n        function rebaseHistArray(array, from, to, diff) {\n          for (var i = 0; i < array.length; ++i) {\n            var sub = array[i],\n                ok = true;\n            if (sub.ranges) {\n              if (!sub.copied) {\n                sub = array[i] = sub.deepCopy();sub.copied = true;\n              }\n              for (var j = 0; j < sub.ranges.length; j++) {\n                rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n                rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n              }\n              continue;\n            }\n            for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n              var cur = sub.changes[j$1];\n              if (to < cur.from.line) {\n                cur.from = Pos(cur.from.line + diff, cur.from.ch);\n                cur.to = Pos(cur.to.line + diff, cur.to.ch);\n              } else if (from <= cur.to.line) {\n                ok = false;\n                break;\n              }\n            }\n            if (!ok) {\n              array.splice(0, i + 1);\n              i = 0;\n            }\n          }\n        }\n\n        function rebaseHist(hist, change) {\n          var from = change.from.line,\n              to = change.to.line,\n              diff = change.text.length - (to - from) - 1;\n          rebaseHistArray(hist.done, from, to, diff);\n          rebaseHistArray(hist.undone, from, to, diff);\n        }\n\n        // Utility for applying a change to a line by handle or number,\n        // returning the number and optionally registering the line as\n        // changed.\n        function changeLine(doc, handle, changeType, op) {\n          var no = handle,\n              line = handle;\n          if (typeof handle == \"number\") {\n            line = getLine(doc, clipLine(doc, handle));\n          } else {\n            no = lineNo(handle);\n          }\n          if (no == null) {\n            return null;\n          }\n          if (op(line, no) && doc.cm) {\n            regLineChange(doc.cm, no, changeType);\n          }\n          return line;\n        }\n\n        // The document is represented as a BTree consisting of leaves, with\n        // chunk of lines in them, and branches, with up to ten leaves or\n        // other branch nodes below them. The top node is always a branch\n        // node, and is the document object itself (meaning it has\n        // additional methods and properties).\n        //\n        // All nodes have parent links. The tree is used both to go from\n        // line numbers to line objects, and to go from objects to numbers.\n        // It also indexes by height, and is used to convert between height\n        // and line object, and to find the total height of the document.\n        //\n        // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n        function LeafChunk(lines) {\n          var this$1 = this;\n\n          this.lines = lines;\n          this.parent = null;\n          var height = 0;\n          for (var i = 0; i < lines.length; ++i) {\n            lines[i].parent = this$1;\n            height += lines[i].height;\n          }\n          this.height = height;\n        }\n\n        LeafChunk.prototype = {\n          chunkSize: function chunkSize() {\n            return this.lines.length;\n          },\n\n          // Remove the n lines at offset 'at'.\n          removeInner: function removeInner(at, n) {\n            var this$1 = this;\n\n            for (var i = at, e = at + n; i < e; ++i) {\n              var line = this$1.lines[i];\n              this$1.height -= line.height;\n              cleanUpLine(line);\n              signalLater(line, \"delete\");\n            }\n            this.lines.splice(at, n);\n          },\n\n          // Helper used to collapse a small branch into a single leaf.\n          collapse: function collapse(lines) {\n            lines.push.apply(lines, this.lines);\n          },\n\n          // Insert the given array of lines at offset 'at', count them as\n          // having the given height.\n          insertInner: function insertInner(at, lines, height) {\n            var this$1 = this;\n\n            this.height += height;\n            this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n            for (var i = 0; i < lines.length; ++i) {\n              lines[i].parent = this$1;\n            }\n          },\n\n          // Used to iterate over a part of the tree.\n          iterN: function iterN(at, n, op) {\n            var this$1 = this;\n\n            for (var e = at + n; at < e; ++at) {\n              if (op(this$1.lines[at])) {\n                return true;\n              }\n            }\n          }\n        };\n\n        function BranchChunk(children) {\n          var this$1 = this;\n\n          this.children = children;\n          var size = 0,\n              height = 0;\n          for (var i = 0; i < children.length; ++i) {\n            var ch = children[i];\n            size += ch.chunkSize();height += ch.height;\n            ch.parent = this$1;\n          }\n          this.size = size;\n          this.height = height;\n          this.parent = null;\n        }\n\n        BranchChunk.prototype = {\n          chunkSize: function chunkSize() {\n            return this.size;\n          },\n\n          removeInner: function removeInner(at, n) {\n            var this$1 = this;\n\n            this.size -= n;\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at < sz) {\n                var rm = Math.min(n, sz - at),\n                    oldHeight = child.height;\n                child.removeInner(at, rm);\n                this$1.height -= oldHeight - child.height;\n                if (sz == rm) {\n                  this$1.children.splice(i--, 1);child.parent = null;\n                }\n                if ((n -= rm) == 0) {\n                  break;\n                }\n                at = 0;\n              } else {\n                at -= sz;\n              }\n            }\n            // If the result is smaller than 25 lines, ensure that it is a\n            // single leaf node.\n            if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n              var lines = [];\n              this.collapse(lines);\n              this.children = [new LeafChunk(lines)];\n              this.children[0].parent = this;\n            }\n          },\n\n          collapse: function collapse(lines) {\n            var this$1 = this;\n\n            for (var i = 0; i < this.children.length; ++i) {\n              this$1.children[i].collapse(lines);\n            }\n          },\n\n          insertInner: function insertInner(at, lines, height) {\n            var this$1 = this;\n\n            this.size += lines.length;\n            this.height += height;\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at <= sz) {\n                child.insertInner(at, lines, height);\n                if (child.lines && child.lines.length > 50) {\n                  // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n                  // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n                  var remaining = child.lines.length % 25 + 25;\n                  for (var pos = remaining; pos < child.lines.length;) {\n                    var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n                    child.height -= leaf.height;\n                    this$1.children.splice(++i, 0, leaf);\n                    leaf.parent = this$1;\n                  }\n                  child.lines = child.lines.slice(0, remaining);\n                  this$1.maybeSpill();\n                }\n                break;\n              }\n              at -= sz;\n            }\n          },\n\n          // When a node has grown, check whether it should be split.\n          maybeSpill: function maybeSpill() {\n            if (this.children.length <= 10) {\n              return;\n            }\n            var me = this;\n            do {\n              var spilled = me.children.splice(me.children.length - 5, 5);\n              var sibling = new BranchChunk(spilled);\n              if (!me.parent) {\n                // Become the parent node\n                var copy = new BranchChunk(me.children);\n                copy.parent = me;\n                me.children = [copy, sibling];\n                me = copy;\n              } else {\n                me.size -= sibling.size;\n                me.height -= sibling.height;\n                var myIndex = indexOf(me.parent.children, me);\n                me.parent.children.splice(myIndex + 1, 0, sibling);\n              }\n              sibling.parent = me.parent;\n            } while (me.children.length > 10);\n            me.parent.maybeSpill();\n          },\n\n          iterN: function iterN(at, n, op) {\n            var this$1 = this;\n\n            for (var i = 0; i < this.children.length; ++i) {\n              var child = this$1.children[i],\n                  sz = child.chunkSize();\n              if (at < sz) {\n                var used = Math.min(n, sz - at);\n                if (child.iterN(at, used, op)) {\n                  return true;\n                }\n                if ((n -= used) == 0) {\n                  break;\n                }\n                at = 0;\n              } else {\n                at -= sz;\n              }\n            }\n          }\n        };\n\n        // Line widgets are block elements displayed above or below a line.\n\n        var LineWidget = function LineWidget(doc, node, options) {\n          var this$1 = this;\n\n          if (options) {\n            for (var opt in options) {\n              if (options.hasOwnProperty(opt)) {\n                this$1[opt] = options[opt];\n              }\n            }\n          }\n          this.doc = doc;\n          this.node = node;\n        };\n\n        LineWidget.prototype.clear = function () {\n          var this$1 = this;\n\n          var cm = this.doc.cm,\n              ws = this.line.widgets,\n              line = this.line,\n              no = lineNo(line);\n          if (no == null || !ws) {\n            return;\n          }\n          for (var i = 0; i < ws.length; ++i) {\n            if (ws[i] == this$1) {\n              ws.splice(i--, 1);\n            }\n          }\n          if (!ws.length) {\n            line.widgets = null;\n          }\n          var height = widgetHeight(this);\n          updateLineHeight(line, Math.max(0, line.height - height));\n          if (cm) {\n            runInOp(cm, function () {\n              adjustScrollWhenAboveVisible(cm, line, -height);\n              regLineChange(cm, no, \"widget\");\n            });\n            signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n          }\n        };\n\n        LineWidget.prototype.changed = function () {\n          var this$1 = this;\n\n          var oldH = this.height,\n              cm = this.doc.cm,\n              line = this.line;\n          this.height = null;\n          var diff = widgetHeight(this) - oldH;\n          if (!diff) {\n            return;\n          }\n          updateLineHeight(line, line.height + diff);\n          if (cm) {\n            runInOp(cm, function () {\n              cm.curOp.forceUpdate = true;\n              adjustScrollWhenAboveVisible(cm, line, diff);\n              signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n            });\n          }\n        };\n        eventMixin(LineWidget);\n\n        function adjustScrollWhenAboveVisible(cm, line, diff) {\n          if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n            addToScrollTop(cm, diff);\n          }\n        }\n\n        function addLineWidget(doc, handle, node, options) {\n          var widget = new LineWidget(doc, node, options);\n          var cm = doc.cm;\n          if (cm && widget.noHScroll) {\n            cm.display.alignWidgets = true;\n          }\n          changeLine(doc, handle, \"widget\", function (line) {\n            var widgets = line.widgets || (line.widgets = []);\n            if (widget.insertAt == null) {\n              widgets.push(widget);\n            } else {\n              widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n            }\n            widget.line = line;\n            if (cm && !lineIsHidden(doc, line)) {\n              var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n              updateLineHeight(line, line.height + widgetHeight(widget));\n              if (aboveVisible) {\n                addToScrollTop(cm, widget.height);\n              }\n              cm.curOp.forceUpdate = true;\n            }\n            return true;\n          });\n          signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n          return widget;\n        }\n\n        // TEXTMARKERS\n\n        // Created with markText and setBookmark methods. A TextMarker is a\n        // handle that can be used to clear or find a marked position in the\n        // document. Line objects hold arrays (markedSpans) containing\n        // {from, to, marker} object pointing to such marker objects, and\n        // indicating that such a marker is present on that line. Multiple\n        // lines may point to the same marker when it spans across lines.\n        // The spans will have null for their from/to properties when the\n        // marker continues beyond the start/end of the line. Markers have\n        // links back to the lines they currently touch.\n\n        // Collapsed markers have unique ids, in order to be able to order\n        // them, which is needed for uniquely determining an outer marker\n        // when they overlap (they may nest, but not partially overlap).\n        var nextMarkerId = 0;\n\n        var TextMarker = function TextMarker(doc, type) {\n          this.lines = [];\n          this.type = type;\n          this.doc = doc;\n          this.id = ++nextMarkerId;\n        };\n\n        // Clear the marker.\n        TextMarker.prototype.clear = function () {\n          var this$1 = this;\n\n          if (this.explicitlyCleared) {\n            return;\n          }\n          var cm = this.doc.cm,\n              withOp = cm && !cm.curOp;\n          if (withOp) {\n            _startOperation(cm);\n          }\n          if (hasHandler(this, \"clear\")) {\n            var found = this.find();\n            if (found) {\n              signalLater(this, \"clear\", found.from, found.to);\n            }\n          }\n          var min = null,\n              max = null;\n          for (var i = 0; i < this.lines.length; ++i) {\n            var line = this$1.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this$1);\n            if (cm && !this$1.collapsed) {\n              regLineChange(cm, lineNo(line), \"text\");\n            } else if (cm) {\n              if (span.to != null) {\n                max = lineNo(line);\n              }\n              if (span.from != null) {\n                min = lineNo(line);\n              }\n            }\n            line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n            if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm) {\n              updateLineHeight(line, textHeight(cm.display));\n            }\n          }\n          if (cm && this.collapsed && !cm.options.lineWrapping) {\n            for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n              var visual = visualLine(this$1.lines[i$1]),\n                  len = lineLength(visual);\n              if (len > cm.display.maxLineLength) {\n                cm.display.maxLine = visual;\n                cm.display.maxLineLength = len;\n                cm.display.maxLineChanged = true;\n              }\n            }\n          }\n\n          if (min != null && cm && this.collapsed) {\n            regChange(cm, min, max + 1);\n          }\n          this.lines.length = 0;\n          this.explicitlyCleared = true;\n          if (this.atomic && this.doc.cantEdit) {\n            this.doc.cantEdit = false;\n            if (cm) {\n              reCheckSelection(cm.doc);\n            }\n          }\n          if (cm) {\n            signalLater(cm, \"markerCleared\", cm, this, min, max);\n          }\n          if (withOp) {\n            _endOperation(cm);\n          }\n          if (this.parent) {\n            this.parent.clear();\n          }\n        };\n\n        // Find the position of the marker in the document. Returns a {from,\n        // to} object by default. Side can be passed to get a specific side\n        // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n        // Pos objects returned contain a line object, rather than a line\n        // number (used to prevent looking up the same line twice).\n        TextMarker.prototype.find = function (side, lineObj) {\n          var this$1 = this;\n\n          if (side == null && this.type == \"bookmark\") {\n            side = 1;\n          }\n          var from, to;\n          for (var i = 0; i < this.lines.length; ++i) {\n            var line = this$1.lines[i];\n            var span = getMarkedSpanFor(line.markedSpans, this$1);\n            if (span.from != null) {\n              from = Pos(lineObj ? line : lineNo(line), span.from);\n              if (side == -1) {\n                return from;\n              }\n            }\n            if (span.to != null) {\n              to = Pos(lineObj ? line : lineNo(line), span.to);\n              if (side == 1) {\n                return to;\n              }\n            }\n          }\n          return from && { from: from, to: to };\n        };\n\n        // Signals that the marker's widget changed, and surrounding layout\n        // should be recomputed.\n        TextMarker.prototype.changed = function () {\n          var this$1 = this;\n\n          var pos = this.find(-1, true),\n              widget = this,\n              cm = this.doc.cm;\n          if (!pos || !cm) {\n            return;\n          }\n          runInOp(cm, function () {\n            var line = pos.line,\n                lineN = lineNo(pos.line);\n            var view = findViewForLine(cm, lineN);\n            if (view) {\n              clearLineMeasurementCacheFor(view);\n              cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n            }\n            cm.curOp.updateMaxLine = true;\n            if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n              var oldHeight = widget.height;\n              widget.height = null;\n              var dHeight = widgetHeight(widget) - oldHeight;\n              if (dHeight) {\n                updateLineHeight(line, line.height + dHeight);\n              }\n            }\n            signalLater(cm, \"markerChanged\", cm, this$1);\n          });\n        };\n\n        TextMarker.prototype.attachLine = function (line) {\n          if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;\n            if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n              (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n            }\n          }\n          this.lines.push(line);\n        };\n\n        TextMarker.prototype.detachLine = function (line) {\n          this.lines.splice(indexOf(this.lines, line), 1);\n          if (!this.lines.length && this.doc.cm) {\n            var op = this.doc.cm.curOp;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n          }\n        };\n        eventMixin(TextMarker);\n\n        // Create a marker, wire it up to the right lines, and\n        function _markText(doc, from, to, options, type) {\n          // Shared markers (across linked documents) are handled separately\n          // (markTextShared will call out to this again, once per\n          // document).\n          if (options && options.shared) {\n            return markTextShared(doc, from, to, options, type);\n          }\n          // Ensure we are in an operation.\n          if (doc.cm && !doc.cm.curOp) {\n            return operation(doc.cm, _markText)(doc, from, to, options, type);\n          }\n\n          var marker = new TextMarker(doc, type),\n              diff = cmp(from, to);\n          if (options) {\n            copyObj(options, marker, false);\n          }\n          // Don't connect empty markers unless clearWhenEmpty is false\n          if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n            return marker;\n          }\n          if (marker.replacedWith) {\n            // Showing up as a widget implies collapsed (widget replaces text)\n            marker.collapsed = true;\n            marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n            if (!options.handleMouseEvents) {\n              marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n            }\n            if (options.insertLeft) {\n              marker.widgetNode.insertLeft = true;\n            }\n          }\n          if (marker.collapsed) {\n            if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n              throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n            }\n            seeCollapsedSpans();\n          }\n\n          if (marker.addToHistory) {\n            addChangeToHistory(doc, { from: from, to: to, origin: \"markText\" }, doc.sel, NaN);\n          }\n\n          var curLine = from.line,\n              cm = doc.cm,\n              updateMaxLine;\n          doc.iter(curLine, to.line + 1, function (line) {\n            if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n              updateMaxLine = true;\n            }\n            if (marker.collapsed && curLine != from.line) {\n              updateLineHeight(line, 0);\n            }\n            addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n            ++curLine;\n          });\n          // lineIsHidden depends on the presence of the spans, so needs a second pass\n          if (marker.collapsed) {\n            doc.iter(from.line, to.line + 1, function (line) {\n              if (lineIsHidden(doc, line)) {\n                updateLineHeight(line, 0);\n              }\n            });\n          }\n\n          if (marker.clearOnEnter) {\n            on(marker, \"beforeCursorEnter\", function () {\n              return marker.clear();\n            });\n          }\n\n          if (marker.readOnly) {\n            seeReadOnlySpans();\n            if (doc.history.done.length || doc.history.undone.length) {\n              doc.clearHistory();\n            }\n          }\n          if (marker.collapsed) {\n            marker.id = ++nextMarkerId;\n            marker.atomic = true;\n          }\n          if (cm) {\n            // Sync editor state\n            if (updateMaxLine) {\n              cm.curOp.updateMaxLine = true;\n            }\n            if (marker.collapsed) {\n              regChange(cm, from.line, to.line + 1);\n            } else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css) {\n              for (var i = from.line; i <= to.line; i++) {\n                regLineChange(cm, i, \"text\");\n              }\n            }\n            if (marker.atomic) {\n              reCheckSelection(cm.doc);\n            }\n            signalLater(cm, \"markerAdded\", cm, marker);\n          }\n          return marker;\n        }\n\n        // SHARED TEXTMARKERS\n\n        // A shared marker spans multiple linked documents. It is\n        // implemented as a meta-marker-object controlling multiple normal\n        // markers.\n        var SharedTextMarker = function SharedTextMarker(markers, primary) {\n          var this$1 = this;\n\n          this.markers = markers;\n          this.primary = primary;\n          for (var i = 0; i < markers.length; ++i) {\n            markers[i].parent = this$1;\n          }\n        };\n\n        SharedTextMarker.prototype.clear = function () {\n          var this$1 = this;\n\n          if (this.explicitlyCleared) {\n            return;\n          }\n          this.explicitlyCleared = true;\n          for (var i = 0; i < this.markers.length; ++i) {\n            this$1.markers[i].clear();\n          }\n          signalLater(this, \"clear\");\n        };\n\n        SharedTextMarker.prototype.find = function (side, lineObj) {\n          return this.primary.find(side, lineObj);\n        };\n        eventMixin(SharedTextMarker);\n\n        function markTextShared(doc, from, to, options, type) {\n          options = copyObj(options);\n          options.shared = false;\n          var markers = [_markText(doc, from, to, options, type)],\n              primary = markers[0];\n          var widget = options.widgetNode;\n          linkedDocs(doc, function (doc) {\n            if (widget) {\n              options.widgetNode = widget.cloneNode(true);\n            }\n            markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n            for (var i = 0; i < doc.linked.length; ++i) {\n              if (doc.linked[i].isParent) {\n                return;\n              }\n            }\n            primary = lst(markers);\n          });\n          return new SharedTextMarker(markers, primary);\n        }\n\n        function findSharedMarkers(doc) {\n          return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n            return m.parent;\n          });\n        }\n\n        function copySharedMarkers(doc, markers) {\n          for (var i = 0; i < markers.length; i++) {\n            var marker = markers[i],\n                pos = marker.find();\n            var mFrom = doc.clipPos(pos.from),\n                mTo = doc.clipPos(pos.to);\n            if (cmp(mFrom, mTo)) {\n              var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n              marker.markers.push(subMark);\n              subMark.parent = marker;\n            }\n          }\n        }\n\n        function detachSharedMarkers(markers) {\n          var loop = function loop(i) {\n            var marker = markers[i],\n                linked = [marker.primary.doc];\n            linkedDocs(marker.primary.doc, function (d) {\n              return linked.push(d);\n            });\n            for (var j = 0; j < marker.markers.length; j++) {\n              var subMarker = marker.markers[j];\n              if (indexOf(linked, subMarker.doc) == -1) {\n                subMarker.parent = null;\n                marker.markers.splice(j--, 1);\n              }\n            }\n          };\n\n          for (var i = 0; i < markers.length; i++) {\n            loop(i);\n          }\n        }\n\n        var nextDocId = 0;\n        var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n          if (!(this instanceof Doc)) {\n            return new Doc(text, mode, firstLine, lineSep, direction);\n          }\n          if (firstLine == null) {\n            firstLine = 0;\n          }\n\n          BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n          this.first = firstLine;\n          this.scrollTop = this.scrollLeft = 0;\n          this.cantEdit = false;\n          this.cleanGeneration = 1;\n          this.modeFrontier = this.highlightFrontier = firstLine;\n          var start = Pos(firstLine, 0);\n          this.sel = simpleSelection(start);\n          this.history = new History(null);\n          this.id = ++nextDocId;\n          this.modeOption = mode;\n          this.lineSep = lineSep;\n          this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n          this.extend = false;\n\n          if (typeof text == \"string\") {\n            text = this.splitLines(text);\n          }\n          updateDoc(this, { from: start, to: start, text: text });\n          setSelection(this, simpleSelection(start), sel_dontScroll);\n        };\n\n        Doc.prototype = createObj(BranchChunk.prototype, {\n          constructor: Doc,\n          // Iterate over the document. Supports two forms -- with only one\n          // argument, it calls that for each line in the document. With\n          // three, it iterates over the range given by the first two (with\n          // the second being non-inclusive).\n          iter: function iter(from, to, op) {\n            if (op) {\n              this.iterN(from - this.first, to - from, op);\n            } else {\n              this.iterN(this.first, this.first + this.size, from);\n            }\n          },\n\n          // Non-public interface for adding and removing lines.\n          insert: function insert(at, lines) {\n            var height = 0;\n            for (var i = 0; i < lines.length; ++i) {\n              height += lines[i].height;\n            }\n            this.insertInner(at - this.first, lines, height);\n          },\n          remove: function remove(at, n) {\n            this.removeInner(at - this.first, n);\n          },\n\n          // From here, the methods are part of the public interface. Most\n          // are also available from CodeMirror (editor) instances.\n\n          getValue: function getValue(lineSep) {\n            var lines = getLines(this, this.first, this.first + this.size);\n            if (lineSep === false) {\n              return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n          },\n          setValue: docMethodOp(function (code) {\n            var top = Pos(this.first, 0),\n                last = this.first + this.size - 1;\n            makeChange(this, { from: top, to: Pos(last, getLine(this, last).text.length),\n              text: this.splitLines(code), origin: \"setValue\", full: true }, true);\n            if (this.cm) {\n              scrollToCoords(this.cm, 0, 0);\n            }\n            setSelection(this, simpleSelection(top), sel_dontScroll);\n          }),\n          replaceRange: function replaceRange(code, from, to, origin) {\n            from = _clipPos(this, from);\n            to = to ? _clipPos(this, to) : from;\n            _replaceRange(this, code, from, to, origin);\n          },\n          getRange: function getRange(from, to, lineSep) {\n            var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n            if (lineSep === false) {\n              return lines;\n            }\n            return lines.join(lineSep || this.lineSeparator());\n          },\n\n          getLine: function getLine(line) {\n            var l = this.getLineHandle(line);return l && l.text;\n          },\n\n          getLineHandle: function getLineHandle(line) {\n            if (isLine(this, line)) {\n              return getLine(this, line);\n            }\n          },\n          getLineNumber: function getLineNumber(line) {\n            return lineNo(line);\n          },\n\n          getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n            if (typeof line == \"number\") {\n              line = getLine(this, line);\n            }\n            return visualLine(line);\n          },\n\n          lineCount: function lineCount() {\n            return this.size;\n          },\n          firstLine: function firstLine() {\n            return this.first;\n          },\n          lastLine: function lastLine() {\n            return this.first + this.size - 1;\n          },\n\n          clipPos: function clipPos(pos) {\n            return _clipPos(this, pos);\n          },\n\n          getCursor: function getCursor(start) {\n            var range$$1 = this.sel.primary(),\n                pos;\n            if (start == null || start == \"head\") {\n              pos = range$$1.head;\n            } else if (start == \"anchor\") {\n              pos = range$$1.anchor;\n            } else if (start == \"end\" || start == \"to\" || start === false) {\n              pos = range$$1.to();\n            } else {\n              pos = range$$1.from();\n            }\n            return pos;\n          },\n          listSelections: function listSelections() {\n            return this.sel.ranges;\n          },\n          somethingSelected: function somethingSelected() {\n            return this.sel.somethingSelected();\n          },\n\n          setCursor: docMethodOp(function (line, ch, options) {\n            setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n          }),\n          setSelection: docMethodOp(function (anchor, head, options) {\n            setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n          }),\n          extendSelection: docMethodOp(function (head, other, options) {\n            extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n          }),\n          extendSelections: docMethodOp(function (heads, options) {\n            extendSelections(this, clipPosArray(this, heads), options);\n          }),\n          extendSelectionsBy: docMethodOp(function (f, options) {\n            var heads = map(this.sel.ranges, f);\n            extendSelections(this, clipPosArray(this, heads), options);\n          }),\n          setSelections: docMethodOp(function (ranges, primary, options) {\n            var this$1 = this;\n\n            if (!ranges.length) {\n              return;\n            }\n            var out = [];\n            for (var i = 0; i < ranges.length; i++) {\n              out[i] = new Range(_clipPos(this$1, ranges[i].anchor), _clipPos(this$1, ranges[i].head));\n            }\n            if (primary == null) {\n              primary = Math.min(ranges.length - 1, this.sel.primIndex);\n            }\n            setSelection(this, normalizeSelection(out, primary), options);\n          }),\n          addSelection: docMethodOp(function (anchor, head, options) {\n            var ranges = this.sel.ranges.slice(0);\n            ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n            setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n          }),\n\n          getSelection: function getSelection(lineSep) {\n            var this$1 = this;\n\n            var ranges = this.sel.ranges,\n                lines;\n            for (var i = 0; i < ranges.length; i++) {\n              var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n              lines = lines ? lines.concat(sel) : sel;\n            }\n            if (lineSep === false) {\n              return lines;\n            } else {\n              return lines.join(lineSep || this.lineSeparator());\n            }\n          },\n          getSelections: function getSelections(lineSep) {\n            var this$1 = this;\n\n            var parts = [],\n                ranges = this.sel.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n              var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n              if (lineSep !== false) {\n                sel = sel.join(lineSep || this$1.lineSeparator());\n              }\n              parts[i] = sel;\n            }\n            return parts;\n          },\n          replaceSelection: function replaceSelection(code, collapse, origin) {\n            var dup = [];\n            for (var i = 0; i < this.sel.ranges.length; i++) {\n              dup[i] = code;\n            }\n            this.replaceSelections(dup, collapse, origin || \"+input\");\n          },\n          replaceSelections: docMethodOp(function (code, collapse, origin) {\n            var this$1 = this;\n\n            var changes = [],\n                sel = this.sel;\n            for (var i = 0; i < sel.ranges.length; i++) {\n              var range$$1 = sel.ranges[i];\n              changes[i] = { from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin };\n            }\n            var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n            for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n              makeChange(this$1, changes[i$1]);\n            }\n            if (newSel) {\n              setSelectionReplaceHistory(this, newSel);\n            } else if (this.cm) {\n              ensureCursorVisible(this.cm);\n            }\n          }),\n          undo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\");\n          }),\n          redo: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\");\n          }),\n          undoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"undo\", true);\n          }),\n          redoSelection: docMethodOp(function () {\n            makeChangeFromHistory(this, \"redo\", true);\n          }),\n\n          setExtending: function setExtending(val) {\n            this.extend = val;\n          },\n          getExtending: function getExtending() {\n            return this.extend;\n          },\n\n          historySize: function historySize() {\n            var hist = this.history,\n                done = 0,\n                undone = 0;\n            for (var i = 0; i < hist.done.length; i++) {\n              if (!hist.done[i].ranges) {\n                ++done;\n              }\n            }\n            for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n              if (!hist.undone[i$1].ranges) {\n                ++undone;\n              }\n            }\n            return { undo: done, redo: undone };\n          },\n          clearHistory: function clearHistory() {\n            this.history = new History(this.history.maxGeneration);\n          },\n\n          markClean: function markClean() {\n            this.cleanGeneration = this.changeGeneration(true);\n          },\n          changeGeneration: function changeGeneration(forceSplit) {\n            if (forceSplit) {\n              this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n            }\n            return this.history.generation;\n          },\n          isClean: function isClean(gen) {\n            return this.history.generation == (gen || this.cleanGeneration);\n          },\n\n          getHistory: function getHistory() {\n            return { done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone) };\n          },\n          setHistory: function setHistory(histData) {\n            var hist = this.history = new History(this.history.maxGeneration);\n            hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n            hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n          },\n\n          setGutterMarker: docMethodOp(function (line, gutterID, value) {\n            return changeLine(this, line, \"gutter\", function (line) {\n              var markers = line.gutterMarkers || (line.gutterMarkers = {});\n              markers[gutterID] = value;\n              if (!value && isEmpty(markers)) {\n                line.gutterMarkers = null;\n              }\n              return true;\n            });\n          }),\n\n          clearGutter: docMethodOp(function (gutterID) {\n            var this$1 = this;\n\n            this.iter(function (line) {\n              if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n                changeLine(this$1, line, \"gutter\", function () {\n                  line.gutterMarkers[gutterID] = null;\n                  if (isEmpty(line.gutterMarkers)) {\n                    line.gutterMarkers = null;\n                  }\n                  return true;\n                });\n              }\n            });\n          }),\n\n          lineInfo: function lineInfo(line) {\n            var n;\n            if (typeof line == \"number\") {\n              if (!isLine(this, line)) {\n                return null;\n              }\n              n = line;\n              line = getLine(this, line);\n              if (!line) {\n                return null;\n              }\n            } else {\n              n = lineNo(line);\n              if (n == null) {\n                return null;\n              }\n            }\n            return { line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets };\n          },\n\n          addLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n              var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n              if (!line[prop]) {\n                line[prop] = cls;\n              } else if (classTest(cls).test(line[prop])) {\n                return false;\n              } else {\n                line[prop] += \" \" + cls;\n              }\n              return true;\n            });\n          }),\n          removeLineClass: docMethodOp(function (handle, where, cls) {\n            return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n              var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n              var cur = line[prop];\n              if (!cur) {\n                return false;\n              } else if (cls == null) {\n                line[prop] = null;\n              } else {\n                var found = cur.match(classTest(cls));\n                if (!found) {\n                  return false;\n                }\n                var end = found.index + found[0].length;\n                line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n              }\n              return true;\n            });\n          }),\n\n          addLineWidget: docMethodOp(function (handle, node, options) {\n            return addLineWidget(this, handle, node, options);\n          }),\n          removeLineWidget: function removeLineWidget(widget) {\n            widget.clear();\n          },\n\n          markText: function markText(from, to, options) {\n            return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n          },\n          setBookmark: function setBookmark(pos, options) {\n            var realOpts = { replacedWith: options && (options.nodeType == null ? options.widget : options),\n              insertLeft: options && options.insertLeft,\n              clearWhenEmpty: false, shared: options && options.shared,\n              handleMouseEvents: options && options.handleMouseEvents };\n            pos = _clipPos(this, pos);\n            return _markText(this, pos, pos, realOpts, \"bookmark\");\n          },\n          findMarksAt: function findMarksAt(pos) {\n            pos = _clipPos(this, pos);\n            var markers = [],\n                spans = getLine(this, pos.line).markedSpans;\n            if (spans) {\n              for (var i = 0; i < spans.length; ++i) {\n                var span = spans[i];\n                if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n                  markers.push(span.marker.parent || span.marker);\n                }\n              }\n            }\n            return markers;\n          },\n          findMarks: function findMarks(from, to, filter) {\n            from = _clipPos(this, from);to = _clipPos(this, to);\n            var found = [],\n                lineNo$$1 = from.line;\n            this.iter(from.line, to.line + 1, function (line) {\n              var spans = line.markedSpans;\n              if (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                  var span = spans[i];\n                  if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to || span.from == null && lineNo$$1 != from.line || span.from != null && lineNo$$1 == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n                    found.push(span.marker.parent || span.marker);\n                  }\n                }\n              }\n              ++lineNo$$1;\n            });\n            return found;\n          },\n          getAllMarks: function getAllMarks() {\n            var markers = [];\n            this.iter(function (line) {\n              var sps = line.markedSpans;\n              if (sps) {\n                for (var i = 0; i < sps.length; ++i) {\n                  if (sps[i].from != null) {\n                    markers.push(sps[i].marker);\n                  }\n                }\n              }\n            });\n            return markers;\n          },\n\n          posFromIndex: function posFromIndex(off) {\n            var ch,\n                lineNo$$1 = this.first,\n                sepSize = this.lineSeparator().length;\n            this.iter(function (line) {\n              var sz = line.text.length + sepSize;\n              if (sz > off) {\n                ch = off;return true;\n              }\n              off -= sz;\n              ++lineNo$$1;\n            });\n            return _clipPos(this, Pos(lineNo$$1, ch));\n          },\n          indexFromPos: function indexFromPos(coords) {\n            coords = _clipPos(this, coords);\n            var index = coords.ch;\n            if (coords.line < this.first || coords.ch < 0) {\n              return 0;\n            }\n            var sepSize = this.lineSeparator().length;\n            this.iter(this.first, coords.line, function (line) {\n              // iter aborts when callback returns a truthy value\n              index += line.text.length + sepSize;\n            });\n            return index;\n          },\n\n          copy: function copy(copyHistory) {\n            var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n            doc.scrollTop = this.scrollTop;doc.scrollLeft = this.scrollLeft;\n            doc.sel = this.sel;\n            doc.extend = false;\n            if (copyHistory) {\n              doc.history.undoDepth = this.history.undoDepth;\n              doc.setHistory(this.getHistory());\n            }\n            return doc;\n          },\n\n          linkedDoc: function linkedDoc(options) {\n            if (!options) {\n              options = {};\n            }\n            var from = this.first,\n                to = this.first + this.size;\n            if (options.from != null && options.from > from) {\n              from = options.from;\n            }\n            if (options.to != null && options.to < to) {\n              to = options.to;\n            }\n            var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n            if (options.sharedHist) {\n              copy.history = this.history;\n            }(this.linked || (this.linked = [])).push({ doc: copy, sharedHist: options.sharedHist });\n            copy.linked = [{ doc: this, isParent: true, sharedHist: options.sharedHist }];\n            copySharedMarkers(copy, findSharedMarkers(this));\n            return copy;\n          },\n          unlinkDoc: function unlinkDoc(other) {\n            var this$1 = this;\n\n            if (other instanceof CodeMirror$1) {\n              other = other.doc;\n            }\n            if (this.linked) {\n              for (var i = 0; i < this.linked.length; ++i) {\n                var link = this$1.linked[i];\n                if (link.doc != other) {\n                  continue;\n                }\n                this$1.linked.splice(i, 1);\n                other.unlinkDoc(this$1);\n                detachSharedMarkers(findSharedMarkers(this$1));\n                break;\n              }\n            }\n            // If the histories were shared, split them again\n            if (other.history == this.history) {\n              var splitIds = [other.id];\n              linkedDocs(other, function (doc) {\n                return splitIds.push(doc.id);\n              }, true);\n              other.history = new History(null);\n              other.history.done = copyHistoryArray(this.history.done, splitIds);\n              other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n            }\n          },\n          iterLinkedDocs: function iterLinkedDocs(f) {\n            linkedDocs(this, f);\n          },\n\n          getMode: function getMode() {\n            return this.mode;\n          },\n          getEditor: function getEditor() {\n            return this.cm;\n          },\n\n          splitLines: function splitLines(str) {\n            if (this.lineSep) {\n              return str.split(this.lineSep);\n            }\n            return splitLinesAuto(str);\n          },\n          lineSeparator: function lineSeparator() {\n            return this.lineSep || \"\\n\";\n          },\n\n          setDirection: docMethodOp(function (dir) {\n            if (dir != \"rtl\") {\n              dir = \"ltr\";\n            }\n            if (dir == this.direction) {\n              return;\n            }\n            this.direction = dir;\n            this.iter(function (line) {\n              return line.order = null;\n            });\n            if (this.cm) {\n              directionChanged(this.cm);\n            }\n          })\n        });\n\n        // Public alias.\n        Doc.prototype.eachLine = Doc.prototype.iter;\n\n        // Kludge to work around strange IE behavior where it'll sometimes\n        // re-fire a series of drag-related events right after the drop (#1551)\n        var lastDrop = 0;\n\n        function onDrop(e) {\n          var cm = this;\n          clearDragCursor(cm);\n          if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n          }\n          e_preventDefault(e);\n          if (ie) {\n            lastDrop = +new Date();\n          }\n          var pos = posFromMouse(cm, e, true),\n              files = e.dataTransfer.files;\n          if (!pos || cm.isReadOnly()) {\n            return;\n          }\n          // Might be a file drop, in which case we simply extract the text\n          // and insert it.\n          if (files && files.length && window.FileReader && window.File) {\n            var n = files.length,\n                text = Array(n),\n                read = 0;\n            var loadFile = function loadFile(file, i) {\n              if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n                return;\n              }\n\n              var reader = new FileReader();\n              reader.onload = operation(cm, function () {\n                var content = reader.result;\n                if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n                  content = \"\";\n                }\n                text[i] = content;\n                if (++read == n) {\n                  pos = _clipPos(cm.doc, pos);\n                  var change = { from: pos, to: pos,\n                    text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                    origin: \"paste\" };\n                  makeChange(cm.doc, change);\n                  setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n                }\n              });\n              reader.readAsText(file);\n            };\n            for (var i = 0; i < n; ++i) {\n              loadFile(files[i], i);\n            }\n          } else {\n            // Normal drop\n            // Don't do a replace if the drop happened inside of the selected text.\n            if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n              cm.state.draggingText(e);\n              // Ensure the editor is re-focused\n              setTimeout(function () {\n                return cm.display.input.focus();\n              }, 20);\n              return;\n            }\n            try {\n              var text$1 = e.dataTransfer.getData(\"Text\");\n              if (text$1) {\n                var selected;\n                if (cm.state.draggingText && !cm.state.draggingText.copy) {\n                  selected = cm.listSelections();\n                }\n                setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n                if (selected) {\n                  for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n                    _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n                  }\n                }\n                cm.replaceSelection(text$1, \"around\", \"paste\");\n                cm.display.input.focus();\n              }\n            } catch (e) {}\n          }\n        }\n\n        function onDragStart(cm, e) {\n          if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n            e_stop(e);return;\n          }\n          if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n            return;\n          }\n\n          e.dataTransfer.setData(\"Text\", cm.getSelection());\n          e.dataTransfer.effectAllowed = \"copyMove\";\n\n          // Use dummy image instead of default browsers image.\n          // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n          if (e.dataTransfer.setDragImage && !safari) {\n            var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n            img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n            if (presto) {\n              img.width = img.height = 1;\n              cm.display.wrapper.appendChild(img);\n              // Force a relayout, or Opera won't use our image for some obscure reason\n              img._top = img.offsetTop;\n            }\n            e.dataTransfer.setDragImage(img, 0, 0);\n            if (presto) {\n              img.parentNode.removeChild(img);\n            }\n          }\n        }\n\n        function onDragOver(cm, e) {\n          var pos = posFromMouse(cm, e);\n          if (!pos) {\n            return;\n          }\n          var frag = document.createDocumentFragment();\n          drawSelectionCursor(cm, pos, frag);\n          if (!cm.display.dragCursor) {\n            cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n            cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n          }\n          removeChildrenAndAdd(cm.display.dragCursor, frag);\n        }\n\n        function clearDragCursor(cm) {\n          if (cm.display.dragCursor) {\n            cm.display.lineSpace.removeChild(cm.display.dragCursor);\n            cm.display.dragCursor = null;\n          }\n        }\n\n        // These must be handled carefully, because naively registering a\n        // handler for each editor will cause the editors to never be\n        // garbage collected.\n\n        function forEachCodeMirror(f) {\n          if (!document.getElementsByClassName) {\n            return;\n          }\n          var byClass = document.getElementsByClassName(\"CodeMirror\");\n          for (var i = 0; i < byClass.length; i++) {\n            var cm = byClass[i].CodeMirror;\n            if (cm) {\n              f(cm);\n            }\n          }\n        }\n\n        var globalsRegistered = false;\n        function ensureGlobalHandlers() {\n          if (globalsRegistered) {\n            return;\n          }\n          registerGlobalHandlers();\n          globalsRegistered = true;\n        }\n        function registerGlobalHandlers() {\n          // When the window resizes, we need to refresh active editors.\n          var resizeTimer;\n          on(window, \"resize\", function () {\n            if (resizeTimer == null) {\n              resizeTimer = setTimeout(function () {\n                resizeTimer = null;\n                forEachCodeMirror(onResize);\n              }, 100);\n            }\n          });\n          // When the window loses focus, we want to show the editor as blurred\n          on(window, \"blur\", function () {\n            return forEachCodeMirror(onBlur);\n          });\n        }\n        // Called when the window resizes\n        function onResize(cm) {\n          var d = cm.display;\n          if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth) {\n            return;\n          }\n          // Might be a text scaling operation, clear size caches.\n          d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n          d.scrollbarsClipped = false;\n          cm.setSize();\n        }\n\n        var keyNames = {\n          3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n          19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n          36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n          46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n          106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\",\n          173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n          221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n          63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n        };\n\n        // Number keys\n        for (var i = 0; i < 10; i++) {\n          keyNames[i + 48] = keyNames[i + 96] = String(i);\n        }\n        // Alphabetic keys\n        for (var i$1 = 65; i$1 <= 90; i$1++) {\n          keyNames[i$1] = String.fromCharCode(i$1);\n        }\n        // Function keys\n        for (var i$2 = 1; i$2 <= 12; i$2++) {\n          keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n        }\n\n        var keyMap = {};\n\n        keyMap.basic = {\n          \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n          \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n          \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n          \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n          \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n          \"Esc\": \"singleSelection\"\n        };\n        // Note that the save and find-related commands aren't defined by\n        // default. User code or addons can define them. Unknown commands\n        // are simply ignored.\n        keyMap.pcDefault = {\n          \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n          \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n          \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n          \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n          \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n          \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n          \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n          fallthrough: \"basic\"\n        };\n        // Very basic readline/emacs-style bindings, which are standard on Mac.\n        keyMap.emacsy = {\n          \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n          \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n          \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n          \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n          \"Ctrl-O\": \"openLine\"\n        };\n        keyMap.macDefault = {\n          \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n          \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n          \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n          \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n          \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n          \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n          \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n          fallthrough: [\"basic\", \"emacsy\"]\n        };\n        keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n        // KEYMAP DISPATCH\n\n        function normalizeKeyName(name) {\n          var parts = name.split(/-(?!$)/);\n          name = parts[parts.length - 1];\n          var alt, ctrl, shift, cmd;\n          for (var i = 0; i < parts.length - 1; i++) {\n            var mod = parts[i];\n            if (/^(cmd|meta|m)$/i.test(mod)) {\n              cmd = true;\n            } else if (/^a(lt)?$/i.test(mod)) {\n              alt = true;\n            } else if (/^(c|ctrl|control)$/i.test(mod)) {\n              ctrl = true;\n            } else if (/^s(hift)?$/i.test(mod)) {\n              shift = true;\n            } else {\n              throw new Error(\"Unrecognized modifier name: \" + mod);\n            }\n          }\n          if (alt) {\n            name = \"Alt-\" + name;\n          }\n          if (ctrl) {\n            name = \"Ctrl-\" + name;\n          }\n          if (cmd) {\n            name = \"Cmd-\" + name;\n          }\n          if (shift) {\n            name = \"Shift-\" + name;\n          }\n          return name;\n        }\n\n        // This is a kludge to keep keymaps mostly working as raw objects\n        // (backwards compatibility) while at the same time support features\n        // like normalization and multi-stroke key bindings. It compiles a\n        // new normalized keymap, and then updates the old object to reflect\n        // this.\n        function normalizeKeyMap(keymap) {\n          var copy = {};\n          for (var keyname in keymap) {\n            if (keymap.hasOwnProperty(keyname)) {\n              var value = keymap[keyname];\n              if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n                continue;\n              }\n              if (value == \"...\") {\n                delete keymap[keyname];continue;\n              }\n\n              var keys = map(keyname.split(\" \"), normalizeKeyName);\n              for (var i = 0; i < keys.length; i++) {\n                var val = void 0,\n                    name = void 0;\n                if (i == keys.length - 1) {\n                  name = keys.join(\" \");\n                  val = value;\n                } else {\n                  name = keys.slice(0, i + 1).join(\" \");\n                  val = \"...\";\n                }\n                var prev = copy[name];\n                if (!prev) {\n                  copy[name] = val;\n                } else if (prev != val) {\n                  throw new Error(\"Inconsistent bindings for \" + name);\n                }\n              }\n              delete keymap[keyname];\n            }\n          }\n          for (var prop in copy) {\n            keymap[prop] = copy[prop];\n          }\n          return keymap;\n        }\n\n        function lookupKey(key, map$$1, handle, context) {\n          map$$1 = getKeyMap(map$$1);\n          var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n          if (found === false) {\n            return \"nothing\";\n          }\n          if (found === \"...\") {\n            return \"multi\";\n          }\n          if (found != null && handle(found)) {\n            return \"handled\";\n          }\n\n          if (map$$1.fallthrough) {\n            if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\") {\n              return lookupKey(key, map$$1.fallthrough, handle, context);\n            }\n            for (var i = 0; i < map$$1.fallthrough.length; i++) {\n              var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n              if (result) {\n                return result;\n              }\n            }\n          }\n        }\n\n        // Modifier key presses don't count as 'real' key presses for the\n        // purpose of keymap fallthrough.\n        function isModifierKey(value) {\n          var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n          return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n        }\n\n        function addModifierNames(name, event, noShift) {\n          var base = name;\n          if (event.altKey && base != \"Alt\") {\n            name = \"Alt-\" + name;\n          }\n          if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n            name = \"Ctrl-\" + name;\n          }\n          if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n            name = \"Cmd-\" + name;\n          }\n          if (!noShift && event.shiftKey && base != \"Shift\") {\n            name = \"Shift-\" + name;\n          }\n          return name;\n        }\n\n        // Look up the name of a key as indicated by an event object.\n        function keyName(event, noShift) {\n          if (presto && event.keyCode == 34 && event[\"char\"]) {\n            return false;\n          }\n          var name = keyNames[event.keyCode];\n          if (name == null || event.altGraphKey) {\n            return false;\n          }\n          return addModifierNames(name, event, noShift);\n        }\n\n        function getKeyMap(val) {\n          return typeof val == \"string\" ? keyMap[val] : val;\n        }\n\n        // Helper for deleting text near the selection(s), used to implement\n        // backspace, delete, and similar functionality.\n        function deleteNearSelection(cm, compute) {\n          var ranges = cm.doc.sel.ranges,\n              kill = [];\n          // Build up a set of ranges to kill first, merging overlapping\n          // ranges.\n          for (var i = 0; i < ranges.length; i++) {\n            var toKill = compute(ranges[i]);\n            while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n              var replaced = kill.pop();\n              if (cmp(replaced.from, toKill.from) < 0) {\n                toKill.from = replaced.from;\n                break;\n              }\n            }\n            kill.push(toKill);\n          }\n          // Next, remove those actual ranges.\n          runInOp(cm, function () {\n            for (var i = kill.length - 1; i >= 0; i--) {\n              _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n            }\n            ensureCursorVisible(cm);\n          });\n        }\n\n        // Commands are parameter-less actions that can be performed on an\n        // editor, mostly used for keybindings.\n        var commands = {\n          selectAll: selectAll,\n          singleSelection: function singleSelection(cm) {\n            return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n          },\n          killLine: function killLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n              if (range.empty()) {\n                var len = getLine(cm.doc, range.head.line).text.length;\n                if (range.head.ch == len && range.head.line < cm.lastLine()) {\n                  return { from: range.head, to: Pos(range.head.line + 1, 0) };\n                } else {\n                  return { from: range.head, to: Pos(range.head.line, len) };\n                }\n              } else {\n                return { from: range.from(), to: range.to() };\n              }\n            });\n          },\n          deleteLine: function deleteLine(cm) {\n            return deleteNearSelection(cm, function (range) {\n              return {\n                from: Pos(range.from().line, 0),\n                to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n              };\n            });\n          },\n          delLineLeft: function delLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n              return {\n                from: Pos(range.from().line, 0), to: range.from()\n              };\n            });\n          },\n          delWrappedLineLeft: function delWrappedLineLeft(cm) {\n            return deleteNearSelection(cm, function (range) {\n              var top = cm.charCoords(range.head, \"div\").top + 5;\n              var leftPos = cm.coordsChar({ left: 0, top: top }, \"div\");\n              return { from: leftPos, to: range.from() };\n            });\n          },\n          delWrappedLineRight: function delWrappedLineRight(cm) {\n            return deleteNearSelection(cm, function (range) {\n              var top = cm.charCoords(range.head, \"div\").top + 5;\n              var rightPos = cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n              return { from: range.from(), to: rightPos };\n            });\n          },\n          undo: function undo(cm) {\n            return cm.undo();\n          },\n          redo: function redo(cm) {\n            return cm.redo();\n          },\n          undoSelection: function undoSelection(cm) {\n            return cm.undoSelection();\n          },\n          redoSelection: function redoSelection(cm) {\n            return cm.redoSelection();\n          },\n          goDocStart: function goDocStart(cm) {\n            return cm.extendSelection(Pos(cm.firstLine(), 0));\n          },\n          goDocEnd: function goDocEnd(cm) {\n            return cm.extendSelection(Pos(cm.lastLine()));\n          },\n          goLineStart: function goLineStart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineStart(cm, range.head.line);\n            }, { origin: \"+move\", bias: 1 });\n          },\n          goLineStartSmart: function goLineStartSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineStartSmart(cm, range.head);\n            }, { origin: \"+move\", bias: 1 });\n          },\n          goLineEnd: function goLineEnd(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              return lineEnd(cm, range.head.line);\n            }, { origin: \"+move\", bias: -1 });\n          },\n          goLineRight: function goLineRight(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              return cm.coordsChar({ left: cm.display.lineDiv.offsetWidth + 100, top: top }, \"div\");\n            }, sel_move);\n          },\n          goLineLeft: function goLineLeft(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              return cm.coordsChar({ left: 0, top: top }, \"div\");\n            }, sel_move);\n          },\n          goLineLeftSmart: function goLineLeftSmart(cm) {\n            return cm.extendSelectionsBy(function (range) {\n              var top = cm.cursorCoords(range.head, \"div\").top + 5;\n              var pos = cm.coordsChar({ left: 0, top: top }, \"div\");\n              if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n                return lineStartSmart(cm, range.head);\n              }\n              return pos;\n            }, sel_move);\n          },\n          goLineUp: function goLineUp(cm) {\n            return cm.moveV(-1, \"line\");\n          },\n          goLineDown: function goLineDown(cm) {\n            return cm.moveV(1, \"line\");\n          },\n          goPageUp: function goPageUp(cm) {\n            return cm.moveV(-1, \"page\");\n          },\n          goPageDown: function goPageDown(cm) {\n            return cm.moveV(1, \"page\");\n          },\n          goCharLeft: function goCharLeft(cm) {\n            return cm.moveH(-1, \"char\");\n          },\n          goCharRight: function goCharRight(cm) {\n            return cm.moveH(1, \"char\");\n          },\n          goColumnLeft: function goColumnLeft(cm) {\n            return cm.moveH(-1, \"column\");\n          },\n          goColumnRight: function goColumnRight(cm) {\n            return cm.moveH(1, \"column\");\n          },\n          goWordLeft: function goWordLeft(cm) {\n            return cm.moveH(-1, \"word\");\n          },\n          goGroupRight: function goGroupRight(cm) {\n            return cm.moveH(1, \"group\");\n          },\n          goGroupLeft: function goGroupLeft(cm) {\n            return cm.moveH(-1, \"group\");\n          },\n          goWordRight: function goWordRight(cm) {\n            return cm.moveH(1, \"word\");\n          },\n          delCharBefore: function delCharBefore(cm) {\n            return cm.deleteH(-1, \"char\");\n          },\n          delCharAfter: function delCharAfter(cm) {\n            return cm.deleteH(1, \"char\");\n          },\n          delWordBefore: function delWordBefore(cm) {\n            return cm.deleteH(-1, \"word\");\n          },\n          delWordAfter: function delWordAfter(cm) {\n            return cm.deleteH(1, \"word\");\n          },\n          delGroupBefore: function delGroupBefore(cm) {\n            return cm.deleteH(-1, \"group\");\n          },\n          delGroupAfter: function delGroupAfter(cm) {\n            return cm.deleteH(1, \"group\");\n          },\n          indentAuto: function indentAuto(cm) {\n            return cm.indentSelection(\"smart\");\n          },\n          indentMore: function indentMore(cm) {\n            return cm.indentSelection(\"add\");\n          },\n          indentLess: function indentLess(cm) {\n            return cm.indentSelection(\"subtract\");\n          },\n          insertTab: function insertTab(cm) {\n            return cm.replaceSelection(\"\\t\");\n          },\n          insertSoftTab: function insertSoftTab(cm) {\n            var spaces = [],\n                ranges = cm.listSelections(),\n                tabSize = cm.options.tabSize;\n            for (var i = 0; i < ranges.length; i++) {\n              var pos = ranges[i].from();\n              var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n              spaces.push(spaceStr(tabSize - col % tabSize));\n            }\n            cm.replaceSelections(spaces);\n          },\n          defaultTab: function defaultTab(cm) {\n            if (cm.somethingSelected()) {\n              cm.indentSelection(\"add\");\n            } else {\n              cm.execCommand(\"insertTab\");\n            }\n          },\n          // Swap the two chars left and right of each selection's head.\n          // Move cursor behind the two swapped characters afterwards.\n          //\n          // Doesn't consider line feeds a character.\n          // Doesn't scan more than one line above to find a character.\n          // Doesn't do anything on an empty line.\n          // Doesn't do anything with non-empty selections.\n          transposeChars: function transposeChars(cm) {\n            return runInOp(cm, function () {\n              var ranges = cm.listSelections(),\n                  newSel = [];\n              for (var i = 0; i < ranges.length; i++) {\n                if (!ranges[i].empty()) {\n                  continue;\n                }\n                var cur = ranges[i].head,\n                    line = getLine(cm.doc, cur.line).text;\n                if (line) {\n                  if (cur.ch == line.length) {\n                    cur = new Pos(cur.line, cur.ch - 1);\n                  }\n                  if (cur.ch > 0) {\n                    cur = new Pos(cur.line, cur.ch + 1);\n                    cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n                  } else if (cur.line > cm.doc.first) {\n                    var prev = getLine(cm.doc, cur.line - 1).text;\n                    if (prev) {\n                      cur = new Pos(cur.line, 1);\n                      cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n                    }\n                  }\n                }\n                newSel.push(new Range(cur, cur));\n              }\n              cm.setSelections(newSel);\n            });\n          },\n          newlineAndIndent: function newlineAndIndent(cm) {\n            return runInOp(cm, function () {\n              var sels = cm.listSelections();\n              for (var i = sels.length - 1; i >= 0; i--) {\n                cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n              }\n              sels = cm.listSelections();\n              for (var i$1 = 0; i$1 < sels.length; i$1++) {\n                cm.indentLine(sels[i$1].from().line, null, true);\n              }\n              ensureCursorVisible(cm);\n            });\n          },\n          openLine: function openLine(cm) {\n            return cm.replaceSelection(\"\\n\", \"start\");\n          },\n          toggleOverwrite: function toggleOverwrite(cm) {\n            return cm.toggleOverwrite();\n          }\n        };\n\n        function lineStart(cm, lineN) {\n          var line = getLine(cm.doc, lineN);\n          var visual = visualLine(line);\n          if (visual != line) {\n            lineN = lineNo(visual);\n          }\n          return endOfLine(true, cm, visual, lineN, 1);\n        }\n        function lineEnd(cm, lineN) {\n          var line = getLine(cm.doc, lineN);\n          var visual = visualLineEnd(line);\n          if (visual != line) {\n            lineN = lineNo(visual);\n          }\n          return endOfLine(true, cm, line, lineN, -1);\n        }\n        function lineStartSmart(cm, pos) {\n          var start = lineStart(cm, pos.line);\n          var line = getLine(cm.doc, start.line);\n          var order = getOrder(line, cm.doc.direction);\n          if (!order || order[0].level == 0) {\n            var firstNonWS = Math.max(0, line.text.search(/\\S/));\n            var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n            return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n          }\n          return start;\n        }\n\n        // Run a handler that was bound to a key.\n        function doHandleBinding(cm, bound, dropShift) {\n          if (typeof bound == \"string\") {\n            bound = commands[bound];\n            if (!bound) {\n              return false;\n            }\n          }\n          // Ensure previous input has been read, so that the handler sees a\n          // consistent view of the document\n          cm.display.input.ensurePolled();\n          var prevShift = cm.display.shift,\n              done = false;\n          try {\n            if (cm.isReadOnly()) {\n              cm.state.suppressEdits = true;\n            }\n            if (dropShift) {\n              cm.display.shift = false;\n            }\n            done = bound(cm) != Pass;\n          } finally {\n            cm.display.shift = prevShift;\n            cm.state.suppressEdits = false;\n          }\n          return done;\n        }\n\n        function lookupKeyForEditor(cm, name, handle) {\n          for (var i = 0; i < cm.state.keyMaps.length; i++) {\n            var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n            if (result) {\n              return result;\n            }\n          }\n          return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n        }\n\n        // Note that, despite the name, this function is also used to check\n        // for bound mouse clicks.\n\n        var stopSeq = new Delayed();\n        function dispatchKey(cm, name, e, handle) {\n          var seq = cm.state.keySeq;\n          if (seq) {\n            if (isModifierKey(name)) {\n              return \"handled\";\n            }\n            stopSeq.set(50, function () {\n              if (cm.state.keySeq == seq) {\n                cm.state.keySeq = null;\n                cm.display.input.reset();\n              }\n            });\n            name = seq + \" \" + name;\n          }\n          var result = lookupKeyForEditor(cm, name, handle);\n\n          if (result == \"multi\") {\n            cm.state.keySeq = name;\n          }\n          if (result == \"handled\") {\n            signalLater(cm, \"keyHandled\", cm, name, e);\n          }\n\n          if (result == \"handled\" || result == \"multi\") {\n            e_preventDefault(e);\n            restartBlink(cm);\n          }\n\n          if (seq && !result && /\\'$/.test(name)) {\n            e_preventDefault(e);\n            return true;\n          }\n          return !!result;\n        }\n\n        // Handle a key from the keydown event.\n        function handleKeyBinding(cm, e) {\n          var name = keyName(e, true);\n          if (!name) {\n            return false;\n          }\n\n          if (e.shiftKey && !cm.state.keySeq) {\n            // First try to resolve full name (including 'Shift-'). Failing\n            // that, see if there is a cursor-motion command (starting with\n            // 'go') bound to the keyname without 'Shift-'.\n            return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n              return doHandleBinding(cm, b, true);\n            }) || dispatchKey(cm, name, e, function (b) {\n              if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n                return doHandleBinding(cm, b);\n              }\n            });\n          } else {\n            return dispatchKey(cm, name, e, function (b) {\n              return doHandleBinding(cm, b);\n            });\n          }\n        }\n\n        // Handle a key from the keypress event\n        function handleCharBinding(cm, e, ch) {\n          return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n            return doHandleBinding(cm, b, true);\n          });\n        }\n\n        var lastStoppedKey = null;\n        function onKeyDown(e) {\n          var cm = this;\n          cm.curOp.focus = activeElt();\n          if (signalDOMEvent(cm, e)) {\n            return;\n          }\n          // IE does strange things with escape.\n          if (ie && ie_version < 11 && e.keyCode == 27) {\n            e.returnValue = false;\n          }\n          var code = e.keyCode;\n          cm.display.shift = code == 16 || e.shiftKey;\n          var handled = handleKeyBinding(cm, e);\n          if (presto) {\n            lastStoppedKey = handled ? code : null;\n            // Opera has no cut event... we try to at least catch the key combo\n            if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n              cm.replaceSelection(\"\", null, \"cut\");\n            }\n          }\n\n          // Turn mouse into crosshair when Alt is held on Mac.\n          if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n            showCrossHair(cm);\n          }\n        }\n\n        function showCrossHair(cm) {\n          var lineDiv = cm.display.lineDiv;\n          addClass(lineDiv, \"CodeMirror-crosshair\");\n\n          function up(e) {\n            if (e.keyCode == 18 || !e.altKey) {\n              rmClass(lineDiv, \"CodeMirror-crosshair\");\n              off(document, \"keyup\", up);\n              off(document, \"mouseover\", up);\n            }\n          }\n          on(document, \"keyup\", up);\n          on(document, \"mouseover\", up);\n        }\n\n        function onKeyUp(e) {\n          if (e.keyCode == 16) {\n            this.doc.sel.shift = false;\n          }\n          signalDOMEvent(this, e);\n        }\n\n        function onKeyPress(e) {\n          var cm = this;\n          if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n            return;\n          }\n          var keyCode = e.keyCode,\n              charCode = e.charCode;\n          if (presto && keyCode == lastStoppedKey) {\n            lastStoppedKey = null;e_preventDefault(e);return;\n          }\n          if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n            return;\n          }\n          var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n          // Some browsers fire keypress events for backspace\n          if (ch == \"\\x08\") {\n            return;\n          }\n          if (handleCharBinding(cm, e, ch)) {\n            return;\n          }\n          cm.display.input.onKeyPress(e);\n        }\n\n        var DOUBLECLICK_DELAY = 400;\n\n        var PastClick = function PastClick(time, pos, button) {\n          this.time = time;\n          this.pos = pos;\n          this.button = button;\n        };\n\n        PastClick.prototype.compare = function (time, pos, button) {\n          return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n        };\n\n        var lastClick;\n        var lastDoubleClick;\n        function clickRepeat(pos, button) {\n          var now = +new Date();\n          if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n            lastClick = lastDoubleClick = null;\n            return \"triple\";\n          } else if (lastClick && lastClick.compare(now, pos, button)) {\n            lastDoubleClick = new PastClick(now, pos, button);\n            lastClick = null;\n            return \"double\";\n          } else {\n            lastClick = new PastClick(now, pos, button);\n            lastDoubleClick = null;\n            return \"single\";\n          }\n        }\n\n        // A mouse down can be a single click, double click, triple click,\n        // start of selection drag, start of text drag, new cursor\n        // (ctrl-click), rectangle drag (alt-drag), or xwin\n        // middle-click-paste. Or it might be a click on something we should\n        // not interfere with, such as a scrollbar or widget.\n        function onMouseDown(e) {\n          var cm = this,\n              display = cm.display;\n          if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n            return;\n          }\n          display.input.ensurePolled();\n          display.shift = e.shiftKey;\n\n          if (eventInWidget(display, e)) {\n            if (!webkit) {\n              // Briefly turn off draggability, to allow widgets to do\n              // normal dragging things.\n              display.scroller.draggable = false;\n              setTimeout(function () {\n                return display.scroller.draggable = true;\n              }, 100);\n            }\n            return;\n          }\n          if (clickInGutter(cm, e)) {\n            return;\n          }\n          var pos = posFromMouse(cm, e),\n              button = e_button(e),\n              repeat = pos ? clickRepeat(pos, button) : \"single\";\n          window.focus();\n\n          // #3261: make sure, that we're not starting a second selection\n          if (button == 1 && cm.state.selectingText) {\n            cm.state.selectingText(e);\n          }\n\n          if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n            return;\n          }\n\n          if (button == 1) {\n            if (pos) {\n              leftButtonDown(cm, pos, repeat, e);\n            } else if (e_target(e) == display.scroller) {\n              e_preventDefault(e);\n            }\n          } else if (button == 2) {\n            if (pos) {\n              extendSelection(cm.doc, pos);\n            }\n            setTimeout(function () {\n              return display.input.focus();\n            }, 20);\n          } else if (button == 3) {\n            if (captureRightClick) {\n              onContextMenu(cm, e);\n            } else {\n              delayBlurEvent(cm);\n            }\n          }\n        }\n\n        function handleMappedButton(cm, button, pos, repeat, event) {\n          var name = \"Click\";\n          if (repeat == \"double\") {\n            name = \"Double\" + name;\n          } else if (repeat == \"triple\") {\n            name = \"Triple\" + name;\n          }\n          name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n          return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n            if (typeof bound == \"string\") {\n              bound = commands[bound];\n            }\n            if (!bound) {\n              return false;\n            }\n            var done = false;\n            try {\n              if (cm.isReadOnly()) {\n                cm.state.suppressEdits = true;\n              }\n              done = bound(cm, pos) != Pass;\n            } finally {\n              cm.state.suppressEdits = false;\n            }\n            return done;\n          });\n        }\n\n        function configureMouse(cm, repeat, event) {\n          var option = cm.getOption(\"configureMouse\");\n          var value = option ? option(cm, repeat, event) : {};\n          if (value.unit == null) {\n            var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n            value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n          }\n          if (value.extend == null || cm.doc.extend) {\n            value.extend = cm.doc.extend || event.shiftKey;\n          }\n          if (value.addNew == null) {\n            value.addNew = mac ? event.metaKey : event.ctrlKey;\n          }\n          if (value.moveOnDrag == null) {\n            value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n          }\n          return value;\n        }\n\n        function leftButtonDown(cm, pos, repeat, event) {\n          if (ie) {\n            setTimeout(bind(ensureFocus, cm), 0);\n          } else {\n            cm.curOp.focus = activeElt();\n          }\n\n          var behavior = configureMouse(cm, repeat, event);\n\n          var sel = cm.doc.sel,\n              contained;\n          if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n            leftButtonStartDrag(cm, event, pos, behavior);\n          } else {\n            leftButtonSelect(cm, event, pos, behavior);\n          }\n        }\n\n        // Start a text drag. When it ends, see if any dragging actually\n        // happen, and treat as a click if it didn't.\n        function leftButtonStartDrag(cm, event, pos, behavior) {\n          var display = cm.display,\n              moved = false;\n          var dragEnd = operation(cm, function (e) {\n            if (webkit) {\n              display.scroller.draggable = false;\n            }\n            cm.state.draggingText = false;\n            off(document, \"mouseup\", dragEnd);\n            off(document, \"mousemove\", mouseMove);\n            off(display.scroller, \"dragstart\", dragStart);\n            off(display.scroller, \"drop\", dragEnd);\n            if (!moved) {\n              e_preventDefault(e);\n              if (!behavior.addNew) {\n                extendSelection(cm.doc, pos, null, null, behavior.extend);\n              }\n              // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n              if (webkit || ie && ie_version == 9) {\n                setTimeout(function () {\n                  document.body.focus();display.input.focus();\n                }, 20);\n              } else {\n                display.input.focus();\n              }\n            }\n          });\n          var mouseMove = function mouseMove(e2) {\n            moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n          };\n          var dragStart = function dragStart() {\n            return moved = true;\n          };\n          // Let the drag handler handle this.\n          if (webkit) {\n            display.scroller.draggable = true;\n          }\n          cm.state.draggingText = dragEnd;\n          dragEnd.copy = !behavior.moveOnDrag;\n          // IE's approach to draggable\n          if (display.scroller.dragDrop) {\n            display.scroller.dragDrop();\n          }\n          on(document, \"mouseup\", dragEnd);\n          on(document, \"mousemove\", mouseMove);\n          on(display.scroller, \"dragstart\", dragStart);\n          on(display.scroller, \"drop\", dragEnd);\n\n          delayBlurEvent(cm);\n          setTimeout(function () {\n            return display.input.focus();\n          }, 20);\n        }\n\n        function rangeForUnit(cm, pos, unit) {\n          if (unit == \"char\") {\n            return new Range(pos, pos);\n          }\n          if (unit == \"word\") {\n            return cm.findWordAt(pos);\n          }\n          if (unit == \"line\") {\n            return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n          var result = unit(cm, pos);\n          return new Range(result.from, result.to);\n        }\n\n        // Normal selection, as opposed to text dragging.\n        function leftButtonSelect(cm, event, start, behavior) {\n          var display = cm.display,\n              doc = cm.doc;\n          e_preventDefault(event);\n\n          var ourRange,\n              ourIndex,\n              startSel = doc.sel,\n              ranges = startSel.ranges;\n          if (behavior.addNew && !behavior.extend) {\n            ourIndex = doc.sel.contains(start);\n            if (ourIndex > -1) {\n              ourRange = ranges[ourIndex];\n            } else {\n              ourRange = new Range(start, start);\n            }\n          } else {\n            ourRange = doc.sel.primary();\n            ourIndex = doc.sel.primIndex;\n          }\n\n          if (behavior.unit == \"rectangle\") {\n            if (!behavior.addNew) {\n              ourRange = new Range(start, start);\n            }\n            start = posFromMouse(cm, event, true, true);\n            ourIndex = -1;\n          } else {\n            var range$$1 = rangeForUnit(cm, start, behavior.unit);\n            if (behavior.extend) {\n              ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend);\n            } else {\n              ourRange = range$$1;\n            }\n          }\n\n          if (!behavior.addNew) {\n            ourIndex = 0;\n            setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n            startSel = doc.sel;\n          } else if (ourIndex == -1) {\n            ourIndex = ranges.length;\n            setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex), { scroll: false, origin: \"*mouse\" });\n          } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n            setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), { scroll: false, origin: \"*mouse\" });\n            startSel = doc.sel;\n          } else {\n            replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n          }\n\n          var lastPos = start;\n          function extendTo(pos) {\n            if (cmp(lastPos, pos) == 0) {\n              return;\n            }\n            lastPos = pos;\n\n            if (behavior.unit == \"rectangle\") {\n              var ranges = [],\n                  tabSize = cm.options.tabSize;\n              var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n              var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n              var left = Math.min(startCol, posCol),\n                  right = Math.max(startCol, posCol);\n              for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n                var text = getLine(doc, line).text,\n                    leftPos = findColumn(text, left, tabSize);\n                if (left == right) {\n                  ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n                } else if (text.length > leftPos) {\n                  ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n                }\n              }\n              if (!ranges.length) {\n                ranges.push(new Range(start, start));\n              }\n              setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), { origin: \"*mouse\", scroll: false });\n              cm.scrollIntoView(pos);\n            } else {\n              var oldRange = ourRange;\n              var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n              var anchor = oldRange.anchor,\n                  head;\n              if (cmp(range$$1.anchor, anchor) > 0) {\n                head = range$$1.head;\n                anchor = minPos(oldRange.from(), range$$1.anchor);\n              } else {\n                head = range$$1.anchor;\n                anchor = maxPos(oldRange.to(), range$$1.head);\n              }\n              var ranges$1 = startSel.ranges.slice(0);\n              ranges$1[ourIndex] = new Range(_clipPos(doc, anchor), head);\n              setSelection(doc, normalizeSelection(ranges$1, ourIndex), sel_mouse);\n            }\n          }\n\n          var editorSize = display.wrapper.getBoundingClientRect();\n          // Used to ensure timeout re-tries don't fire when another extend\n          // happened in the meantime (clearTimeout isn't reliable -- at\n          // least on Chrome, the timeouts still happen even when cleared,\n          // if the clear happens after their scheduled firing time).\n          var counter = 0;\n\n          function extend(e) {\n            var curCount = ++counter;\n            var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n            if (!cur) {\n              return;\n            }\n            if (cmp(cur, lastPos) != 0) {\n              cm.curOp.focus = activeElt();\n              extendTo(cur);\n              var visible = visibleLines(display, doc);\n              if (cur.line >= visible.to || cur.line < visible.from) {\n                setTimeout(operation(cm, function () {\n                  if (counter == curCount) {\n                    extend(e);\n                  }\n                }), 150);\n              }\n            } else {\n              var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n              if (outside) {\n                setTimeout(operation(cm, function () {\n                  if (counter != curCount) {\n                    return;\n                  }\n                  display.scroller.scrollTop += outside;\n                  extend(e);\n                }), 50);\n              }\n            }\n          }\n\n          function done(e) {\n            cm.state.selectingText = false;\n            counter = Infinity;\n            e_preventDefault(e);\n            display.input.focus();\n            off(document, \"mousemove\", move);\n            off(document, \"mouseup\", up);\n            doc.history.lastSelOrigin = null;\n          }\n\n          var move = operation(cm, function (e) {\n            if (!e_button(e)) {\n              done(e);\n            } else {\n              extend(e);\n            }\n          });\n          var up = operation(cm, done);\n          cm.state.selectingText = up;\n          on(document, \"mousemove\", move);\n          on(document, \"mouseup\", up);\n        }\n\n        // Determines whether an event happened in the gutter, and fires the\n        // handlers for the corresponding event.\n        function gutterEvent(cm, e, type, prevent) {\n          var mX, mY;\n          try {\n            mX = e.clientX;mY = e.clientY;\n          } catch (e) {\n            return false;\n          }\n          if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n            return false;\n          }\n          if (prevent) {\n            e_preventDefault(e);\n          }\n\n          var display = cm.display;\n          var lineBox = display.lineDiv.getBoundingClientRect();\n\n          if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n            return e_defaultPrevented(e);\n          }\n          mY -= lineBox.top - display.viewOffset;\n\n          for (var i = 0; i < cm.options.gutters.length; ++i) {\n            var g = display.gutters.childNodes[i];\n            if (g && g.getBoundingClientRect().right >= mX) {\n              var line = _lineAtHeight(cm.doc, mY);\n              var gutter = cm.options.gutters[i];\n              signal(cm, type, cm, line, gutter, e);\n              return e_defaultPrevented(e);\n            }\n          }\n        }\n\n        function clickInGutter(cm, e) {\n          return gutterEvent(cm, e, \"gutterClick\", true);\n        }\n\n        // CONTEXT MENU HANDLING\n\n        // To make the context menu work, we need to briefly unhide the\n        // textarea (making it as unobtrusive as possible) to let the\n        // right-click take effect on it.\n        function onContextMenu(cm, e) {\n          if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n            return;\n          }\n          if (signalDOMEvent(cm, e, \"contextmenu\")) {\n            return;\n          }\n          cm.display.input.onContextMenu(e);\n        }\n\n        function contextMenuInGutter(cm, e) {\n          if (!hasHandler(cm, \"gutterContextMenu\")) {\n            return false;\n          }\n          return gutterEvent(cm, e, \"gutterContextMenu\", false);\n        }\n\n        function themeChanged(cm) {\n          cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n          clearCaches(cm);\n        }\n\n        var Init = { toString: function toString() {\n            return \"CodeMirror.Init\";\n          } };\n\n        var defaults = {};\n        var optionHandlers = {};\n\n        function defineOptions(CodeMirror) {\n          var optionHandlers = CodeMirror.optionHandlers;\n\n          function option(name, deflt, handle, notOnInit) {\n            CodeMirror.defaults[name] = deflt;\n            if (handle) {\n              optionHandlers[name] = notOnInit ? function (cm, val, old) {\n                if (old != Init) {\n                  handle(cm, val, old);\n                }\n              } : handle;\n            }\n          }\n\n          CodeMirror.defineOption = option;\n\n          // Passed to option handlers when there is no old value.\n          CodeMirror.Init = Init;\n\n          // These two are, on init, called from the constructor because they\n          // have to be initialized before the editor can start at all.\n          option(\"value\", \"\", function (cm, val) {\n            return cm.setValue(val);\n          }, true);\n          option(\"mode\", null, function (cm, val) {\n            cm.doc.modeOption = val;\n            loadMode(cm);\n          }, true);\n\n          option(\"indentUnit\", 2, loadMode, true);\n          option(\"indentWithTabs\", false);\n          option(\"smartIndent\", true);\n          option(\"tabSize\", 4, function (cm) {\n            resetModeState(cm);\n            clearCaches(cm);\n            regChange(cm);\n          }, true);\n          option(\"lineSeparator\", null, function (cm, val) {\n            cm.doc.lineSep = val;\n            if (!val) {\n              return;\n            }\n            var newBreaks = [],\n                lineNo = cm.doc.first;\n            cm.doc.iter(function (line) {\n              for (var pos = 0;;) {\n                var found = line.text.indexOf(val, pos);\n                if (found == -1) {\n                  break;\n                }\n                pos = found + val.length;\n                newBreaks.push(Pos(lineNo, found));\n              }\n              lineNo++;\n            });\n            for (var i = newBreaks.length - 1; i >= 0; i--) {\n              _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n            }\n          });\n          option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function (cm, val, old) {\n            cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n            if (old != Init) {\n              cm.refresh();\n            }\n          });\n          option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n            return cm.refresh();\n          }, true);\n          option(\"electricChars\", true);\n          option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n            throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n          }, true);\n          option(\"spellcheck\", false, function (cm, val) {\n            return cm.getInputField().spellcheck = val;\n          }, true);\n          option(\"rtlMoveVisually\", !windows);\n          option(\"wholeLineUpdateBefore\", true);\n\n          option(\"theme\", \"default\", function (cm) {\n            themeChanged(cm);\n            guttersChanged(cm);\n          }, true);\n          option(\"keyMap\", \"default\", function (cm, val, old) {\n            var next = getKeyMap(val);\n            var prev = old != Init && getKeyMap(old);\n            if (prev && prev.detach) {\n              prev.detach(cm, next);\n            }\n            if (next.attach) {\n              next.attach(cm, prev || null);\n            }\n          });\n          option(\"extraKeys\", null);\n          option(\"configureMouse\", null);\n\n          option(\"lineWrapping\", false, wrappingChanged, true);\n          option(\"gutters\", [], function (cm) {\n            setGuttersForLineNumbers(cm.options);\n            guttersChanged(cm);\n          }, true);\n          option(\"fixedGutter\", true, function (cm, val) {\n            cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n            cm.refresh();\n          }, true);\n          option(\"coverGutterNextToScrollbar\", false, function (cm) {\n            return updateScrollbars(cm);\n          }, true);\n          option(\"scrollbarStyle\", \"native\", function (cm) {\n            initScrollbars(cm);\n            updateScrollbars(cm);\n            cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n            cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n          }, true);\n          option(\"lineNumbers\", false, function (cm) {\n            setGuttersForLineNumbers(cm.options);\n            guttersChanged(cm);\n          }, true);\n          option(\"firstLineNumber\", 1, guttersChanged, true);\n          option(\"lineNumberFormatter\", function (integer) {\n            return integer;\n          }, guttersChanged, true);\n          option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n          option(\"resetSelectionOnContextMenu\", true);\n          option(\"lineWiseCopyCut\", true);\n          option(\"pasteLinesPerSelection\", true);\n\n          option(\"readOnly\", false, function (cm, val) {\n            if (val == \"nocursor\") {\n              onBlur(cm);\n              cm.display.input.blur();\n            }\n            cm.display.input.readOnlyChanged(val);\n          });\n          option(\"disableInput\", false, function (cm, val) {\n            if (!val) {\n              cm.display.input.reset();\n            }\n          }, true);\n          option(\"dragDrop\", true, dragDropChanged);\n          option(\"allowDropFileTypes\", null);\n\n          option(\"cursorBlinkRate\", 530);\n          option(\"cursorScrollMargin\", 0);\n          option(\"cursorHeight\", 1, updateSelection, true);\n          option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n          option(\"workTime\", 100);\n          option(\"workDelay\", 100);\n          option(\"flattenSpans\", true, resetModeState, true);\n          option(\"addModeClass\", false, resetModeState, true);\n          option(\"pollInterval\", 100);\n          option(\"undoDepth\", 200, function (cm, val) {\n            return cm.doc.history.undoDepth = val;\n          });\n          option(\"historyEventDelay\", 1250);\n          option(\"viewportMargin\", 10, function (cm) {\n            return cm.refresh();\n          }, true);\n          option(\"maxHighlightLength\", 10000, resetModeState, true);\n          option(\"moveInputWithCursor\", true, function (cm, val) {\n            if (!val) {\n              cm.display.input.resetPosition();\n            }\n          });\n\n          option(\"tabindex\", null, function (cm, val) {\n            return cm.display.input.getField().tabIndex = val || \"\";\n          });\n          option(\"autofocus\", null);\n          option(\"direction\", \"ltr\", function (cm, val) {\n            return cm.doc.setDirection(val);\n          }, true);\n        }\n\n        function guttersChanged(cm) {\n          updateGutters(cm);\n          regChange(cm);\n          alignHorizontally(cm);\n        }\n\n        function dragDropChanged(cm, value, old) {\n          var wasOn = old && old != Init;\n          if (!value != !wasOn) {\n            var funcs = cm.display.dragFunctions;\n            var toggle = value ? on : off;\n            toggle(cm.display.scroller, \"dragstart\", funcs.start);\n            toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n            toggle(cm.display.scroller, \"dragover\", funcs.over);\n            toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n            toggle(cm.display.scroller, \"drop\", funcs.drop);\n          }\n        }\n\n        function wrappingChanged(cm) {\n          if (cm.options.lineWrapping) {\n            addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            cm.display.sizer.style.minWidth = \"\";\n            cm.display.sizerWidth = null;\n          } else {\n            rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n            findMaxLine(cm);\n          }\n          estimateLineHeights(cm);\n          regChange(cm);\n          clearCaches(cm);\n          setTimeout(function () {\n            return updateScrollbars(cm);\n          }, 100);\n        }\n\n        // A CodeMirror instance represents an editor. This is the object\n        // that user code is usually dealing with.\n\n        function CodeMirror$1(place, options) {\n          var this$1 = this;\n\n          if (!(this instanceof CodeMirror$1)) {\n            return new CodeMirror$1(place, options);\n          }\n\n          this.options = options = options ? copyObj(options) : {};\n          // Determine effective options based on given values and defaults.\n          copyObj(defaults, options, false);\n          setGuttersForLineNumbers(options);\n\n          var doc = options.value;\n          if (typeof doc == \"string\") {\n            doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n          }\n          this.doc = doc;\n\n          var input = new CodeMirror$1.inputStyles[options.inputStyle](this);\n          var display = this.display = new Display(place, doc, input);\n          display.wrapper.CodeMirror = this;\n          updateGutters(this);\n          themeChanged(this);\n          if (options.lineWrapping) {\n            this.display.wrapper.className += \" CodeMirror-wrap\";\n          }\n          initScrollbars(this);\n\n          this.state = {\n            keyMaps: [], // stores maps added by addKeyMap\n            overlays: [], // highlighting overlays, as added by addOverlay\n            modeGen: 0, // bumped when mode/overlay changes, used to invalidate highlighting info\n            overwrite: false,\n            delayingBlurEvent: false,\n            focused: false,\n            suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n            pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n            selectingText: false,\n            draggingText: false,\n            highlight: new Delayed(), // stores highlight worker timeout\n            keySeq: null, // Unfinished key sequence\n            specialChars: null\n          };\n\n          if (options.autofocus && !mobile) {\n            display.input.focus();\n          }\n\n          // Override magic textarea content restore that IE sometimes does\n          // on our hidden textarea on reload\n          if (ie && ie_version < 11) {\n            setTimeout(function () {\n              return this$1.display.input.reset(true);\n            }, 20);\n          }\n\n          registerEventHandlers(this);\n          ensureGlobalHandlers();\n\n          _startOperation(this);\n          this.curOp.forceUpdate = true;\n          attachDoc(this, doc);\n\n          if (options.autofocus && !mobile || this.hasFocus()) {\n            setTimeout(bind(onFocus, this), 20);\n          } else {\n            onBlur(this);\n          }\n\n          for (var opt in optionHandlers) {\n            if (optionHandlers.hasOwnProperty(opt)) {\n              optionHandlers[opt](this$1, options[opt], Init);\n            }\n          }\n          maybeUpdateLineNumberWidth(this);\n          if (options.finishInit) {\n            options.finishInit(this);\n          }\n          for (var i = 0; i < initHooks.length; ++i) {\n            initHooks[i](this$1);\n          }\n          _endOperation(this);\n          // Suppress optimizelegibility in Webkit, since it breaks text\n          // measuring on line wrapping boundaries.\n          if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n            display.lineDiv.style.textRendering = \"auto\";\n          }\n        }\n\n        // The default configuration options.\n        CodeMirror$1.defaults = defaults;\n        // Functions to run when options are changed.\n        CodeMirror$1.optionHandlers = optionHandlers;\n\n        // Attach the necessary event handlers when initializing the editor\n        function registerEventHandlers(cm) {\n          var d = cm.display;\n          on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n          // Older IE's will not fire a second mousedown for a double click\n          if (ie && ie_version < 11) {\n            on(d.scroller, \"dblclick\", operation(cm, function (e) {\n              if (signalDOMEvent(cm, e)) {\n                return;\n              }\n              var pos = posFromMouse(cm, e);\n              if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n                return;\n              }\n              e_preventDefault(e);\n              var word = cm.findWordAt(pos);\n              extendSelection(cm.doc, word.anchor, word.head);\n            }));\n          } else {\n            on(d.scroller, \"dblclick\", function (e) {\n              return signalDOMEvent(cm, e) || e_preventDefault(e);\n            });\n          }\n          // Some browsers fire contextmenu *after* opening the menu, at\n          // which point we can't mess with it anymore. Context menu is\n          // handled in onMouseDown for these browsers.\n          if (!captureRightClick) {\n            on(d.scroller, \"contextmenu\", function (e) {\n              return onContextMenu(cm, e);\n            });\n          }\n\n          // Used to suppress mouse event handling when a touch happens\n          var touchFinished,\n              prevTouch = { end: 0 };\n          function finishTouch() {\n            if (d.activeTouch) {\n              touchFinished = setTimeout(function () {\n                return d.activeTouch = null;\n              }, 1000);\n              prevTouch = d.activeTouch;\n              prevTouch.end = +new Date();\n            }\n          }\n          function isMouseLikeTouchEvent(e) {\n            if (e.touches.length != 1) {\n              return false;\n            }\n            var touch = e.touches[0];\n            return touch.radiusX <= 1 && touch.radiusY <= 1;\n          }\n          function farAway(touch, other) {\n            if (other.left == null) {\n              return true;\n            }\n            var dx = other.left - touch.left,\n                dy = other.top - touch.top;\n            return dx * dx + dy * dy > 20 * 20;\n          }\n          on(d.scroller, \"touchstart\", function (e) {\n            if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {\n              d.input.ensurePolled();\n              clearTimeout(touchFinished);\n              var now = +new Date();\n              d.activeTouch = { start: now, moved: false,\n                prev: now - prevTouch.end <= 300 ? prevTouch : null };\n              if (e.touches.length == 1) {\n                d.activeTouch.left = e.touches[0].pageX;\n                d.activeTouch.top = e.touches[0].pageY;\n              }\n            }\n          });\n          on(d.scroller, \"touchmove\", function () {\n            if (d.activeTouch) {\n              d.activeTouch.moved = true;\n            }\n          });\n          on(d.scroller, \"touchend\", function (e) {\n            var touch = d.activeTouch;\n            if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n              var pos = cm.coordsChar(d.activeTouch, \"page\"),\n                  range;\n              if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n                {\n                  range = new Range(pos, pos);\n                } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n                {\n                  range = cm.findWordAt(pos);\n                } else // Triple tap\n                {\n                  range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n                }\n              cm.setSelection(range.anchor, range.head);\n              cm.focus();\n              e_preventDefault(e);\n            }\n            finishTouch();\n          });\n          on(d.scroller, \"touchcancel\", finishTouch);\n\n          // Sync scrolling between fake scrollbars and real scrollable\n          // area, ensure viewport is updated when scrolling.\n          on(d.scroller, \"scroll\", function () {\n            if (d.scroller.clientHeight) {\n              updateScrollTop(cm, d.scroller.scrollTop);\n              setScrollLeft(cm, d.scroller.scrollLeft, true);\n              signal(cm, \"scroll\", cm);\n            }\n          });\n\n          // Listen to wheel events in order to try and update the viewport on time.\n          on(d.scroller, \"mousewheel\", function (e) {\n            return onScrollWheel(cm, e);\n          });\n          on(d.scroller, \"DOMMouseScroll\", function (e) {\n            return onScrollWheel(cm, e);\n          });\n\n          // Prevent wrapper from ever scrolling\n          on(d.wrapper, \"scroll\", function () {\n            return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n          });\n\n          d.dragFunctions = {\n            enter: function enter(e) {\n              if (!signalDOMEvent(cm, e)) {\n                e_stop(e);\n              }\n            },\n            over: function over(e) {\n              if (!signalDOMEvent(cm, e)) {\n                onDragOver(cm, e);e_stop(e);\n              }\n            },\n            start: function start(e) {\n              return onDragStart(cm, e);\n            },\n            drop: operation(cm, onDrop),\n            leave: function leave(e) {\n              if (!signalDOMEvent(cm, e)) {\n                clearDragCursor(cm);\n              }\n            }\n          };\n\n          var inp = d.input.getField();\n          on(inp, \"keyup\", function (e) {\n            return onKeyUp.call(cm, e);\n          });\n          on(inp, \"keydown\", operation(cm, onKeyDown));\n          on(inp, \"keypress\", operation(cm, onKeyPress));\n          on(inp, \"focus\", function (e) {\n            return onFocus(cm, e);\n          });\n          on(inp, \"blur\", function (e) {\n            return onBlur(cm, e);\n          });\n        }\n\n        var initHooks = [];\n        CodeMirror$1.defineInitHook = function (f) {\n          return initHooks.push(f);\n        };\n\n        // Indent the given line. The how parameter can be \"smart\",\n        // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n        // (typically set to true for forced single-line indents), empty\n        // lines are not indented, and places where the mode returns Pass\n        // are left alone.\n        function indentLine(cm, n, how, aggressive) {\n          var doc = cm.doc,\n              state;\n          if (how == null) {\n            how = \"add\";\n          }\n          if (how == \"smart\") {\n            // Fall back to \"prev\" when the mode doesn't have an indentation\n            // method.\n            if (!doc.mode.indent) {\n              how = \"prev\";\n            } else {\n              state = getContextBefore(cm, n).state;\n            }\n          }\n\n          var tabSize = cm.options.tabSize;\n          var line = getLine(doc, n),\n              curSpace = countColumn(line.text, null, tabSize);\n          if (line.stateAfter) {\n            line.stateAfter = null;\n          }\n          var curSpaceString = line.text.match(/^\\s*/)[0],\n              indentation;\n          if (!aggressive && !/\\S/.test(line.text)) {\n            indentation = 0;\n            how = \"not\";\n          } else if (how == \"smart\") {\n            indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n            if (indentation == Pass || indentation > 150) {\n              if (!aggressive) {\n                return;\n              }\n              how = \"prev\";\n            }\n          }\n          if (how == \"prev\") {\n            if (n > doc.first) {\n              indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n            } else {\n              indentation = 0;\n            }\n          } else if (how == \"add\") {\n            indentation = curSpace + cm.options.indentUnit;\n          } else if (how == \"subtract\") {\n            indentation = curSpace - cm.options.indentUnit;\n          } else if (typeof how == \"number\") {\n            indentation = curSpace + how;\n          }\n          indentation = Math.max(0, indentation);\n\n          var indentString = \"\",\n              pos = 0;\n          if (cm.options.indentWithTabs) {\n            for (var i = Math.floor(indentation / tabSize); i; --i) {\n              pos += tabSize;indentString += \"\\t\";\n            }\n          }\n          if (pos < indentation) {\n            indentString += spaceStr(indentation - pos);\n          }\n\n          if (indentString != curSpaceString) {\n            _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n            line.stateAfter = null;\n            return true;\n          } else {\n            // Ensure that, if the cursor was in the whitespace at the start\n            // of the line, it is moved to the end of that space.\n            for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n              var range = doc.sel.ranges[i$1];\n              if (range.head.line == n && range.head.ch < curSpaceString.length) {\n                var pos$1 = Pos(n, curSpaceString.length);\n                replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n                break;\n              }\n            }\n          }\n        }\n\n        // This will be set to a {lineWise: bool, text: [string]} object, so\n        // that, when pasting, we know what kind of selections the copied\n        // text was made out of.\n        var lastCopied = null;\n\n        function setLastCopied(newLastCopied) {\n          lastCopied = newLastCopied;\n        }\n\n        function applyTextInput(cm, inserted, deleted, sel, origin) {\n          var doc = cm.doc;\n          cm.display.shift = false;\n          if (!sel) {\n            sel = doc.sel;\n          }\n\n          var paste = cm.state.pasteIncoming || origin == \"paste\";\n          var textLines = splitLinesAuto(inserted),\n              multiPaste = null;\n          // When pasing N lines into N selections, insert one line per selection\n          if (paste && sel.ranges.length > 1) {\n            if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n              if (sel.ranges.length % lastCopied.text.length == 0) {\n                multiPaste = [];\n                for (var i = 0; i < lastCopied.text.length; i++) {\n                  multiPaste.push(doc.splitLines(lastCopied.text[i]));\n                }\n              }\n            } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n              multiPaste = map(textLines, function (l) {\n                return [l];\n              });\n            }\n          }\n\n          var updateInput;\n          // Normal behavior is to insert the new text into every selection\n          for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n            var range$$1 = sel.ranges[i$1];\n            var from = range$$1.from(),\n                to = range$$1.to();\n            if (range$$1.empty()) {\n              if (deleted && deleted > 0) // Handle deletion\n                {\n                  from = Pos(from.line, from.ch - deleted);\n                } else if (cm.state.overwrite && !paste) // Handle overwrite\n                {\n                  to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n                } else if (lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n                from = to = Pos(from.line, 0);\n              }\n            }\n            updateInput = cm.curOp.updateInput;\n            var changeEvent = { from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n              origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\") };\n            makeChange(cm.doc, changeEvent);\n            signalLater(cm, \"inputRead\", cm, changeEvent);\n          }\n          if (inserted && !paste) {\n            triggerElectric(cm, inserted);\n          }\n\n          ensureCursorVisible(cm);\n          cm.curOp.updateInput = updateInput;\n          cm.curOp.typing = true;\n          cm.state.pasteIncoming = cm.state.cutIncoming = false;\n        }\n\n        function handlePaste(e, cm) {\n          var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n          if (pasted) {\n            e.preventDefault();\n            if (!cm.isReadOnly() && !cm.options.disableInput) {\n              runInOp(cm, function () {\n                return applyTextInput(cm, pasted, 0, null, \"paste\");\n              });\n            }\n            return true;\n          }\n        }\n\n        function triggerElectric(cm, inserted) {\n          // When an 'electric' character is inserted, immediately trigger a reindent\n          if (!cm.options.electricChars || !cm.options.smartIndent) {\n            return;\n          }\n          var sel = cm.doc.sel;\n\n          for (var i = sel.ranges.length - 1; i >= 0; i--) {\n            var range$$1 = sel.ranges[i];\n            if (range$$1.head.ch > 100 || i && sel.ranges[i - 1].head.line == range$$1.head.line) {\n              continue;\n            }\n            var mode = cm.getModeAt(range$$1.head);\n            var indented = false;\n            if (mode.electricChars) {\n              for (var j = 0; j < mode.electricChars.length; j++) {\n                if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n                  indented = indentLine(cm, range$$1.head.line, \"smart\");\n                  break;\n                }\n              }\n            } else if (mode.electricInput) {\n              if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch))) {\n                indented = indentLine(cm, range$$1.head.line, \"smart\");\n              }\n            }\n            if (indented) {\n              signalLater(cm, \"electricInput\", cm, range$$1.head.line);\n            }\n          }\n        }\n\n        function copyableRanges(cm) {\n          var text = [],\n              ranges = [];\n          for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n            var line = cm.doc.sel.ranges[i].head.line;\n            var lineRange = { anchor: Pos(line, 0), head: Pos(line + 1, 0) };\n            ranges.push(lineRange);\n            text.push(cm.getRange(lineRange.anchor, lineRange.head));\n          }\n          return { text: text, ranges: ranges };\n        }\n\n        function disableBrowserMagic(field, spellcheck) {\n          field.setAttribute(\"autocorrect\", \"off\");\n          field.setAttribute(\"autocapitalize\", \"off\");\n          field.setAttribute(\"spellcheck\", !!spellcheck);\n        }\n\n        function hiddenTextarea() {\n          var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n          var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n          // The textarea is kept positioned near the cursor to prevent the\n          // fact that it'll be scrolled into view on input from scrolling\n          // our fake cursor out of view. On webkit, when wrap=off, paste is\n          // very slow. So make the area wide instead.\n          if (webkit) {\n            te.style.width = \"1000px\";\n          } else {\n            te.setAttribute(\"wrap\", \"off\");\n          }\n          // If border: 0; -- iOS fails to open keyboard (issue #1287)\n          if (ios) {\n            te.style.border = \"1px solid black\";\n          }\n          disableBrowserMagic(te);\n          return div;\n        }\n\n        // The publicly visible API. Note that methodOp(f) means\n        // 'wrap f in an operation, performed on its `this` parameter'.\n\n        // This is not the complete set of editor methods. Most of the\n        // methods defined on the Doc type are also injected into\n        // CodeMirror.prototype, for backwards compatibility and\n        // convenience.\n\n        var addEditorMethods = function addEditorMethods(CodeMirror) {\n          var optionHandlers = CodeMirror.optionHandlers;\n\n          var helpers = CodeMirror.helpers = {};\n\n          CodeMirror.prototype = {\n            constructor: CodeMirror,\n            focus: function focus() {\n              window.focus();this.display.input.focus();\n            },\n\n            setOption: function setOption(option, value) {\n              var options = this.options,\n                  old = options[option];\n              if (options[option] == value && option != \"mode\") {\n                return;\n              }\n              options[option] = value;\n              if (optionHandlers.hasOwnProperty(option)) {\n                operation(this, optionHandlers[option])(this, value, old);\n              }\n              signal(this, \"optionChange\", this, option);\n            },\n\n            getOption: function getOption(option) {\n              return this.options[option];\n            },\n            getDoc: function getDoc() {\n              return this.doc;\n            },\n\n            addKeyMap: function addKeyMap(map$$1, bottom) {\n              this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n            },\n            removeKeyMap: function removeKeyMap(map$$1) {\n              var maps = this.state.keyMaps;\n              for (var i = 0; i < maps.length; ++i) {\n                if (maps[i] == map$$1 || maps[i].name == map$$1) {\n                  maps.splice(i, 1);\n                  return true;\n                }\n              }\n            },\n\n            addOverlay: methodOp(function (spec, options) {\n              var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n              if (mode.startState) {\n                throw new Error(\"Overlays may not be stateful.\");\n              }\n              insertSorted(this.state.overlays, { mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                priority: options && options.priority || 0 }, function (overlay) {\n                return overlay.priority;\n              });\n              this.state.modeGen++;\n              regChange(this);\n            }),\n            removeOverlay: methodOp(function (spec) {\n              var this$1 = this;\n\n              var overlays = this.state.overlays;\n              for (var i = 0; i < overlays.length; ++i) {\n                var cur = overlays[i].modeSpec;\n                if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n                  overlays.splice(i, 1);\n                  this$1.state.modeGen++;\n                  regChange(this$1);\n                  return;\n                }\n              }\n            }),\n\n            indentLine: methodOp(function (n, dir, aggressive) {\n              if (typeof dir != \"string\" && typeof dir != \"number\") {\n                if (dir == null) {\n                  dir = this.options.smartIndent ? \"smart\" : \"prev\";\n                } else {\n                  dir = dir ? \"add\" : \"subtract\";\n                }\n              }\n              if (isLine(this.doc, n)) {\n                indentLine(this, n, dir, aggressive);\n              }\n            }),\n            indentSelection: methodOp(function (how) {\n              var this$1 = this;\n\n              var ranges = this.doc.sel.ranges,\n                  end = -1;\n              for (var i = 0; i < ranges.length; i++) {\n                var range$$1 = ranges[i];\n                if (!range$$1.empty()) {\n                  var from = range$$1.from(),\n                      to = range$$1.to();\n                  var start = Math.max(end, from.line);\n                  end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n                  for (var j = start; j < end; ++j) {\n                    indentLine(this$1, j, how);\n                  }\n                  var newRanges = this$1.doc.sel.ranges;\n                  if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n                    replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n                  }\n                } else if (range$$1.head.line > end) {\n                  indentLine(this$1, range$$1.head.line, how, true);\n                  end = range$$1.head.line;\n                  if (i == this$1.doc.sel.primIndex) {\n                    ensureCursorVisible(this$1);\n                  }\n                }\n              }\n            }),\n\n            // Fetch the parser token for a given character. Useful for hacks\n            // that want to inspect the mode state (say, for completion).\n            getTokenAt: function getTokenAt(pos, precise) {\n              return takeToken(this, pos, precise);\n            },\n\n            getLineTokens: function getLineTokens(line, precise) {\n              return takeToken(this, Pos(line), precise, true);\n            },\n\n            getTokenTypeAt: function getTokenTypeAt(pos) {\n              pos = _clipPos(this.doc, pos);\n              var styles = getLineStyles(this, getLine(this.doc, pos.line));\n              var before = 0,\n                  after = (styles.length - 1) / 2,\n                  ch = pos.ch;\n              var type;\n              if (ch == 0) {\n                type = styles[2];\n              } else {\n                for (;;) {\n                  var mid = before + after >> 1;\n                  if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n                    after = mid;\n                  } else if (styles[mid * 2 + 1] < ch) {\n                    before = mid + 1;\n                  } else {\n                    type = styles[mid * 2 + 2];break;\n                  }\n                }\n              }\n              var cut = type ? type.indexOf(\"overlay \") : -1;\n              return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n            },\n\n            getModeAt: function getModeAt(pos) {\n              var mode = this.doc.mode;\n              if (!mode.innerMode) {\n                return mode;\n              }\n              return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n            },\n\n            getHelper: function getHelper(pos, type) {\n              return this.getHelpers(pos, type)[0];\n            },\n\n            getHelpers: function getHelpers(pos, type) {\n              var this$1 = this;\n\n              var found = [];\n              if (!helpers.hasOwnProperty(type)) {\n                return found;\n              }\n              var help = helpers[type],\n                  mode = this.getModeAt(pos);\n              if (typeof mode[type] == \"string\") {\n                if (help[mode[type]]) {\n                  found.push(help[mode[type]]);\n                }\n              } else if (mode[type]) {\n                for (var i = 0; i < mode[type].length; i++) {\n                  var val = help[mode[type][i]];\n                  if (val) {\n                    found.push(val);\n                  }\n                }\n              } else if (mode.helperType && help[mode.helperType]) {\n                found.push(help[mode.helperType]);\n              } else if (help[mode.name]) {\n                found.push(help[mode.name]);\n              }\n              for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n                var cur = help._global[i$1];\n                if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1) {\n                  found.push(cur.val);\n                }\n              }\n              return found;\n            },\n\n            getStateAfter: function getStateAfter(line, precise) {\n              var doc = this.doc;\n              line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n              return getContextBefore(this, line + 1, precise).state;\n            },\n\n            cursorCoords: function cursorCoords(start, mode) {\n              var pos,\n                  range$$1 = this.doc.sel.primary();\n              if (start == null) {\n                pos = range$$1.head;\n              } else if ((typeof start === \"undefined\" ? \"undefined\" : _typeof(start)) == \"object\") {\n                pos = _clipPos(this.doc, start);\n              } else {\n                pos = start ? range$$1.from() : range$$1.to();\n              }\n              return _cursorCoords(this, pos, mode || \"page\");\n            },\n\n            charCoords: function charCoords(pos, mode) {\n              return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n            },\n\n            coordsChar: function coordsChar(coords, mode) {\n              coords = fromCoordSystem(this, coords, mode || \"page\");\n              return _coordsChar(this, coords.left, coords.top);\n            },\n\n            lineAtHeight: function lineAtHeight(height, mode) {\n              height = fromCoordSystem(this, { top: height, left: 0 }, mode || \"page\").top;\n              return _lineAtHeight(this.doc, height + this.display.viewOffset);\n            },\n            heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n              var end = false,\n                  lineObj;\n              if (typeof line == \"number\") {\n                var last = this.doc.first + this.doc.size - 1;\n                if (line < this.doc.first) {\n                  line = this.doc.first;\n                } else if (line > last) {\n                  line = last;end = true;\n                }\n                lineObj = getLine(this.doc, line);\n              } else {\n                lineObj = line;\n              }\n              return intoCoordSystem(this, lineObj, { top: 0, left: 0 }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n            },\n\n            defaultTextHeight: function defaultTextHeight() {\n              return textHeight(this.display);\n            },\n            defaultCharWidth: function defaultCharWidth() {\n              return charWidth(this.display);\n            },\n\n            getViewport: function getViewport() {\n              return { from: this.display.viewFrom, to: this.display.viewTo };\n            },\n\n            addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n              var display = this.display;\n              pos = _cursorCoords(this, _clipPos(this.doc, pos));\n              var top = pos.bottom,\n                  left = pos.left;\n              node.style.position = \"absolute\";\n              node.setAttribute(\"cm-ignore-events\", \"true\");\n              this.display.input.setUneditable(node);\n              display.sizer.appendChild(node);\n              if (vert == \"over\") {\n                top = pos.top;\n              } else if (vert == \"above\" || vert == \"near\") {\n                var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n                    hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n                // Default to positioning above (if specified and possible); otherwise default to positioning below\n                if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n                  top = pos.top - node.offsetHeight;\n                } else if (pos.bottom + node.offsetHeight <= vspace) {\n                  top = pos.bottom;\n                }\n                if (left + node.offsetWidth > hspace) {\n                  left = hspace - node.offsetWidth;\n                }\n              }\n              node.style.top = top + \"px\";\n              node.style.left = node.style.right = \"\";\n              if (horiz == \"right\") {\n                left = display.sizer.clientWidth - node.offsetWidth;\n                node.style.right = \"0px\";\n              } else {\n                if (horiz == \"left\") {\n                  left = 0;\n                } else if (horiz == \"middle\") {\n                  left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n                }\n                node.style.left = left + \"px\";\n              }\n              if (scroll) {\n                scrollIntoView(this, { left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight });\n              }\n            },\n\n            triggerOnKeyDown: methodOp(onKeyDown),\n            triggerOnKeyPress: methodOp(onKeyPress),\n            triggerOnKeyUp: onKeyUp,\n            triggerOnMouseDown: methodOp(onMouseDown),\n\n            execCommand: function execCommand(cmd) {\n              if (commands.hasOwnProperty(cmd)) {\n                return commands[cmd].call(null, this);\n              }\n            },\n\n            triggerElectric: methodOp(function (text) {\n              triggerElectric(this, text);\n            }),\n\n            findPosH: function findPosH(from, amount, unit, visually) {\n              var this$1 = this;\n\n              var dir = 1;\n              if (amount < 0) {\n                dir = -1;amount = -amount;\n              }\n              var cur = _clipPos(this.doc, from);\n              for (var i = 0; i < amount; ++i) {\n                cur = _findPosH(this$1.doc, cur, dir, unit, visually);\n                if (cur.hitSide) {\n                  break;\n                }\n              }\n              return cur;\n            },\n\n            moveH: methodOp(function (dir, unit) {\n              var this$1 = this;\n\n              this.extendSelectionsBy(function (range$$1) {\n                if (this$1.display.shift || this$1.doc.extend || range$$1.empty()) {\n                  return _findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually);\n                } else {\n                  return dir < 0 ? range$$1.from() : range$$1.to();\n                }\n              }, sel_move);\n            }),\n\n            deleteH: methodOp(function (dir, unit) {\n              var sel = this.doc.sel,\n                  doc = this.doc;\n              if (sel.somethingSelected()) {\n                doc.replaceSelection(\"\", null, \"+delete\");\n              } else {\n                deleteNearSelection(this, function (range$$1) {\n                  var other = _findPosH(doc, range$$1.head, dir, unit, false);\n                  return dir < 0 ? { from: other, to: range$$1.head } : { from: range$$1.head, to: other };\n                });\n              }\n            }),\n\n            findPosV: function findPosV(from, amount, unit, goalColumn) {\n              var this$1 = this;\n\n              var dir = 1,\n                  x = goalColumn;\n              if (amount < 0) {\n                dir = -1;amount = -amount;\n              }\n              var cur = _clipPos(this.doc, from);\n              for (var i = 0; i < amount; ++i) {\n                var coords = _cursorCoords(this$1, cur, \"div\");\n                if (x == null) {\n                  x = coords.left;\n                } else {\n                  coords.left = x;\n                }\n                cur = _findPosV(this$1, coords, dir, unit);\n                if (cur.hitSide) {\n                  break;\n                }\n              }\n              return cur;\n            },\n\n            moveV: methodOp(function (dir, unit) {\n              var this$1 = this;\n\n              var doc = this.doc,\n                  goals = [];\n              var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n              doc.extendSelectionsBy(function (range$$1) {\n                if (collapse) {\n                  return dir < 0 ? range$$1.from() : range$$1.to();\n                }\n                var headPos = _cursorCoords(this$1, range$$1.head, \"div\");\n                if (range$$1.goalColumn != null) {\n                  headPos.left = range$$1.goalColumn;\n                }\n                goals.push(headPos.left);\n                var pos = _findPosV(this$1, headPos, dir, unit);\n                if (unit == \"page\" && range$$1 == doc.sel.primary()) {\n                  addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n                }\n                return pos;\n              }, sel_move);\n              if (goals.length) {\n                for (var i = 0; i < doc.sel.ranges.length; i++) {\n                  doc.sel.ranges[i].goalColumn = goals[i];\n                }\n              }\n            }),\n\n            // Find the word at the given position (as returned by coordsChar).\n            findWordAt: function findWordAt(pos) {\n              var doc = this.doc,\n                  line = getLine(doc, pos.line).text;\n              var start = pos.ch,\n                  end = pos.ch;\n              if (line) {\n                var helper = this.getHelper(pos, \"wordChars\");\n                if ((pos.sticky == \"before\" || end == line.length) && start) {\n                  --start;\n                } else {\n                  ++end;\n                }\n                var startChar = line.charAt(start);\n                var check = isWordChar(startChar, helper) ? function (ch) {\n                  return isWordChar(ch, helper);\n                } : /\\s/.test(startChar) ? function (ch) {\n                  return (/\\s/.test(ch)\n                  );\n                } : function (ch) {\n                  return !/\\s/.test(ch) && !isWordChar(ch);\n                };\n                while (start > 0 && check(line.charAt(start - 1))) {\n                  --start;\n                }\n                while (end < line.length && check(line.charAt(end))) {\n                  ++end;\n                }\n              }\n              return new Range(Pos(pos.line, start), Pos(pos.line, end));\n            },\n\n            toggleOverwrite: function toggleOverwrite(value) {\n              if (value != null && value == this.state.overwrite) {\n                return;\n              }\n              if (this.state.overwrite = !this.state.overwrite) {\n                addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n              } else {\n                rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n              }\n\n              signal(this, \"overwriteToggle\", this, this.state.overwrite);\n            },\n            hasFocus: function hasFocus() {\n              return this.display.input.getField() == activeElt();\n            },\n            isReadOnly: function isReadOnly() {\n              return !!(this.options.readOnly || this.doc.cantEdit);\n            },\n\n            scrollTo: methodOp(function (x, y) {\n              scrollToCoords(this, x, y);\n            }),\n            getScrollInfo: function getScrollInfo() {\n              var scroller = this.display.scroller;\n              return { left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this) };\n            },\n\n            scrollIntoView: methodOp(function (range$$1, margin) {\n              if (range$$1 == null) {\n                range$$1 = { from: this.doc.sel.primary().head, to: null };\n                if (margin == null) {\n                  margin = this.options.cursorScrollMargin;\n                }\n              } else if (typeof range$$1 == \"number\") {\n                range$$1 = { from: Pos(range$$1, 0), to: null };\n              } else if (range$$1.from == null) {\n                range$$1 = { from: range$$1, to: null };\n              }\n              if (!range$$1.to) {\n                range$$1.to = range$$1.from;\n              }\n              range$$1.margin = margin || 0;\n\n              if (range$$1.from.line != null) {\n                scrollToRange(this, range$$1);\n              } else {\n                scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n              }\n            }),\n\n            setSize: methodOp(function (width, height) {\n              var this$1 = this;\n\n              var interpret = function interpret(val) {\n                return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n              };\n              if (width != null) {\n                this.display.wrapper.style.width = interpret(width);\n              }\n              if (height != null) {\n                this.display.wrapper.style.height = interpret(height);\n              }\n              if (this.options.lineWrapping) {\n                clearLineMeasurementCache(this);\n              }\n              var lineNo$$1 = this.display.viewFrom;\n              this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n                if (line.widgets) {\n                  for (var i = 0; i < line.widgets.length; i++) {\n                    if (line.widgets[i].noHScroll) {\n                      regLineChange(this$1, lineNo$$1, \"widget\");break;\n                    }\n                  }\n                }\n                ++lineNo$$1;\n              });\n              this.curOp.forceUpdate = true;\n              signal(this, \"refresh\", this);\n            }),\n\n            operation: function operation(f) {\n              return runInOp(this, f);\n            },\n            startOperation: function startOperation() {\n              return _startOperation(this);\n            },\n            endOperation: function endOperation() {\n              return _endOperation(this);\n            },\n\n            refresh: methodOp(function () {\n              var oldHeight = this.display.cachedTextHeight;\n              regChange(this);\n              this.curOp.forceUpdate = true;\n              clearCaches(this);\n              scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n              updateGutterSpace(this);\n              if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n                estimateLineHeights(this);\n              }\n              signal(this, \"refresh\", this);\n            }),\n\n            swapDoc: methodOp(function (doc) {\n              var old = this.doc;\n              old.cm = null;\n              attachDoc(this, doc);\n              clearCaches(this);\n              this.display.input.reset();\n              scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n              this.curOp.forceScroll = true;\n              signalLater(this, \"swapDoc\", this, old);\n              return old;\n            }),\n\n            getInputField: function getInputField() {\n              return this.display.input.getField();\n            },\n            getWrapperElement: function getWrapperElement() {\n              return this.display.wrapper;\n            },\n            getScrollerElement: function getScrollerElement() {\n              return this.display.scroller;\n            },\n            getGutterElement: function getGutterElement() {\n              return this.display.gutters;\n            }\n          };\n          eventMixin(CodeMirror);\n\n          CodeMirror.registerHelper = function (type, name, value) {\n            if (!helpers.hasOwnProperty(type)) {\n              helpers[type] = CodeMirror[type] = { _global: [] };\n            }\n            helpers[type][name] = value;\n          };\n          CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n            CodeMirror.registerHelper(type, name, value);\n            helpers[type]._global.push({ pred: predicate, val: value });\n          };\n        };\n\n        // Used for horizontal relative motion. Dir is -1 or 1 (left or\n        // right), unit can be \"char\", \"column\" (like char, but doesn't\n        // cross line boundaries), \"word\" (across next word), or \"group\" (to\n        // the start of next group of word or non-word-non-whitespace\n        // chars). The visually param controls whether, in right-to-left\n        // text, direction 1 means to move towards the next index in the\n        // string, or towards the character to the right of the current\n        // position. The resulting position will have a hitSide=true\n        // property if it reached the end of the document.\n        function _findPosH(doc, pos, dir, unit, visually) {\n          var oldPos = pos;\n          var origDir = dir;\n          var lineObj = getLine(doc, pos.line);\n          function findNextLine() {\n            var l = pos.line + dir;\n            if (l < doc.first || l >= doc.first + doc.size) {\n              return false;\n            }\n            pos = new Pos(l, pos.ch, pos.sticky);\n            return lineObj = getLine(doc, l);\n          }\n          function moveOnce(boundToLine) {\n            var next;\n            if (visually) {\n              next = moveVisually(doc.cm, lineObj, pos, dir);\n            } else {\n              next = moveLogically(lineObj, pos, dir);\n            }\n            if (next == null) {\n              if (!boundToLine && findNextLine()) {\n                pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir);\n              } else {\n                return false;\n              }\n            } else {\n              pos = next;\n            }\n            return true;\n          }\n\n          if (unit == \"char\") {\n            moveOnce();\n          } else if (unit == \"column\") {\n            moveOnce(true);\n          } else if (unit == \"word\" || unit == \"group\") {\n            var sawType = null,\n                group = unit == \"group\";\n            var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n            for (var first = true;; first = false) {\n              if (dir < 0 && !moveOnce(!first)) {\n                break;\n              }\n              var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n              var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n              if (group && !first && !type) {\n                type = \"s\";\n              }\n              if (sawType && sawType != type) {\n                if (dir < 0) {\n                  dir = 1;moveOnce();pos.sticky = \"after\";\n                }\n                break;\n              }\n\n              if (type) {\n                sawType = type;\n              }\n              if (dir > 0 && !moveOnce(!first)) {\n                break;\n              }\n            }\n          }\n          var result = skipAtomic(doc, pos, oldPos, origDir, true);\n          if (equalCursorPos(oldPos, result)) {\n            result.hitSide = true;\n          }\n          return result;\n        }\n\n        // For relative vertical movement. Dir may be -1 or 1. Unit can be\n        // \"page\" or \"line\". The resulting position will have a hitSide=true\n        // property if it reached the end of the document.\n        function _findPosV(cm, pos, dir, unit) {\n          var doc = cm.doc,\n              x = pos.left,\n              y;\n          if (unit == \"page\") {\n            var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n            var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n            y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n          } else if (unit == \"line\") {\n            y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n          }\n          var target;\n          for (;;) {\n            target = _coordsChar(cm, x, y);\n            if (!target.outside) {\n              break;\n            }\n            if (dir < 0 ? y <= 0 : y >= doc.height) {\n              target.hitSide = true;break;\n            }\n            y += dir * 5;\n          }\n          return target;\n        }\n\n        // CONTENTEDITABLE INPUT STYLE\n\n        var ContentEditableInput = function ContentEditableInput(cm) {\n          this.cm = cm;\n          this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n          this.polling = new Delayed();\n          this.composing = null;\n          this.gracePeriod = false;\n          this.readDOMTimeout = null;\n        };\n\n        ContentEditableInput.prototype.init = function (display) {\n          var this$1 = this;\n\n          var input = this,\n              cm = input.cm;\n          var div = input.div = display.lineDiv;\n          disableBrowserMagic(div, cm.options.spellcheck);\n\n          on(div, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n              return;\n            }\n            // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n            if (ie_version <= 11) {\n              setTimeout(operation(cm, function () {\n                return this$1.updateFromDOM();\n              }), 20);\n            }\n          });\n\n          on(div, \"compositionstart\", function (e) {\n            this$1.composing = { data: e.data, done: false };\n          });\n          on(div, \"compositionupdate\", function (e) {\n            if (!this$1.composing) {\n              this$1.composing = { data: e.data, done: false };\n            }\n          });\n          on(div, \"compositionend\", function (e) {\n            if (this$1.composing) {\n              if (e.data != this$1.composing.data) {\n                this$1.readFromDOMSoon();\n              }\n              this$1.composing.done = true;\n            }\n          });\n\n          on(div, \"touchstart\", function () {\n            return input.forceCompositionEnd();\n          });\n\n          on(div, \"input\", function () {\n            if (!this$1.composing) {\n              this$1.readFromDOMSoon();\n            }\n          });\n\n          function onCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n              return;\n            }\n            if (cm.somethingSelected()) {\n              setLastCopied({ lineWise: false, text: cm.getSelections() });\n              if (e.type == \"cut\") {\n                cm.replaceSelection(\"\", null, \"cut\");\n              }\n            } else if (!cm.options.lineWiseCopyCut) {\n              return;\n            } else {\n              var ranges = copyableRanges(cm);\n              setLastCopied({ lineWise: true, text: ranges.text });\n              if (e.type == \"cut\") {\n                cm.operation(function () {\n                  cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n                  cm.replaceSelection(\"\", null, \"cut\");\n                });\n              }\n            }\n            if (e.clipboardData) {\n              e.clipboardData.clearData();\n              var content = lastCopied.text.join(\"\\n\");\n              // iOS exposes the clipboard API, but seems to discard content inserted into it\n              e.clipboardData.setData(\"Text\", content);\n              if (e.clipboardData.getData(\"Text\") == content) {\n                e.preventDefault();\n                return;\n              }\n            }\n            // Old-fashioned briefly-focus-a-textarea hack\n            var kludge = hiddenTextarea(),\n                te = kludge.firstChild;\n            cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n            te.value = lastCopied.text.join(\"\\n\");\n            var hadFocus = document.activeElement;\n            selectInput(te);\n            setTimeout(function () {\n              cm.display.lineSpace.removeChild(kludge);\n              hadFocus.focus();\n              if (hadFocus == div) {\n                input.showPrimarySelection();\n              }\n            }, 50);\n          }\n          on(div, \"copy\", onCopyCut);\n          on(div, \"cut\", onCopyCut);\n        };\n\n        ContentEditableInput.prototype.prepareSelection = function () {\n          var result = prepareSelection(this.cm, false);\n          result.focus = this.cm.state.focused;\n          return result;\n        };\n\n        ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n          if (!info || !this.cm.display.view.length) {\n            return;\n          }\n          if (info.focus || takeFocus) {\n            this.showPrimarySelection();\n          }\n          this.showMultipleSelections(info);\n        };\n\n        ContentEditableInput.prototype.showPrimarySelection = function () {\n          var sel = window.getSelection(),\n              cm = this.cm,\n              prim = cm.doc.sel.primary();\n          var from = prim.from(),\n              to = prim.to();\n\n          if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n            sel.removeAllRanges();\n            return;\n          }\n\n          var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n          var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n          if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n            return;\n          }\n\n          var view = cm.display.view;\n          var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || { node: view[0].measure.map[2], offset: 0 };\n          var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n          if (!end) {\n            var measure = view[view.length - 1].measure;\n            var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n            end = { node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3] };\n          }\n\n          if (!start || !end) {\n            sel.removeAllRanges();\n            return;\n          }\n\n          var old = sel.rangeCount && sel.getRangeAt(0),\n              rng;\n          try {\n            rng = range(start.node, start.offset, end.offset, end.node);\n          } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n          if (rng) {\n            if (!gecko && cm.state.focused) {\n              sel.collapse(start.node, start.offset);\n              if (!rng.collapsed) {\n                sel.removeAllRanges();\n                sel.addRange(rng);\n              }\n            } else {\n              sel.removeAllRanges();\n              sel.addRange(rng);\n            }\n            if (old && sel.anchorNode == null) {\n              sel.addRange(old);\n            } else if (gecko) {\n              this.startGracePeriod();\n            }\n          }\n          this.rememberSelection();\n        };\n\n        ContentEditableInput.prototype.startGracePeriod = function () {\n          var this$1 = this;\n\n          clearTimeout(this.gracePeriod);\n          this.gracePeriod = setTimeout(function () {\n            this$1.gracePeriod = false;\n            if (this$1.selectionChanged()) {\n              this$1.cm.operation(function () {\n                return this$1.cm.curOp.selectionChanged = true;\n              });\n            }\n          }, 20);\n        };\n\n        ContentEditableInput.prototype.showMultipleSelections = function (info) {\n          removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n          removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n        };\n\n        ContentEditableInput.prototype.rememberSelection = function () {\n          var sel = window.getSelection();\n          this.lastAnchorNode = sel.anchorNode;this.lastAnchorOffset = sel.anchorOffset;\n          this.lastFocusNode = sel.focusNode;this.lastFocusOffset = sel.focusOffset;\n        };\n\n        ContentEditableInput.prototype.selectionInEditor = function () {\n          var sel = window.getSelection();\n          if (!sel.rangeCount) {\n            return false;\n          }\n          var node = sel.getRangeAt(0).commonAncestorContainer;\n          return contains(this.div, node);\n        };\n\n        ContentEditableInput.prototype.focus = function () {\n          if (this.cm.options.readOnly != \"nocursor\") {\n            if (!this.selectionInEditor()) {\n              this.showSelection(this.prepareSelection(), true);\n            }\n            this.div.focus();\n          }\n        };\n        ContentEditableInput.prototype.blur = function () {\n          this.div.blur();\n        };\n        ContentEditableInput.prototype.getField = function () {\n          return this.div;\n        };\n\n        ContentEditableInput.prototype.supportsTouch = function () {\n          return true;\n        };\n\n        ContentEditableInput.prototype.receivedFocus = function () {\n          var input = this;\n          if (this.selectionInEditor()) {\n            this.pollSelection();\n          } else {\n            runInOp(this.cm, function () {\n              return input.cm.curOp.selectionChanged = true;\n            });\n          }\n\n          function poll() {\n            if (input.cm.state.focused) {\n              input.pollSelection();\n              input.polling.set(input.cm.options.pollInterval, poll);\n            }\n          }\n          this.polling.set(this.cm.options.pollInterval, poll);\n        };\n\n        ContentEditableInput.prototype.selectionChanged = function () {\n          var sel = window.getSelection();\n          return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n        };\n\n        ContentEditableInput.prototype.pollSelection = function () {\n          if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n            return;\n          }\n          var sel = window.getSelection(),\n              cm = this.cm;\n          // On Android Chrome (version 56, at least), backspacing into an\n          // uneditable block element will put the cursor in that element,\n          // and then, because it's not editable, hide the virtual keyboard.\n          // Because Android doesn't allow us to actually detect backspace\n          // presses in a sane way, this code checks for when that happens\n          // and simulates a backspace press in this case.\n          if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\n            this.cm.triggerOnKeyDown({ type: \"keydown\", keyCode: 8, preventDefault: Math.abs });\n            this.blur();\n            this.focus();\n            return;\n          }\n          if (this.composing) {\n            return;\n          }\n          this.rememberSelection();\n          var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n          var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n          if (anchor && head) {\n            runInOp(cm, function () {\n              setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n              if (anchor.bad || head.bad) {\n                cm.curOp.selectionChanged = true;\n              }\n            });\n          }\n        };\n\n        ContentEditableInput.prototype.pollContent = function () {\n          if (this.readDOMTimeout != null) {\n            clearTimeout(this.readDOMTimeout);\n            this.readDOMTimeout = null;\n          }\n\n          var cm = this.cm,\n              display = cm.display,\n              sel = cm.doc.sel.primary();\n          var from = sel.from(),\n              to = sel.to();\n          if (from.ch == 0 && from.line > cm.firstLine()) {\n            from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n          }\n          if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n            to = Pos(to.line + 1, 0);\n          }\n          if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n            return false;\n          }\n\n          var fromIndex, fromLine, fromNode;\n          if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n            fromLine = lineNo(display.view[0].line);\n            fromNode = display.view[0].node;\n          } else {\n            fromLine = lineNo(display.view[fromIndex].line);\n            fromNode = display.view[fromIndex - 1].node.nextSibling;\n          }\n          var toIndex = findViewIndex(cm, to.line);\n          var toLine, toNode;\n          if (toIndex == display.view.length - 1) {\n            toLine = display.viewTo - 1;\n            toNode = display.lineDiv.lastChild;\n          } else {\n            toLine = lineNo(display.view[toIndex + 1].line) - 1;\n            toNode = display.view[toIndex + 1].node.previousSibling;\n          }\n\n          if (!fromNode) {\n            return false;\n          }\n          var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n          var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n          while (newText.length > 1 && oldText.length > 1) {\n            if (lst(newText) == lst(oldText)) {\n              newText.pop();oldText.pop();toLine--;\n            } else if (newText[0] == oldText[0]) {\n              newText.shift();oldText.shift();fromLine++;\n            } else {\n              break;\n            }\n          }\n\n          var cutFront = 0,\n              cutEnd = 0;\n          var newTop = newText[0],\n              oldTop = oldText[0],\n              maxCutFront = Math.min(newTop.length, oldTop.length);\n          while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n            ++cutFront;\n          }\n          var newBot = lst(newText),\n              oldBot = lst(oldText);\n          var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n          while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n            ++cutEnd;\n          }\n          // Try to move start of change to start of selection if ambiguous\n          if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n            while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n              cutFront--;\n              cutEnd++;\n            }\n          }\n\n          newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n          newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n          var chFrom = Pos(fromLine, cutFront);\n          var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n          if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n            _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n            return true;\n          }\n        };\n\n        ContentEditableInput.prototype.ensurePolled = function () {\n          this.forceCompositionEnd();\n        };\n        ContentEditableInput.prototype.reset = function () {\n          this.forceCompositionEnd();\n        };\n        ContentEditableInput.prototype.forceCompositionEnd = function () {\n          if (!this.composing) {\n            return;\n          }\n          clearTimeout(this.readDOMTimeout);\n          this.composing = null;\n          this.updateFromDOM();\n          this.div.blur();\n          this.div.focus();\n        };\n        ContentEditableInput.prototype.readFromDOMSoon = function () {\n          var this$1 = this;\n\n          if (this.readDOMTimeout != null) {\n            return;\n          }\n          this.readDOMTimeout = setTimeout(function () {\n            this$1.readDOMTimeout = null;\n            if (this$1.composing) {\n              if (this$1.composing.done) {\n                this$1.composing = null;\n              } else {\n                return;\n              }\n            }\n            this$1.updateFromDOM();\n          }, 80);\n        };\n\n        ContentEditableInput.prototype.updateFromDOM = function () {\n          var this$1 = this;\n\n          if (this.cm.isReadOnly() || !this.pollContent()) {\n            runInOp(this.cm, function () {\n              return regChange(this$1.cm);\n            });\n          }\n        };\n\n        ContentEditableInput.prototype.setUneditable = function (node) {\n          node.contentEditable = \"false\";\n        };\n\n        ContentEditableInput.prototype.onKeyPress = function (e) {\n          if (e.charCode == 0) {\n            return;\n          }\n          e.preventDefault();\n          if (!this.cm.isReadOnly()) {\n            operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n          }\n        };\n\n        ContentEditableInput.prototype.readOnlyChanged = function (val) {\n          this.div.contentEditable = String(val != \"nocursor\");\n        };\n\n        ContentEditableInput.prototype.onContextMenu = function () {};\n        ContentEditableInput.prototype.resetPosition = function () {};\n\n        ContentEditableInput.prototype.needsContentAttribute = true;\n\n        function posToDOM(cm, pos) {\n          var view = findViewForLine(cm, pos.line);\n          if (!view || view.hidden) {\n            return null;\n          }\n          var line = getLine(cm.doc, pos.line);\n          var info = mapFromLineView(view, line, pos.line);\n\n          var order = getOrder(line, cm.doc.direction),\n              side = \"left\";\n          if (order) {\n            var partPos = getBidiPartAt(order, pos.ch);\n            side = partPos % 2 ? \"right\" : \"left\";\n          }\n          var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n          result.offset = result.collapse == \"right\" ? result.end : result.start;\n          return result;\n        }\n\n        function isInGutter(node) {\n          for (var scan = node; scan; scan = scan.parentNode) {\n            if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n              return true;\n            }\n          }\n          return false;\n        }\n\n        function badPos(pos, bad) {\n          if (bad) {\n            pos.bad = true;\n          }return pos;\n        }\n\n        function domTextBetween(cm, from, to, fromLine, toLine) {\n          var text = \"\",\n              closing = false,\n              lineSep = cm.doc.lineSeparator();\n          function recognizeMarker(id) {\n            return function (marker) {\n              return marker.id == id;\n            };\n          }\n          function close() {\n            if (closing) {\n              text += lineSep;\n              closing = false;\n            }\n          }\n          function addText(str) {\n            if (str) {\n              close();\n              text += str;\n            }\n          }\n          function walk(node) {\n            if (node.nodeType == 1) {\n              var cmText = node.getAttribute(\"cm-text\");\n              if (cmText != null) {\n                addText(cmText || node.textContent.replace(/\\u200b/g, \"\"));\n                return;\n              }\n              var markerID = node.getAttribute(\"cm-marker\"),\n                  range$$1;\n              if (markerID) {\n                var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n                if (found.length && (range$$1 = found[0].find(0))) {\n                  addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep));\n                }\n                return;\n              }\n              if (node.getAttribute(\"contenteditable\") == \"false\") {\n                return;\n              }\n              var isBlock = /^(pre|div|p)$/i.test(node.nodeName);\n              if (isBlock) {\n                close();\n              }\n              for (var i = 0; i < node.childNodes.length; i++) {\n                walk(node.childNodes[i]);\n              }\n              if (isBlock) {\n                closing = true;\n              }\n            } else if (node.nodeType == 3) {\n              addText(node.nodeValue);\n            }\n          }\n          for (;;) {\n            walk(from);\n            if (from == to) {\n              break;\n            }\n            from = from.nextSibling;\n          }\n          return text;\n        }\n\n        function domToPos(cm, node, offset) {\n          var lineNode;\n          if (node == cm.display.lineDiv) {\n            lineNode = cm.display.lineDiv.childNodes[offset];\n            if (!lineNode) {\n              return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n            }\n            node = null;offset = 0;\n          } else {\n            for (lineNode = node;; lineNode = lineNode.parentNode) {\n              if (!lineNode || lineNode == cm.display.lineDiv) {\n                return null;\n              }\n              if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n                break;\n              }\n            }\n          }\n          for (var i = 0; i < cm.display.view.length; i++) {\n            var lineView = cm.display.view[i];\n            if (lineView.node == lineNode) {\n              return locateNodeInLineView(lineView, node, offset);\n            }\n          }\n        }\n\n        function locateNodeInLineView(lineView, node, offset) {\n          var wrapper = lineView.text.firstChild,\n              bad = false;\n          if (!node || !contains(wrapper, node)) {\n            return badPos(Pos(lineNo(lineView.line), 0), true);\n          }\n          if (node == wrapper) {\n            bad = true;\n            node = wrapper.childNodes[offset];\n            offset = 0;\n            if (!node) {\n              var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n              return badPos(Pos(lineNo(line), line.text.length), bad);\n            }\n          }\n\n          var textNode = node.nodeType == 3 ? node : null,\n              topNode = node;\n          if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n            textNode = node.firstChild;\n            if (offset) {\n              offset = textNode.nodeValue.length;\n            }\n          }\n          while (topNode.parentNode != wrapper) {\n            topNode = topNode.parentNode;\n          }\n          var measure = lineView.measure,\n              maps = measure.maps;\n\n          function find(textNode, topNode, offset) {\n            for (var i = -1; i < (maps ? maps.length : 0); i++) {\n              var map$$1 = i < 0 ? measure.map : maps[i];\n              for (var j = 0; j < map$$1.length; j += 3) {\n                var curNode = map$$1[j + 2];\n                if (curNode == textNode || curNode == topNode) {\n                  var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n                  var ch = map$$1[j] + offset;\n                  if (offset < 0 || curNode != textNode) {\n                    ch = map$$1[j + (offset ? 1 : 0)];\n                  }\n                  return Pos(line, ch);\n                }\n              }\n            }\n          }\n          var found = find(textNode, topNode, offset);\n          if (found) {\n            return badPos(found, bad);\n          }\n\n          // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n          for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n            found = find(after, after.firstChild, 0);\n            if (found) {\n              return badPos(Pos(found.line, found.ch - dist), bad);\n            } else {\n              dist += after.textContent.length;\n            }\n          }\n          for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n            found = find(before, before.firstChild, -1);\n            if (found) {\n              return badPos(Pos(found.line, found.ch + dist$1), bad);\n            } else {\n              dist$1 += before.textContent.length;\n            }\n          }\n        }\n\n        // TEXTAREA INPUT STYLE\n\n        var TextareaInput = function TextareaInput(cm) {\n          this.cm = cm;\n          // See input.poll and input.reset\n          this.prevInput = \"\";\n\n          // Flag that indicates whether we expect input to appear real soon\n          // now (after some event like 'keypress' or 'input') and are\n          // polling intensively.\n          this.pollingFast = false;\n          // Self-resetting timeout for the poller\n          this.polling = new Delayed();\n          // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n          this.hasSelection = false;\n          this.composing = null;\n        };\n\n        TextareaInput.prototype.init = function (display) {\n          var this$1 = this;\n\n          var input = this,\n              cm = this.cm;\n\n          // Wraps and hides input textarea\n          var div = this.wrapper = hiddenTextarea();\n          // The semihidden textarea that is focused when the editor is\n          // focused, and receives input.\n          var te = this.textarea = div.firstChild;\n          display.wrapper.insertBefore(div, display.wrapper.firstChild);\n\n          // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n          if (ios) {\n            te.style.width = \"0px\";\n          }\n\n          on(te, \"input\", function () {\n            if (ie && ie_version >= 9 && this$1.hasSelection) {\n              this$1.hasSelection = null;\n            }\n            input.poll();\n          });\n\n          on(te, \"paste\", function (e) {\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n              return;\n            }\n\n            cm.state.pasteIncoming = true;\n            input.fastPoll();\n          });\n\n          function prepareCopyCut(e) {\n            if (signalDOMEvent(cm, e)) {\n              return;\n            }\n            if (cm.somethingSelected()) {\n              setLastCopied({ lineWise: false, text: cm.getSelections() });\n            } else if (!cm.options.lineWiseCopyCut) {\n              return;\n            } else {\n              var ranges = copyableRanges(cm);\n              setLastCopied({ lineWise: true, text: ranges.text });\n              if (e.type == \"cut\") {\n                cm.setSelections(ranges.ranges, null, sel_dontScroll);\n              } else {\n                input.prevInput = \"\";\n                te.value = ranges.text.join(\"\\n\");\n                selectInput(te);\n              }\n            }\n            if (e.type == \"cut\") {\n              cm.state.cutIncoming = true;\n            }\n          }\n          on(te, \"cut\", prepareCopyCut);\n          on(te, \"copy\", prepareCopyCut);\n\n          on(display.scroller, \"paste\", function (e) {\n            if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n              return;\n            }\n            cm.state.pasteIncoming = true;\n            input.focus();\n          });\n\n          // Prevent normal selection in the editor (we handle our own)\n          on(display.lineSpace, \"selectstart\", function (e) {\n            if (!eventInWidget(display, e)) {\n              e_preventDefault(e);\n            }\n          });\n\n          on(te, \"compositionstart\", function () {\n            var start = cm.getCursor(\"from\");\n            if (input.composing) {\n              input.composing.range.clear();\n            }\n            input.composing = {\n              start: start,\n              range: cm.markText(start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" })\n            };\n          });\n          on(te, \"compositionend\", function () {\n            if (input.composing) {\n              input.poll();\n              input.composing.range.clear();\n              input.composing = null;\n            }\n          });\n        };\n\n        TextareaInput.prototype.prepareSelection = function () {\n          // Redraw the selection and/or cursor\n          var cm = this.cm,\n              display = cm.display,\n              doc = cm.doc;\n          var result = prepareSelection(cm);\n\n          // Move the hidden textarea near the cursor to prevent scrolling artifacts\n          if (cm.options.moveInputWithCursor) {\n            var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n            var wrapOff = display.wrapper.getBoundingClientRect(),\n                lineOff = display.lineDiv.getBoundingClientRect();\n            result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n            result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n          }\n\n          return result;\n        };\n\n        TextareaInput.prototype.showSelection = function (drawn) {\n          var cm = this.cm,\n              display = cm.display;\n          removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n          removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n          if (drawn.teTop != null) {\n            this.wrapper.style.top = drawn.teTop + \"px\";\n            this.wrapper.style.left = drawn.teLeft + \"px\";\n          }\n        };\n\n        // Reset the input to correspond to the selection (or to be empty,\n        // when not typing and nothing is selected)\n        TextareaInput.prototype.reset = function (typing) {\n          if (this.contextMenuPending || this.composing) {\n            return;\n          }\n          var cm = this.cm;\n          if (cm.somethingSelected()) {\n            this.prevInput = \"\";\n            var content = cm.getSelection();\n            this.textarea.value = content;\n            if (cm.state.focused) {\n              selectInput(this.textarea);\n            }\n            if (ie && ie_version >= 9) {\n              this.hasSelection = content;\n            }\n          } else if (!typing) {\n            this.prevInput = this.textarea.value = \"\";\n            if (ie && ie_version >= 9) {\n              this.hasSelection = null;\n            }\n          }\n        };\n\n        TextareaInput.prototype.getField = function () {\n          return this.textarea;\n        };\n\n        TextareaInput.prototype.supportsTouch = function () {\n          return false;\n        };\n\n        TextareaInput.prototype.focus = function () {\n          if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n            try {\n              this.textarea.focus();\n            } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n          }\n        };\n\n        TextareaInput.prototype.blur = function () {\n          this.textarea.blur();\n        };\n\n        TextareaInput.prototype.resetPosition = function () {\n          this.wrapper.style.top = this.wrapper.style.left = 0;\n        };\n\n        TextareaInput.prototype.receivedFocus = function () {\n          this.slowPoll();\n        };\n\n        // Poll for input changes, using the normal rate of polling. This\n        // runs as long as the editor is focused.\n        TextareaInput.prototype.slowPoll = function () {\n          var this$1 = this;\n\n          if (this.pollingFast) {\n            return;\n          }\n          this.polling.set(this.cm.options.pollInterval, function () {\n            this$1.poll();\n            if (this$1.cm.state.focused) {\n              this$1.slowPoll();\n            }\n          });\n        };\n\n        // When an event has just come in that is likely to add or change\n        // something in the input textarea, we poll faster, to ensure that\n        // the change appears on the screen quickly.\n        TextareaInput.prototype.fastPoll = function () {\n          var missed = false,\n              input = this;\n          input.pollingFast = true;\n          function p() {\n            var changed = input.poll();\n            if (!changed && !missed) {\n              missed = true;input.polling.set(60, p);\n            } else {\n              input.pollingFast = false;input.slowPoll();\n            }\n          }\n          input.polling.set(20, p);\n        };\n\n        // Read input from the textarea, and update the document to match.\n        // When something is selected, it is present in the textarea, and\n        // selected (unless it is huge, in which case a placeholder is\n        // used). When nothing is selected, the cursor sits after previously\n        // seen text (can be empty), which is stored in prevInput (we must\n        // not reset the textarea when typing, because that breaks IME).\n        TextareaInput.prototype.poll = function () {\n          var this$1 = this;\n\n          var cm = this.cm,\n              input = this.textarea,\n              prevInput = this.prevInput;\n          // Since this is called a *lot*, try to bail out as cheaply as\n          // possible when it is clear that nothing happened. hasSelection\n          // will be the case when there is a lot of text in the textarea,\n          // in which case reading its value would be expensive.\n          if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n            return false;\n          }\n\n          var text = input.value;\n          // If nothing changed, bail.\n          if (text == prevInput && !cm.somethingSelected()) {\n            return false;\n          }\n          // Work around nonsensical selection resetting in IE9/10, and\n          // inexplicable appearance of private area unicode characters on\n          // some key combos in Mac (#2689).\n          if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n            cm.display.input.reset();\n            return false;\n          }\n\n          if (cm.doc.sel == cm.display.selForContextMenu) {\n            var first = text.charCodeAt(0);\n            if (first == 0x200b && !prevInput) {\n              prevInput = \"\\u200B\";\n            }\n            if (first == 0x21da) {\n              this.reset();return this.cm.execCommand(\"undo\");\n            }\n          }\n          // Find the part of the input that is actually new\n          var same = 0,\n              l = Math.min(prevInput.length, text.length);\n          while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n            ++same;\n          }\n\n          runInOp(cm, function () {\n            applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null);\n\n            // Don't leave long text in the textarea, since it makes further polling slow\n            if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n              input.value = this$1.prevInput = \"\";\n            } else {\n              this$1.prevInput = text;\n            }\n\n            if (this$1.composing) {\n              this$1.composing.range.clear();\n              this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), { className: \"CodeMirror-composing\" });\n            }\n          });\n          return true;\n        };\n\n        TextareaInput.prototype.ensurePolled = function () {\n          if (this.pollingFast && this.poll()) {\n            this.pollingFast = false;\n          }\n        };\n\n        TextareaInput.prototype.onKeyPress = function () {\n          if (ie && ie_version >= 9) {\n            this.hasSelection = null;\n          }\n          this.fastPoll();\n        };\n\n        TextareaInput.prototype.onContextMenu = function (e) {\n          var input = this,\n              cm = input.cm,\n              display = cm.display,\n              te = input.textarea;\n          var pos = posFromMouse(cm, e),\n              scrollPos = display.scroller.scrollTop;\n          if (!pos || presto) {\n            return;\n          } // Opera is difficult.\n\n          // Reset the current text selection only if the click is done outside of the selection\n          // and 'resetSelectionOnContextMenu' option is true.\n          var reset = cm.options.resetSelectionOnContextMenu;\n          if (reset && cm.doc.sel.contains(pos) == -1) {\n            operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n          }\n\n          var oldCSS = te.style.cssText,\n              oldWrapperCSS = input.wrapper.style.cssText;\n          input.wrapper.style.cssText = \"position: absolute\";\n          var wrapperBox = input.wrapper.getBoundingClientRect();\n          te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n          var oldScrollY;\n          if (webkit) {\n            oldScrollY = window.scrollY;\n          } // Work around Chrome issue (#2712)\n          display.input.focus();\n          if (webkit) {\n            window.scrollTo(null, oldScrollY);\n          }\n          display.input.reset();\n          // Adds \"Select all\" to context menu in FF\n          if (!cm.somethingSelected()) {\n            te.value = input.prevInput = \" \";\n          }\n          input.contextMenuPending = true;\n          display.selForContextMenu = cm.doc.sel;\n          clearTimeout(display.detectingSelectAll);\n\n          // Select-all will be greyed out if there's nothing to select, so\n          // this adds a zero-width space so that we can later check whether\n          // it got selected.\n          function prepareSelectAllHack() {\n            if (te.selectionStart != null) {\n              var selected = cm.somethingSelected();\n              var extval = \"\\u200B\" + (selected ? te.value : \"\");\n              te.value = \"\\u21DA\"; // Used to catch context-menu undo\n              te.value = extval;\n              input.prevInput = selected ? \"\" : \"\\u200B\";\n              te.selectionStart = 1;te.selectionEnd = extval.length;\n              // Re-set this, in case some other handler touched the\n              // selection in the meantime.\n              display.selForContextMenu = cm.doc.sel;\n            }\n          }\n          function rehide() {\n            input.contextMenuPending = false;\n            input.wrapper.style.cssText = oldWrapperCSS;\n            te.style.cssText = oldCSS;\n            if (ie && ie_version < 9) {\n              display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n            }\n\n            // Try to detect the user choosing select-all\n            if (te.selectionStart != null) {\n              if (!ie || ie && ie_version < 9) {\n                prepareSelectAllHack();\n              }\n              var i = 0,\n                  poll = function poll() {\n                if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n                  operation(cm, selectAll)(cm);\n                } else if (i++ < 10) {\n                  display.detectingSelectAll = setTimeout(poll, 500);\n                } else {\n                  display.selForContextMenu = null;\n                  display.input.reset();\n                }\n              };\n              display.detectingSelectAll = setTimeout(poll, 200);\n            }\n          }\n\n          if (ie && ie_version >= 9) {\n            prepareSelectAllHack();\n          }\n          if (captureRightClick) {\n            e_stop(e);\n            var mouseup = function mouseup() {\n              off(window, \"mouseup\", mouseup);\n              setTimeout(rehide, 20);\n            };\n            on(window, \"mouseup\", mouseup);\n          } else {\n            setTimeout(rehide, 50);\n          }\n        };\n\n        TextareaInput.prototype.readOnlyChanged = function (val) {\n          if (!val) {\n            this.reset();\n          }\n          this.textarea.disabled = val == \"nocursor\";\n        };\n\n        TextareaInput.prototype.setUneditable = function () {};\n\n        TextareaInput.prototype.needsContentAttribute = false;\n\n        function fromTextArea(textarea, options) {\n          options = options ? copyObj(options) : {};\n          options.value = textarea.value;\n          if (!options.tabindex && textarea.tabIndex) {\n            options.tabindex = textarea.tabIndex;\n          }\n          if (!options.placeholder && textarea.placeholder) {\n            options.placeholder = textarea.placeholder;\n          }\n          // Set autofocus to true if this textarea is focused, or if it has\n          // autofocus and no other element is focused.\n          if (options.autofocus == null) {\n            var hasFocus = activeElt();\n            options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n          }\n\n          function save() {\n            textarea.value = cm.getValue();\n          }\n\n          var realSubmit;\n          if (textarea.form) {\n            on(textarea.form, \"submit\", save);\n            // Deplorable hack to make the submit method do the right thing.\n            if (!options.leaveSubmitMethodAlone) {\n              var form = textarea.form;\n              realSubmit = form.submit;\n              try {\n                var wrappedSubmit = form.submit = function () {\n                  save();\n                  form.submit = realSubmit;\n                  form.submit();\n                  form.submit = wrappedSubmit;\n                };\n              } catch (e) {}\n            }\n          }\n\n          options.finishInit = function (cm) {\n            cm.save = save;\n            cm.getTextArea = function () {\n              return textarea;\n            };\n            cm.toTextArea = function () {\n              cm.toTextArea = isNaN; // Prevent this from being ran twice\n              save();\n              textarea.parentNode.removeChild(cm.getWrapperElement());\n              textarea.style.display = \"\";\n              if (textarea.form) {\n                off(textarea.form, \"submit\", save);\n                if (typeof textarea.form.submit == \"function\") {\n                  textarea.form.submit = realSubmit;\n                }\n              }\n            };\n          };\n\n          textarea.style.display = \"none\";\n          var cm = CodeMirror$1(function (node) {\n            return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n          }, options);\n          return cm;\n        }\n\n        function addLegacyProps(CodeMirror) {\n          CodeMirror.off = off;\n          CodeMirror.on = on;\n          CodeMirror.wheelEventPixels = wheelEventPixels;\n          CodeMirror.Doc = Doc;\n          CodeMirror.splitLines = splitLinesAuto;\n          CodeMirror.countColumn = countColumn;\n          CodeMirror.findColumn = findColumn;\n          CodeMirror.isWordChar = isWordCharBasic;\n          CodeMirror.Pass = Pass;\n          CodeMirror.signal = signal;\n          CodeMirror.Line = Line;\n          CodeMirror.changeEnd = changeEnd;\n          CodeMirror.scrollbarModel = scrollbarModel;\n          CodeMirror.Pos = Pos;\n          CodeMirror.cmpPos = cmp;\n          CodeMirror.modes = modes;\n          CodeMirror.mimeModes = mimeModes;\n          CodeMirror.resolveMode = resolveMode;\n          CodeMirror.getMode = getMode;\n          CodeMirror.modeExtensions = modeExtensions;\n          CodeMirror.extendMode = extendMode;\n          CodeMirror.copyState = copyState;\n          CodeMirror.startState = startState;\n          CodeMirror.innerMode = innerMode;\n          CodeMirror.commands = commands;\n          CodeMirror.keyMap = keyMap;\n          CodeMirror.keyName = keyName;\n          CodeMirror.isModifierKey = isModifierKey;\n          CodeMirror.lookupKey = lookupKey;\n          CodeMirror.normalizeKeyMap = normalizeKeyMap;\n          CodeMirror.StringStream = StringStream;\n          CodeMirror.SharedTextMarker = SharedTextMarker;\n          CodeMirror.TextMarker = TextMarker;\n          CodeMirror.LineWidget = LineWidget;\n          CodeMirror.e_preventDefault = e_preventDefault;\n          CodeMirror.e_stopPropagation = e_stopPropagation;\n          CodeMirror.e_stop = e_stop;\n          CodeMirror.addClass = addClass;\n          CodeMirror.contains = contains;\n          CodeMirror.rmClass = rmClass;\n          CodeMirror.keyNames = keyNames;\n        }\n\n        // EDITOR CONSTRUCTOR\n\n        defineOptions(CodeMirror$1);\n\n        addEditorMethods(CodeMirror$1);\n\n        // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n        var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n        for (var prop in Doc.prototype) {\n          if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n            CodeMirror$1.prototype[prop] = function (method) {\n              return function () {\n                return method.apply(this.doc, arguments);\n              };\n            }(Doc.prototype[prop]);\n          }\n        }\n\n        eventMixin(Doc);\n\n        // INPUT HANDLING\n\n        CodeMirror$1.inputStyles = { \"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput };\n\n        // MODE DEFINITION AND QUERYING\n\n        // Extra arguments are stored as the mode's dependencies, which is\n        // used by (legacy) mechanisms like loadmode.js to automatically\n        // load a mode. (Preferred mechanism is the require/define calls.)\n        CodeMirror$1.defineMode = function (name /*, mode, …*/) {\n          if (!CodeMirror$1.defaults.mode && name != \"null\") {\n            CodeMirror$1.defaults.mode = name;\n          }\n          defineMode.apply(this, arguments);\n        };\n\n        CodeMirror$1.defineMIME = defineMIME;\n\n        // Minimal default mode.\n        CodeMirror$1.defineMode(\"null\", function () {\n          return { token: function token(stream) {\n              return stream.skipToEnd();\n            } };\n        });\n        CodeMirror$1.defineMIME(\"text/plain\", \"null\");\n\n        // EXTENSIONS\n\n        CodeMirror$1.defineExtension = function (name, func) {\n          CodeMirror$1.prototype[name] = func;\n        };\n        CodeMirror$1.defineDocExtension = function (name, func) {\n          Doc.prototype[name] = func;\n        };\n\n        CodeMirror$1.fromTextArea = fromTextArea;\n\n        addLegacyProps(CodeMirror$1);\n\n        CodeMirror$1.version = \"5.29.0\";\n\n        return CodeMirror$1;\n      });\n    }, {}], 8: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineMode(\"css\", function (config, parserConfig) {\n          var inline = parserConfig.inline;\n          if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n          var indentUnit = config.indentUnit,\n              tokenHooks = parserConfig.tokenHooks,\n              documentTypes = parserConfig.documentTypes || {},\n              mediaTypes = parserConfig.mediaTypes || {},\n              mediaFeatures = parserConfig.mediaFeatures || {},\n              mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n              propertyKeywords = parserConfig.propertyKeywords || {},\n              nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n              fontProperties = parserConfig.fontProperties || {},\n              counterDescriptors = parserConfig.counterDescriptors || {},\n              colorKeywords = parserConfig.colorKeywords || {},\n              valueKeywords = parserConfig.valueKeywords || {},\n              allowNested = parserConfig.allowNested,\n              lineComment = parserConfig.lineComment,\n              supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n          var type, override;\n          function ret(style, tp) {\n            type = tp;return style;\n          }\n\n          // Tokenizers\n\n          function tokenBase(stream, state) {\n            var ch = stream.next();\n            if (tokenHooks[ch]) {\n              var result = tokenHooks[ch](stream, state);\n              if (result !== false) return result;\n            }\n            if (ch == \"@\") {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"def\", stream.current());\n            } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n              return ret(null, \"compare\");\n            } else if (ch == \"\\\"\" || ch == \"'\") {\n              state.tokenize = tokenString(ch);\n              return state.tokenize(stream, state);\n            } else if (ch == \"#\") {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"atom\", \"hash\");\n            } else if (ch == \"!\") {\n              stream.match(/^\\s*\\w*/);\n              return ret(\"keyword\", \"important\");\n            } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n              stream.eatWhile(/[\\w.%]/);\n              return ret(\"number\", \"unit\");\n            } else if (ch === \"-\") {\n              if (/[\\d.]/.test(stream.peek())) {\n                stream.eatWhile(/[\\w.%]/);\n                return ret(\"number\", \"unit\");\n              } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n                stream.eatWhile(/[\\w\\\\\\-]/);\n                if (stream.match(/^\\s*:/, false)) return ret(\"variable-2\", \"variable-definition\");\n                return ret(\"variable-2\", \"variable\");\n              } else if (stream.match(/^\\w+-/)) {\n                return ret(\"meta\", \"meta\");\n              }\n            } else if (/[,+>*\\/]/.test(ch)) {\n              return ret(null, \"select-op\");\n            } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n              return ret(\"qualifier\", \"qualifier\");\n            } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n              return ret(null, ch);\n            } else if (ch == \"u\" && stream.match(/rl(-prefix)?\\(/) || ch == \"d\" && stream.match(\"omain(\") || ch == \"r\" && stream.match(\"egexp(\")) {\n              stream.backUp(1);\n              state.tokenize = tokenParenthesized;\n              return ret(\"property\", \"word\");\n            } else if (/[\\w\\\\\\-]/.test(ch)) {\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              return ret(\"property\", \"word\");\n            } else {\n              return ret(null, null);\n            }\n          }\n\n          function tokenString(quote) {\n            return function (stream, state) {\n              var escaped = false,\n                  ch;\n              while ((ch = stream.next()) != null) {\n                if (ch == quote && !escaped) {\n                  if (quote == \")\") stream.backUp(1);\n                  break;\n                }\n                escaped = !escaped && ch == \"\\\\\";\n              }\n              if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n              return ret(\"string\", \"string\");\n            };\n          }\n\n          function tokenParenthesized(stream, state) {\n            stream.next(); // Must be '('\n            if (!stream.match(/\\s*[\\\"\\')]/, false)) state.tokenize = tokenString(\")\");else state.tokenize = null;\n            return ret(null, \"(\");\n          }\n\n          // Context management\n\n          function Context(type, indent, prev) {\n            this.type = type;\n            this.indent = indent;\n            this.prev = prev;\n          }\n\n          function pushContext(state, stream, type, indent) {\n            state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n            return type;\n          }\n\n          function popContext(state) {\n            if (state.context.prev) state.context = state.context.prev;\n            return state.context.type;\n          }\n\n          function pass(type, stream, state) {\n            return states[state.context.type](type, stream, state);\n          }\n          function popAndPass(type, stream, state, n) {\n            for (var i = n || 1; i > 0; i--) {\n              state.context = state.context.prev;\n            }return pass(type, stream, state);\n          }\n\n          // Parser\n\n          function wordAsValue(stream) {\n            var word = stream.current().toLowerCase();\n            if (valueKeywords.hasOwnProperty(word)) override = \"atom\";else if (colorKeywords.hasOwnProperty(word)) override = \"keyword\";else override = \"variable\";\n          }\n\n          var states = {};\n\n          states.top = function (type, stream, state) {\n            if (type == \"{\") {\n              return pushContext(state, stream, \"block\");\n            } else if (type == \"}\" && state.context.prev) {\n              return popContext(state);\n            } else if (supportsAtComponent && /@component/.test(type)) {\n              return pushContext(state, stream, \"atComponentBlock\");\n            } else if (/^@(-moz-)?document$/.test(type)) {\n              return pushContext(state, stream, \"documentTypes\");\n            } else if (/^@(media|supports|(-moz-)?document|import)$/.test(type)) {\n              return pushContext(state, stream, \"atBlock\");\n            } else if (/^@(font-face|counter-style)/.test(type)) {\n              state.stateArg = type;\n              return \"restricted_atBlock_before\";\n            } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)) {\n              return \"keyframes\";\n            } else if (type && type.charAt(0) == \"@\") {\n              return pushContext(state, stream, \"at\");\n            } else if (type == \"hash\") {\n              override = \"builtin\";\n            } else if (type == \"word\") {\n              override = \"tag\";\n            } else if (type == \"variable-definition\") {\n              return \"maybeprop\";\n            } else if (type == \"interpolation\") {\n              return pushContext(state, stream, \"interpolation\");\n            } else if (type == \":\") {\n              return \"pseudo\";\n            } else if (allowNested && type == \"(\") {\n              return pushContext(state, stream, \"parens\");\n            }\n            return state.context.type;\n          };\n\n          states.block = function (type, stream, state) {\n            if (type == \"word\") {\n              var word = stream.current().toLowerCase();\n              if (propertyKeywords.hasOwnProperty(word)) {\n                override = \"property\";\n                return \"maybeprop\";\n              } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n                override = \"string-2\";\n                return \"maybeprop\";\n              } else if (allowNested) {\n                override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n                return \"block\";\n              } else {\n                override += \" error\";\n                return \"maybeprop\";\n              }\n            } else if (type == \"meta\") {\n              return \"block\";\n            } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n              override = \"error\";\n              return \"block\";\n            } else {\n              return states.top(type, stream, state);\n            }\n          };\n\n          states.maybeprop = function (type, stream, state) {\n            if (type == \":\") return pushContext(state, stream, \"prop\");\n            return pass(type, stream, state);\n          };\n\n          states.prop = function (type, stream, state) {\n            if (type == \";\") return popContext(state);\n            if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n            if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n            if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n            if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n              override += \" error\";\n            } else if (type == \"word\") {\n              wordAsValue(stream);\n            } else if (type == \"interpolation\") {\n              return pushContext(state, stream, \"interpolation\");\n            }\n            return \"prop\";\n          };\n\n          states.propBlock = function (type, _stream, state) {\n            if (type == \"}\") return popContext(state);\n            if (type == \"word\") {\n              override = \"property\";return \"maybeprop\";\n            }\n            return state.context.type;\n          };\n\n          states.parens = function (type, stream, state) {\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n            if (type == \")\") return popContext(state);\n            if (type == \"(\") return pushContext(state, stream, \"parens\");\n            if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n            if (type == \"word\") wordAsValue(stream);\n            return \"parens\";\n          };\n\n          states.pseudo = function (type, stream, state) {\n            if (type == \"meta\") return \"pseudo\";\n\n            if (type == \"word\") {\n              override = \"variable-3\";\n              return state.context.type;\n            }\n            return pass(type, stream, state);\n          };\n\n          states.documentTypes = function (type, stream, state) {\n            if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n              override = \"tag\";\n              return state.context.type;\n            } else {\n              return states.atBlock(type, stream, state);\n            }\n          };\n\n          states.atBlock = function (type, stream, state) {\n            if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n            if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n            if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n            if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n            if (type == \"word\") {\n              var word = stream.current().toLowerCase();\n              if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\") override = \"keyword\";else if (mediaTypes.hasOwnProperty(word)) override = \"attribute\";else if (mediaFeatures.hasOwnProperty(word)) override = \"property\";else if (mediaValueKeywords.hasOwnProperty(word)) override = \"keyword\";else if (propertyKeywords.hasOwnProperty(word)) override = \"property\";else if (nonStandardPropertyKeywords.hasOwnProperty(word)) override = \"string-2\";else if (valueKeywords.hasOwnProperty(word)) override = \"atom\";else if (colorKeywords.hasOwnProperty(word)) override = \"keyword\";else override = \"error\";\n            }\n            return state.context.type;\n          };\n\n          states.atComponentBlock = function (type, stream, state) {\n            if (type == \"}\") return popAndPass(type, stream, state);\n            if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n            if (type == \"word\") override = \"error\";\n            return state.context.type;\n          };\n\n          states.atBlock_parens = function (type, stream, state) {\n            if (type == \")\") return popContext(state);\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n            return states.atBlock(type, stream, state);\n          };\n\n          states.restricted_atBlock_before = function (type, stream, state) {\n            if (type == \"{\") return pushContext(state, stream, \"restricted_atBlock\");\n            if (type == \"word\" && state.stateArg == \"@counter-style\") {\n              override = \"variable\";\n              return \"restricted_atBlock_before\";\n            }\n            return pass(type, stream, state);\n          };\n\n          states.restricted_atBlock = function (type, stream, state) {\n            if (type == \"}\") {\n              state.stateArg = null;\n              return popContext(state);\n            }\n            if (type == \"word\") {\n              if (state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase()) || state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())) override = \"error\";else override = \"property\";\n              return \"maybeprop\";\n            }\n            return \"restricted_atBlock\";\n          };\n\n          states.keyframes = function (type, stream, state) {\n            if (type == \"word\") {\n              override = \"variable\";return \"keyframes\";\n            }\n            if (type == \"{\") return pushContext(state, stream, \"top\");\n            return pass(type, stream, state);\n          };\n\n          states.at = function (type, stream, state) {\n            if (type == \";\") return popContext(state);\n            if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n            if (type == \"word\") override = \"tag\";else if (type == \"hash\") override = \"builtin\";\n            return \"at\";\n          };\n\n          states.interpolation = function (type, stream, state) {\n            if (type == \"}\") return popContext(state);\n            if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n            if (type == \"word\") override = \"variable\";else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n            return \"interpolation\";\n          };\n\n          return {\n            startState: function startState(base) {\n              return { tokenize: null,\n                state: inline ? \"block\" : \"top\",\n                stateArg: null,\n                context: new Context(inline ? \"block\" : \"top\", base || 0, null) };\n            },\n\n            token: function token(stream, state) {\n              if (!state.tokenize && stream.eatSpace()) return null;\n              var style = (state.tokenize || tokenBase)(stream, state);\n              if (style && (typeof style === \"undefined\" ? \"undefined\" : _typeof(style)) == \"object\") {\n                type = style[1];\n                style = style[0];\n              }\n              override = style;\n              if (type != \"comment\") state.state = states[state.state](type, stream, state);\n              return override;\n            },\n\n            indent: function indent(state, textAfter) {\n              var cx = state.context,\n                  ch = textAfter && textAfter.charAt(0);\n              var indent = cx.indent;\n              if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n              if (cx.prev) {\n                if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" || cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n                  // Resume indentation from parent context.\n                  cx = cx.prev;\n                  indent = cx.indent;\n                } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") || ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n                  // Dedent relative to current context.\n                  indent = Math.max(0, cx.indent - indentUnit);\n                }\n              }\n              return indent;\n            },\n\n            electricChars: \"}\",\n            blockCommentStart: \"/*\",\n            blockCommentEnd: \"*/\",\n            lineComment: lineComment,\n            fold: \"brace\"\n          };\n        });\n\n        function keySet(array) {\n          var keys = {};\n          for (var i = 0; i < array.length; ++i) {\n            keys[array[i].toLowerCase()] = true;\n          }\n          return keys;\n        }\n\n        var documentTypes_ = [\"domain\", \"regexp\", \"url\", \"url-prefix\"],\n            documentTypes = keySet(documentTypes_);\n\n        var mediaTypes_ = [\"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\", \"tty\", \"tv\", \"embossed\"],\n            mediaTypes = keySet(mediaTypes_);\n\n        var mediaFeatures_ = [\"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\", \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\", \"min-device-height\", \"max-device-height\", \"aspect-ratio\", \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\", \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\", \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\", \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\", \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\", \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\", \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"],\n            mediaFeatures = keySet(mediaFeatures_);\n\n        var mediaValueKeywords_ = [\"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\", \"interlace\", \"progressive\"],\n            mediaValueKeywords = keySet(mediaValueKeywords_);\n\n        var propertyKeywords_ = [\"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\", \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\", \"animation-direction\", \"animation-duration\", \"animation-fill-mode\", \"animation-iteration-count\", \"animation-name\", \"animation-play-state\", \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\", \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\", \"background-color\", \"background-image\", \"background-origin\", \"background-position\", \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\", \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\", \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\", \"border-bottom-left-radius\", \"border-bottom-right-radius\", \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\", \"border-color\", \"border-image\", \"border-image-outset\", \"border-image-repeat\", \"border-image-slice\", \"border-image-source\", \"border-image-width\", \"border-left\", \"border-left-color\", \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\", \"border-right-color\", \"border-right-style\", \"border-right-width\", \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\", \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\", \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\", \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\", \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\", \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\", \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\", \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\", \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\", \"dominant-baseline\", \"drop-initial-after-adjust\", \"drop-initial-after-align\", \"drop-initial-before-adjust\", \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\", \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\", \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\", \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\", \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\", \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\", \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\", \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\", \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\", \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\", \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\", \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\", \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\", \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\", \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\", \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\", \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\", \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\", \"marks\", \"marquee-direction\", \"marquee-loop\", \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\", \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\", \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\", \"opacity\", \"order\", \"orphans\", \"outline\", \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\", \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\", \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\", \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\", \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\", \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\", \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\", \"region-break-before\", \"region-break-inside\", \"region-fragment\", \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\", \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\", \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\", \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\", \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\", \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\", \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\", \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\", \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\", \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\", \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\", \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\", \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\", \"transition\", \"transition-delay\", \"transition-duration\", \"transition-property\", \"transition-timing-function\", \"unicode-bidi\", \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\", \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\", \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\", \"word-spacing\", \"word-wrap\", \"z-index\",\n        // SVG-specific\n        \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\", \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\", \"color-interpolation\", \"color-interpolation-filters\", \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\", \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\", \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"],\n            propertyKeywords = keySet(propertyKeywords_);\n\n        var nonStandardPropertyKeywords_ = [\"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\", \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\", \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\", \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\", \"searchfield-results-decoration\", \"zoom\"],\n            nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n        var fontProperties_ = [\"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\", \"font-stretch\", \"font-weight\", \"font-style\"],\n            fontProperties = keySet(fontProperties_);\n\n        var counterDescriptors_ = [\"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\", \"speak-as\", \"suffix\", \"symbols\", \"system\"],\n            counterDescriptors = keySet(counterDescriptors_);\n\n        var colorKeywords_ = [\"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\", \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\", \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\", \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\", \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\", \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\", \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\", \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\", \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\", \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\", \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\", \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\", \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\", \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\", \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\", \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\", \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\", \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\", \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\", \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\", \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\", \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\", \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\", \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\", \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\", \"whitesmoke\", \"yellow\", \"yellowgreen\"],\n            colorKeywords = keySet(colorKeywords_);\n\n        var valueKeywords_ = [\"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\", \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\", \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\", \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\", \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\", \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\", \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\", \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\", \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\", \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\", \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\", \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\", \"compact\", \"condensed\", \"contain\", \"content\", \"contents\", \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\", \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\", \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\", \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\", \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\", \"dot-dash\", \"dot-dot-dash\", \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\", \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\", \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\", \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\", \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\", \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\", \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\", \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\", \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\", \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\", \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\", \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\", \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\", \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\", \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\", \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\", \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\", \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\", \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\", \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\", \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\", \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\", \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\", \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\", \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\", \"media-controls-background\", \"media-current-time-display\", \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\", \"media-return-to-realtime-button\", \"media-rewind-button\", \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\", \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\", \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\", \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\", \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\", \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\", \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\", \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\", \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\", \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\", \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\", \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\", \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\", \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\", \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\", \"relative\", \"repeat\", \"repeating-linear-gradient\", \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\", \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\", \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\", \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\", \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\", \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\", \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\", \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\", \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\", \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\", \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\", \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\", \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\", \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\", \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\", \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\", \"tamil\", \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\", \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\", \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\", \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\", \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\", \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\", \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\", \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\", \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\", \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\", \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\", \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\", \"xx-large\", \"xx-small\"],\n            valueKeywords = keySet(valueKeywords_);\n\n        var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);\n        CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n        function tokenCComment(stream, state) {\n          var maybeEnd = false,\n              ch;\n          while ((ch = stream.next()) != null) {\n            if (maybeEnd && ch == \"/\") {\n              state.tokenize = null;\n              break;\n            }\n            maybeEnd = ch == \"*\";\n          }\n          return [\"comment\", \"comment\"];\n        }\n\n        CodeMirror.defineMIME(\"text/css\", {\n          documentTypes: documentTypes,\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          fontProperties: fontProperties,\n          counterDescriptors: counterDescriptors,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (!stream.eat(\"*\")) return false;\n              state.tokenize = tokenCComment;\n              return tokenCComment(stream, state);\n            }\n          },\n          name: \"css\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-scss\", {\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          fontProperties: fontProperties,\n          allowNested: true,\n          lineComment: \"//\",\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return [\"comment\", \"comment\"];\n              } else if (stream.eat(\"*\")) {\n                state.tokenize = tokenCComment;\n                return tokenCComment(stream, state);\n              } else {\n                return [\"operator\", \"operator\"];\n              }\n            },\n            \":\": function _(stream) {\n              if (stream.match(/\\s*\\{/, false)) return [null, null];\n              return false;\n            },\n            \"$\": function $(stream) {\n              stream.match(/^[\\w-]+/);\n              if (stream.match(/^\\s*:/, false)) return [\"variable-2\", \"variable-definition\"];\n              return [\"variable-2\", \"variable\"];\n            },\n            \"#\": function _(stream) {\n              if (!stream.eat(\"{\")) return false;\n              return [null, \"interpolation\"];\n            }\n          },\n          name: \"css\",\n          helperType: \"scss\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-less\", {\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          mediaValueKeywords: mediaValueKeywords,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          fontProperties: fontProperties,\n          allowNested: true,\n          lineComment: \"//\",\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return [\"comment\", \"comment\"];\n              } else if (stream.eat(\"*\")) {\n                state.tokenize = tokenCComment;\n                return tokenCComment(stream, state);\n              } else {\n                return [\"operator\", \"operator\"];\n              }\n            },\n            \"@\": function _(stream) {\n              if (stream.eat(\"{\")) return [null, \"interpolation\"];\n              if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/, false)) return false;\n              stream.eatWhile(/[\\w\\\\\\-]/);\n              if (stream.match(/^\\s*:/, false)) return [\"variable-2\", \"variable-definition\"];\n              return [\"variable-2\", \"variable\"];\n            },\n            \"&\": function _() {\n              return [\"atom\", \"atom\"];\n            }\n          },\n          name: \"css\",\n          helperType: \"less\"\n        });\n\n        CodeMirror.defineMIME(\"text/x-gss\", {\n          documentTypes: documentTypes,\n          mediaTypes: mediaTypes,\n          mediaFeatures: mediaFeatures,\n          propertyKeywords: propertyKeywords,\n          nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n          fontProperties: fontProperties,\n          counterDescriptors: counterDescriptors,\n          colorKeywords: colorKeywords,\n          valueKeywords: valueKeywords,\n          supportsAtComponent: true,\n          tokenHooks: {\n            \"/\": function _(stream, state) {\n              if (!stream.eat(\"*\")) return false;\n              state.tokenize = tokenCComment;\n              return tokenCComment(stream, state);\n            }\n          },\n          name: \"css\",\n          helperType: \"gss\"\n        });\n      });\n    }, { \"../../lib/codemirror\": 7 }], 9: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../javascript/javascript\"), require(\"../css/css\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\", \"../xml/xml\", \"../javascript/javascript\", \"../css/css\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var defaultTags = {\n          script: [[\"lang\", /(javascript|babel)/i, \"javascript\"], [\"type\", /^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, \"javascript\"], [\"type\", /./, \"text/plain\"], [null, null, \"javascript\"]],\n          style: [[\"lang\", /^css$/i, \"css\"], [\"type\", /^(text\\/)?(x-)?(stylesheet|css)$/i, \"css\"], [\"type\", /./, \"text/plain\"], [null, null, \"css\"]]\n        };\n\n        function maybeBackup(stream, pat, style) {\n          var cur = stream.current(),\n              close = cur.search(pat);\n          if (close > -1) {\n            stream.backUp(cur.length - close);\n          } else if (cur.match(/<\\/?$/)) {\n            stream.backUp(cur.length);\n            if (!stream.match(pat, false)) stream.match(cur);\n          }\n          return style;\n        }\n\n        var attrRegexpCache = {};\n        function getAttrRegexp(attr) {\n          var regexp = attrRegexpCache[attr];\n          if (regexp) return regexp;\n          return attrRegexpCache[attr] = new RegExp(\"\\\\s+\" + attr + \"\\\\s*=\\\\s*('|\\\")?([^'\\\"]+)('|\\\")?\\\\s*\");\n        }\n\n        function getAttrValue(text, attr) {\n          var match = text.match(getAttrRegexp(attr));\n          return match ? /^\\s*(.*?)\\s*$/.exec(match[2])[1] : \"\";\n        }\n\n        function getTagRegexp(tagName, anchored) {\n          return new RegExp((anchored ? \"^\" : \"\") + \"<\\/\\s*\" + tagName + \"\\s*>\", \"i\");\n        }\n\n        function addTags(from, to) {\n          for (var tag in from) {\n            var dest = to[tag] || (to[tag] = []);\n            var source = from[tag];\n            for (var i = source.length - 1; i >= 0; i--) {\n              dest.unshift(source[i]);\n            }\n          }\n        }\n\n        function findMatchingMode(tagInfo, tagText) {\n          for (var i = 0; i < tagInfo.length; i++) {\n            var spec = tagInfo[i];\n            if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];\n          }\n        }\n\n        CodeMirror.defineMode(\"htmlmixed\", function (config, parserConfig) {\n          var htmlMode = CodeMirror.getMode(config, {\n            name: \"xml\",\n            htmlMode: true,\n            multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,\n            multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag\n          });\n\n          var tags = {};\n          var configTags = parserConfig && parserConfig.tags,\n              configScript = parserConfig && parserConfig.scriptTypes;\n          addTags(defaultTags, tags);\n          if (configTags) addTags(configTags, tags);\n          if (configScript) for (var i = configScript.length - 1; i >= 0; i--) {\n            tags.script.unshift([\"type\", configScript[i].matches, configScript[i].mode]);\n          }function html(stream, state) {\n            var style = htmlMode.token(stream, state.htmlState),\n                tag = /\\btag\\b/.test(style),\n                tagName;\n            if (tag && !/[<>\\s\\/]/.test(stream.current()) && (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) && tags.hasOwnProperty(tagName)) {\n              state.inTag = tagName + \" \";\n            } else if (state.inTag && tag && />$/.test(stream.current())) {\n              var inTag = /^([\\S]+) (.*)/.exec(state.inTag);\n              state.inTag = null;\n              var modeSpec = stream.current() == \">\" && findMatchingMode(tags[inTag[1]], inTag[2]);\n              var mode = CodeMirror.getMode(config, modeSpec);\n              var endTagA = getTagRegexp(inTag[1], true),\n                  endTag = getTagRegexp(inTag[1], false);\n              state.token = function (stream, state) {\n                if (stream.match(endTagA, false)) {\n                  state.token = html;\n                  state.localState = state.localMode = null;\n                  return null;\n                }\n                return maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));\n              };\n              state.localMode = mode;\n              state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, \"\"));\n            } else if (state.inTag) {\n              state.inTag += stream.current();\n              if (stream.eol()) state.inTag += \" \";\n            }\n            return style;\n          };\n\n          return {\n            startState: function startState() {\n              var state = CodeMirror.startState(htmlMode);\n              return { token: html, inTag: null, localMode: null, localState: null, htmlState: state };\n            },\n\n            copyState: function copyState(state) {\n              var local;\n              if (state.localState) {\n                local = CodeMirror.copyState(state.localMode, state.localState);\n              }\n              return { token: state.token, inTag: state.inTag,\n                localMode: state.localMode, localState: local,\n                htmlState: CodeMirror.copyState(htmlMode, state.htmlState) };\n            },\n\n            token: function token(stream, state) {\n              return state.token(stream, state);\n            },\n\n            indent: function indent(state, textAfter, line) {\n              if (!state.localMode || /^\\s*<\\//.test(textAfter)) return htmlMode.indent(state.htmlState, textAfter);else if (state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line);else return CodeMirror.Pass;\n            },\n\n            innerMode: function innerMode(state) {\n              return { state: state.localState || state.htmlState, mode: state.localMode || htmlMode };\n            }\n          };\n        }, \"xml\", \"javascript\", \"css\");\n\n        CodeMirror.defineMIME(\"text/html\", \"htmlmixed\");\n      });\n    }, { \"../../lib/codemirror\": 7, \"../css/css\": 8, \"../javascript/javascript\": 10, \"../xml/xml\": 11 }], 10: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        CodeMirror.defineMode(\"javascript\", function (config, parserConfig) {\n          var indentUnit = config.indentUnit;\n          var statementIndent = parserConfig.statementIndent;\n          var jsonldMode = parserConfig.jsonld;\n          var jsonMode = parserConfig.json || jsonldMode;\n          var isTS = parserConfig.typescript;\n          var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n          // Tokenizer\n\n          var keywords = function () {\n            function kw(type) {\n              return { type: type, style: \"keyword\" };\n            }\n            var A = kw(\"keyword a\"),\n                B = kw(\"keyword b\"),\n                C = kw(\"keyword c\");\n            var operator = kw(\"operator\"),\n                atom = { type: \"atom\", style: \"atom\" };\n\n            var jsKeywords = {\n              \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n              \"return\": C, \"break\": C, \"continue\": C, \"new\": kw(\"new\"), \"delete\": C, \"throw\": C, \"debugger\": C,\n              \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n              \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n              \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n              \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n              \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n              \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n              \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n              \"await\": C\n            };\n\n            // Extend the 'normal' keywords with the TypeScript language extensions\n            if (isTS) {\n              var type = { type: \"variable\", style: \"type\" };\n              var tsKeywords = {\n                // object-like things\n                \"interface\": kw(\"class\"),\n                \"implements\": C,\n                \"namespace\": C,\n                \"module\": kw(\"module\"),\n                \"enum\": kw(\"module\"),\n\n                // scope modifiers\n                \"public\": kw(\"modifier\"),\n                \"private\": kw(\"modifier\"),\n                \"protected\": kw(\"modifier\"),\n                \"abstract\": kw(\"modifier\"),\n                \"readonly\": kw(\"modifier\"),\n\n                // types\n                \"string\": type, \"number\": type, \"boolean\": type, \"any\": type\n              };\n\n              for (var attr in tsKeywords) {\n                jsKeywords[attr] = tsKeywords[attr];\n              }\n            }\n\n            return jsKeywords;\n          }();\n\n          var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n          var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n          function readRegexp(stream) {\n            var escaped = false,\n                next,\n                inSet = false;\n            while ((next = stream.next()) != null) {\n              if (!escaped) {\n                if (next == \"/\" && !inSet) return;\n                if (next == \"[\") inSet = true;else if (inSet && next == \"]\") inSet = false;\n              }\n              escaped = !escaped && next == \"\\\\\";\n            }\n          }\n\n          // Used as scratch variables to communicate multiple values without\n          // consing up tons of objects.\n          var type, content;\n          function ret(tp, style, cont) {\n            type = tp;content = cont;\n            return style;\n          }\n          function tokenBase(stream, state) {\n            var ch = stream.next();\n            if (ch == '\"' || ch == \"'\") {\n              state.tokenize = tokenString(ch);\n              return state.tokenize(stream, state);\n            } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n              return ret(\"number\", \"number\");\n            } else if (ch == \".\" && stream.match(\"..\")) {\n              return ret(\"spread\", \"meta\");\n            } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n              return ret(ch);\n            } else if (ch == \"=\" && stream.eat(\">\")) {\n              return ret(\"=>\", \"operator\");\n            } else if (ch == \"0\" && stream.eat(/x/i)) {\n              stream.eatWhile(/[\\da-f]/i);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"0\" && stream.eat(/o/i)) {\n              stream.eatWhile(/[0-7]/i);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"0\" && stream.eat(/b/i)) {\n              stream.eatWhile(/[01]/i);\n              return ret(\"number\", \"number\");\n            } else if (/\\d/.test(ch)) {\n              stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n              return ret(\"number\", \"number\");\n            } else if (ch == \"/\") {\n              if (stream.eat(\"*\")) {\n                state.tokenize = tokenComment;\n                return tokenComment(stream, state);\n              } else if (stream.eat(\"/\")) {\n                stream.skipToEnd();\n                return ret(\"comment\", \"comment\");\n              } else if (expressionAllowed(stream, state, 1)) {\n                readRegexp(stream);\n                stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n                return ret(\"regexp\", \"string-2\");\n              } else {\n                stream.eatWhile(isOperatorChar);\n                return ret(\"operator\", \"operator\", stream.current());\n              }\n            } else if (ch == \"`\") {\n              state.tokenize = tokenQuasi;\n              return tokenQuasi(stream, state);\n            } else if (ch == \"#\") {\n              stream.skipToEnd();\n              return ret(\"error\", \"error\");\n            } else if (isOperatorChar.test(ch)) {\n              if (ch != \">\" || !state.lexical || state.lexical.type != \">\") stream.eatWhile(isOperatorChar);\n              return ret(\"operator\", \"operator\", stream.current());\n            } else if (wordRE.test(ch)) {\n              stream.eatWhile(wordRE);\n              var word = stream.current();\n              if (state.lastType != \".\") {\n                if (keywords.propertyIsEnumerable(word)) {\n                  var kw = keywords[word];\n                  return ret(kw.type, kw.style, word);\n                }\n                if (word == \"async\" && stream.match(/^\\s*[\\(\\w]/, false)) return ret(\"async\", \"keyword\", word);\n              }\n              return ret(\"variable\", \"variable\", word);\n            }\n          }\n\n          function tokenString(quote) {\n            return function (stream, state) {\n              var escaped = false,\n                  next;\n              if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)) {\n                state.tokenize = tokenBase;\n                return ret(\"jsonld-keyword\", \"meta\");\n              }\n              while ((next = stream.next()) != null) {\n                if (next == quote && !escaped) break;\n                escaped = !escaped && next == \"\\\\\";\n              }\n              if (!escaped) state.tokenize = tokenBase;\n              return ret(\"string\", \"string\");\n            };\n          }\n\n          function tokenComment(stream, state) {\n            var maybeEnd = false,\n                ch;\n            while (ch = stream.next()) {\n              if (ch == \"/\" && maybeEnd) {\n                state.tokenize = tokenBase;\n                break;\n              }\n              maybeEnd = ch == \"*\";\n            }\n            return ret(\"comment\", \"comment\");\n          }\n\n          function tokenQuasi(stream, state) {\n            var escaped = false,\n                next;\n            while ((next = stream.next()) != null) {\n              if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n                state.tokenize = tokenBase;\n                break;\n              }\n              escaped = !escaped && next == \"\\\\\";\n            }\n            return ret(\"quasi\", \"string-2\", stream.current());\n          }\n\n          var brackets = \"([{}])\";\n          // This is a crude lookahead trick to try and notice that we're\n          // parsing the argument patterns for a fat-arrow function before we\n          // actually hit the arrow token. It only works if the arrow is on\n          // the same line as the arguments and there's no strange noise\n          // (comments) in between. Fallback is to only notice when we hit the\n          // arrow, and not declare the arguments as locals for the arrow\n          // body.\n          function findFatArrow(stream, state) {\n            if (state.fatArrowAt) state.fatArrowAt = null;\n            var arrow = stream.string.indexOf(\"=>\", stream.start);\n            if (arrow < 0) return;\n\n            if (isTS) {\n              // Try to skip TypeScript return type declarations after the arguments\n              var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow));\n              if (m) arrow = m.index;\n            }\n\n            var depth = 0,\n                sawSomething = false;\n            for (var pos = arrow - 1; pos >= 0; --pos) {\n              var ch = stream.string.charAt(pos);\n              var bracket = brackets.indexOf(ch);\n              if (bracket >= 0 && bracket < 3) {\n                if (!depth) {\n                  ++pos;break;\n                }\n                if (--depth == 0) {\n                  if (ch == \"(\") sawSomething = true;break;\n                }\n              } else if (bracket >= 3 && bracket < 6) {\n                ++depth;\n              } else if (wordRE.test(ch)) {\n                sawSomething = true;\n              } else if (/[\"'\\/]/.test(ch)) {\n                return;\n              } else if (sawSomething && !depth) {\n                ++pos;\n                break;\n              }\n            }\n            if (sawSomething && !depth) state.fatArrowAt = pos;\n          }\n\n          // Parser\n\n          var atomicTypes = { \"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true };\n\n          function JSLexical(indented, column, type, align, prev, info) {\n            this.indented = indented;\n            this.column = column;\n            this.type = type;\n            this.prev = prev;\n            this.info = info;\n            if (align != null) this.align = align;\n          }\n\n          function inScope(state, varname) {\n            for (var v = state.localVars; v; v = v.next) {\n              if (v.name == varname) return true;\n            }for (var cx = state.context; cx; cx = cx.prev) {\n              for (var v = cx.vars; v; v = v.next) {\n                if (v.name == varname) return true;\n              }\n            }\n          }\n\n          function parseJS(state, style, type, content, stream) {\n            var cc = state.cc;\n            // Communicate our context to the combinators.\n            // (Less wasteful than consing up a hundred closures on every call.)\n            cx.state = state;cx.stream = stream;cx.marked = null, cx.cc = cc;cx.style = style;\n\n            if (!state.lexical.hasOwnProperty(\"align\")) state.lexical.align = true;\n\n            while (true) {\n              var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n              if (combinator(type, content)) {\n                while (cc.length && cc[cc.length - 1].lex) {\n                  cc.pop()();\n                }if (cx.marked) return cx.marked;\n                if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n                return style;\n              }\n            }\n          }\n\n          // Combinator utils\n\n          var cx = { state: null, column: null, marked: null, cc: null };\n          function pass() {\n            for (var i = arguments.length - 1; i >= 0; i--) {\n              cx.cc.push(arguments[i]);\n            }\n          }\n          function cont() {\n            pass.apply(null, arguments);\n            return true;\n          }\n          function register(varname) {\n            function inList(list) {\n              for (var v = list; v; v = v.next) {\n                if (v.name == varname) return true;\n              }return false;\n            }\n            var state = cx.state;\n            cx.marked = \"def\";\n            if (state.context) {\n              if (inList(state.localVars)) return;\n              state.localVars = { name: varname, next: state.localVars };\n            } else {\n              if (inList(state.globalVars)) return;\n              if (parserConfig.globalVars) state.globalVars = { name: varname, next: state.globalVars };\n            }\n          }\n\n          // Combinators\n\n          var defaultVars = { name: \"this\", next: { name: \"arguments\" } };\n          function pushcontext() {\n            cx.state.context = { prev: cx.state.context, vars: cx.state.localVars };\n            cx.state.localVars = defaultVars;\n          }\n          function popcontext() {\n            cx.state.localVars = cx.state.context.vars;\n            cx.state.context = cx.state.context.prev;\n          }\n          function pushlex(type, info) {\n            var result = function result() {\n              var state = cx.state,\n                  indent = state.indented;\n              if (state.lexical.type == \"stat\") indent = state.lexical.indented;else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev) {\n                indent = outer.indented;\n              }state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n            };\n            result.lex = true;\n            return result;\n          }\n          function poplex() {\n            var state = cx.state;\n            if (state.lexical.prev) {\n              if (state.lexical.type == \")\") state.indented = state.lexical.indented;\n              state.lexical = state.lexical.prev;\n            }\n          }\n          poplex.lex = true;\n\n          function expect(wanted) {\n            function exp(type) {\n              if (type == wanted) return cont();else if (wanted == \";\") return pass();else return cont(exp);\n            };\n            return exp;\n          }\n\n          function statement(type, value) {\n            if (type == \"var\") return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n            if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n            if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n            if (type == \"{\") return cont(pushlex(\"}\"), block, poplex);\n            if (type == \";\") return cont();\n            if (type == \"if\") {\n              if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex) cx.state.cc.pop()();\n              return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n            }\n            if (type == \"function\") return cont(functiondef);\n            if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n            if (type == \"variable\") {\n              if (isTS && value == \"type\") {\n                cx.marked = \"keyword\";\n                return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n              }if (isTS && value == \"declare\") {\n                cx.marked = \"keyword\";\n                return cont(statement);\n              } else {\n                return cont(pushlex(\"stat\"), maybelabel);\n              }\n            }\n            if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), block, poplex, poplex);\n            if (type == \"case\") return cont(expression, expect(\":\"));\n            if (type == \"default\") return cont(expect(\":\"));\n            if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"), statement, poplex, popcontext);\n            if (type == \"class\") return cont(pushlex(\"form\"), className, poplex);\n            if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n            if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n            if (type == \"module\") return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex);\n            if (type == \"async\") return cont(statement);\n            if (value == \"@\") return cont(expression, statement);\n            return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n          }\n          function expression(type) {\n            return expressionInner(type, false);\n          }\n          function expressionNoComma(type) {\n            return expressionInner(type, true);\n          }\n          function parenExpr(type) {\n            if (type != \"(\") return pass();\n            return cont(pushlex(\")\"), expression, expect(\")\"), poplex);\n          }\n          function expressionInner(type, noComma) {\n            if (cx.state.fatArrowAt == cx.stream.start) {\n              var body = noComma ? arrowBodyNoComma : arrowBody;\n              if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(pattern, \")\"), poplex, expect(\"=>\"), body, popcontext);else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n            }\n\n            var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n            if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n            if (type == \"function\") return cont(functiondef, maybeop);\n            if (type == \"class\") return cont(pushlex(\"form\"), classExpression, poplex);\n            if (type == \"keyword c\" || type == \"async\") return cont(noComma ? maybeexpressionNoComma : maybeexpression);\n            if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n            if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n            if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n            if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n            if (type == \"quasi\") return pass(quasi, maybeop);\n            if (type == \"new\") return cont(maybeTarget(noComma));\n            return cont();\n          }\n          function maybeexpression(type) {\n            if (type.match(/[;\\}\\)\\],]/)) return pass();\n            return pass(expression);\n          }\n          function maybeexpressionNoComma(type) {\n            if (type.match(/[;\\}\\)\\],]/)) return pass();\n            return pass(expressionNoComma);\n          }\n\n          function maybeoperatorComma(type, value) {\n            if (type == \",\") return cont(expression);\n            return maybeoperatorNoComma(type, value, false);\n          }\n          function maybeoperatorNoComma(type, value, noComma) {\n            var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n            var expr = noComma == false ? expression : expressionNoComma;\n            if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n            if (type == \"operator\") {\n              if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n              if (value == \"?\") return cont(expression, expect(\":\"), expr);\n              return cont(expr);\n            }\n            if (type == \"quasi\") {\n              return pass(quasi, me);\n            }\n            if (type == \";\") return;\n            if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n            if (type == \".\") return cont(property, me);\n            if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n            if (isTS && value == \"as\") {\n              cx.marked = \"keyword\";return cont(typeexpr, me);\n            }\n          }\n          function quasi(type, value) {\n            if (type != \"quasi\") return pass();\n            if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n            return cont(expression, continueQuasi);\n          }\n          function continueQuasi(type) {\n            if (type == \"}\") {\n              cx.marked = \"string-2\";\n              cx.state.tokenize = tokenQuasi;\n              return cont(quasi);\n            }\n          }\n          function arrowBody(type) {\n            findFatArrow(cx.stream, cx.state);\n            return pass(type == \"{\" ? statement : expression);\n          }\n          function arrowBodyNoComma(type) {\n            findFatArrow(cx.stream, cx.state);\n            return pass(type == \"{\" ? statement : expressionNoComma);\n          }\n          function maybeTarget(noComma) {\n            return function (type) {\n              if (type == \".\") return cont(noComma ? targetNoComma : target);else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma);else return pass(noComma ? expressionNoComma : expression);\n            };\n          }\n          function target(_, value) {\n            if (value == \"target\") {\n              cx.marked = \"keyword\";return cont(maybeoperatorComma);\n            }\n          }\n          function targetNoComma(_, value) {\n            if (value == \"target\") {\n              cx.marked = \"keyword\";return cont(maybeoperatorNoComma);\n            }\n          }\n          function maybelabel(type) {\n            if (type == \":\") return cont(poplex, statement);\n            return pass(maybeoperatorComma, expect(\";\"), poplex);\n          }\n          function property(type) {\n            if (type == \"variable\") {\n              cx.marked = \"property\";return cont();\n            }\n          }\n          function objprop(type, value) {\n            if (type == \"async\") {\n              cx.marked = \"property\";\n              return cont(objprop);\n            } else if (type == \"variable\" || cx.style == \"keyword\") {\n              cx.marked = \"property\";\n              if (value == \"get\" || value == \"set\") return cont(getterSetter);\n              return cont(afterprop);\n            } else if (type == \"number\" || type == \"string\") {\n              cx.marked = jsonldMode ? \"property\" : cx.style + \" property\";\n              return cont(afterprop);\n            } else if (type == \"jsonld-keyword\") {\n              return cont(afterprop);\n            } else if (type == \"modifier\") {\n              return cont(objprop);\n            } else if (type == \"[\") {\n              return cont(expression, expect(\"]\"), afterprop);\n            } else if (type == \"spread\") {\n              return cont(expression, afterprop);\n            } else if (type == \":\") {\n              return pass(afterprop);\n            }\n          }\n          function getterSetter(type) {\n            if (type != \"variable\") return pass(afterprop);\n            cx.marked = \"property\";\n            return cont(functiondef);\n          }\n          function afterprop(type) {\n            if (type == \":\") return cont(expressionNoComma);\n            if (type == \"(\") return pass(functiondef);\n          }\n          function commasep(what, end, sep) {\n            function proceed(type, value) {\n              if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n                var lex = cx.state.lexical;\n                if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n                return cont(function (type, value) {\n                  if (type == end || value == end) return pass();\n                  return pass(what);\n                }, proceed);\n              }\n              if (type == end || value == end) return cont();\n              return cont(expect(end));\n            }\n            return function (type, value) {\n              if (type == end || value == end) return cont();\n              return pass(what, proceed);\n            };\n          }\n          function contCommasep(what, end, info) {\n            for (var i = 3; i < arguments.length; i++) {\n              cx.cc.push(arguments[i]);\n            }return cont(pushlex(end, info), commasep(what, end), poplex);\n          }\n          function block(type) {\n            if (type == \"}\") return cont();\n            return pass(statement, block);\n          }\n          function maybetype(type, value) {\n            if (isTS) {\n              if (type == \":\") return cont(typeexpr);\n              if (value == \"?\") return cont(maybetype);\n            }\n          }\n          function typeexpr(type, value) {\n            if (type == \"variable\") {\n              if (value == \"keyof\") {\n                cx.marked = \"keyword\";\n                return cont(typeexpr);\n              } else {\n                cx.marked = \"type\";\n                return cont(afterType);\n              }\n            }\n            if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n            if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType);\n            if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType);\n            if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType);\n          }\n          function maybeReturnType(type) {\n            if (type == \"=>\") return cont(typeexpr);\n          }\n          function typeprop(type, value) {\n            if (type == \"variable\" || cx.style == \"keyword\") {\n              cx.marked = \"property\";\n              return cont(typeprop);\n            } else if (value == \"?\") {\n              return cont(typeprop);\n            } else if (type == \":\") {\n              return cont(typeexpr);\n            } else if (type == \"[\") {\n              return cont(expression, maybetype, expect(\"]\"), typeprop);\n            }\n          }\n          function typearg(type) {\n            if (type == \"variable\") return cont(typearg);else if (type == \":\") return cont(typeexpr);\n          }\n          function afterType(type, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType);\n            if (value == \"|\" || type == \".\") return cont(typeexpr);\n            if (type == \"[\") return cont(expect(\"]\"), afterType);\n            if (value == \"extends\") return cont(typeexpr);\n          }\n          function maybeTypeArgs(_, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType);\n          }\n          function vardef() {\n            return pass(pattern, maybetype, maybeAssign, vardefCont);\n          }\n          function pattern(type, value) {\n            if (type == \"modifier\") return cont(pattern);\n            if (type == \"variable\") {\n              register(value);return cont();\n            }\n            if (type == \"spread\") return cont(pattern);\n            if (type == \"[\") return contCommasep(pattern, \"]\");\n            if (type == \"{\") return contCommasep(proppattern, \"}\");\n          }\n          function proppattern(type, value) {\n            if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n              register(value);\n              return cont(maybeAssign);\n            }\n            if (type == \"variable\") cx.marked = \"property\";\n            if (type == \"spread\") return cont(pattern);\n            if (type == \"}\") return pass();\n            return cont(expect(\":\"), pattern, maybeAssign);\n          }\n          function maybeAssign(_type, value) {\n            if (value == \"=\") return cont(expressionNoComma);\n          }\n          function vardefCont(type) {\n            if (type == \",\") return cont(vardef);\n          }\n          function maybeelse(type, value) {\n            if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n          }\n          function forspec(type) {\n            if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n          }\n          function forspec1(type) {\n            if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n            if (type == \";\") return cont(forspec2);\n            if (type == \"variable\") return cont(formaybeinof);\n            return pass(expression, expect(\";\"), forspec2);\n          }\n          function formaybeinof(_type, value) {\n            if (value == \"in\" || value == \"of\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n            return cont(maybeoperatorComma, forspec2);\n          }\n          function forspec2(type, value) {\n            if (type == \";\") return cont(forspec3);\n            if (value == \"in\" || value == \"of\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n            return pass(expression, expect(\";\"), forspec3);\n          }\n          function forspec3(type) {\n            if (type != \")\") cont(expression);\n          }\n          function functiondef(type, value) {\n            if (value == \"*\") {\n              cx.marked = \"keyword\";return cont(functiondef);\n            }\n            if (type == \"variable\") {\n              register(value);return cont(functiondef);\n            }\n            if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, maybetype, statement, popcontext);\n            if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, functiondef);\n          }\n          function funarg(type) {\n            if (type == \"spread\" || type == \"modifier\") return cont(funarg);\n            return pass(pattern, maybetype, maybeAssign);\n          }\n          function classExpression(type, value) {\n            // Class expressions may have an optional name.\n            if (type == \"variable\") return className(type, value);\n            return classNameAfter(type, value);\n          }\n          function className(type, value) {\n            if (type == \"variable\") {\n              register(value);return cont(classNameAfter);\n            }\n          }\n          function classNameAfter(type, value) {\n            if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, classNameAfter);\n            if (value == \"extends\" || value == \"implements\" || isTS && type == \",\") return cont(isTS ? typeexpr : expression, classNameAfter);\n            if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n          }\n          function classBody(type, value) {\n            if (type == \"modifier\" || type == \"async\" || type == \"variable\" && (value == \"static\" || value == \"get\" || value == \"set\") && cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false)) {\n              cx.marked = \"keyword\";\n              return cont(classBody);\n            }\n            if (type == \"variable\") {\n              cx.marked = \"property\";\n              return cont(isTS ? classfield : functiondef, classBody);\n            }\n            if (type == \"[\") return cont(expression, expect(\"]\"), isTS ? classfield : functiondef, classBody);\n            if (value == \"*\") {\n              cx.marked = \"keyword\";\n              return cont(classBody);\n            }\n            if (type == \";\") return cont(classBody);\n            if (type == \"}\") return cont();\n            if (value == \"@\") return cont(expression, classBody);\n          }\n          function classfield(type, value) {\n            if (value == \"?\") return cont(classfield);\n            if (type == \":\") return cont(typeexpr, maybeAssign);\n            if (value == \"=\") return cont(expressionNoComma);\n            return pass(functiondef);\n          }\n          function afterExport(type, value) {\n            if (value == \"*\") {\n              cx.marked = \"keyword\";return cont(maybeFrom, expect(\";\"));\n            }\n            if (value == \"default\") {\n              cx.marked = \"keyword\";return cont(expression, expect(\";\"));\n            }\n            if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n            return pass(statement);\n          }\n          function exportField(type, value) {\n            if (value == \"as\") {\n              cx.marked = \"keyword\";return cont(expect(\"variable\"));\n            }\n            if (type == \"variable\") return pass(expressionNoComma, exportField);\n          }\n          function afterImport(type) {\n            if (type == \"string\") return cont();\n            return pass(importSpec, maybeMoreImports, maybeFrom);\n          }\n          function importSpec(type, value) {\n            if (type == \"{\") return contCommasep(importSpec, \"}\");\n            if (type == \"variable\") register(value);\n            if (value == \"*\") cx.marked = \"keyword\";\n            return cont(maybeAs);\n          }\n          function maybeMoreImports(type) {\n            if (type == \",\") return cont(importSpec, maybeMoreImports);\n          }\n          function maybeAs(_type, value) {\n            if (value == \"as\") {\n              cx.marked = \"keyword\";return cont(importSpec);\n            }\n          }\n          function maybeFrom(_type, value) {\n            if (value == \"from\") {\n              cx.marked = \"keyword\";return cont(expression);\n            }\n          }\n          function arrayLiteral(type) {\n            if (type == \"]\") return cont();\n            return pass(commasep(expressionNoComma, \"]\"));\n          }\n\n          function isContinuedStatement(state, textAfter) {\n            return state.lastType == \"operator\" || state.lastType == \",\" || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));\n          }\n\n          function expressionAllowed(stream, state, backUp) {\n            return state.tokenize == tokenBase && /^(?:operator|sof|keyword c|case|new|export|default|[\\[{}\\(,;:]|=>)$/.test(state.lastType) || state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0)));\n          }\n\n          // Interface\n\n          return {\n            startState: function startState(basecolumn) {\n              var state = {\n                tokenize: tokenBase,\n                lastType: \"sof\",\n                cc: [],\n                lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n                localVars: parserConfig.localVars,\n                context: parserConfig.localVars && { vars: parserConfig.localVars },\n                indented: basecolumn || 0\n              };\n              if (parserConfig.globalVars && _typeof(parserConfig.globalVars) == \"object\") state.globalVars = parserConfig.globalVars;\n              return state;\n            },\n\n            token: function token(stream, state) {\n              if (stream.sol()) {\n                if (!state.lexical.hasOwnProperty(\"align\")) state.lexical.align = false;\n                state.indented = stream.indentation();\n                findFatArrow(stream, state);\n              }\n              if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n              var style = state.tokenize(stream, state);\n              if (type == \"comment\") return style;\n              state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n              return parseJS(state, style, type, content, stream);\n            },\n\n            indent: function indent(state, textAfter) {\n              if (state.tokenize == tokenComment) return CodeMirror.Pass;\n              if (state.tokenize != tokenBase) return 0;\n              var firstChar = textAfter && textAfter.charAt(0),\n                  lexical = state.lexical,\n                  top;\n              // Kludge to prevent 'maybelse' from blocking lexical scope pops\n              if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n                var c = state.cc[i];\n                if (c == poplex) lexical = lexical.prev;else if (c != maybeelse) break;\n              }\n              while ((lexical.type == \"stat\" || lexical.type == \"form\") && (firstChar == \"}\" || (top = state.cc[state.cc.length - 1]) && (top == maybeoperatorComma || top == maybeoperatorNoComma) && !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))) {\n                lexical = lexical.prev;\n              }if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\") lexical = lexical.prev;\n              var type = lexical.type,\n                  closing = firstChar == type;\n\n              if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);else if (type == \"form\" && firstChar == \"{\") return lexical.indented;else if (type == \"form\") return lexical.indented + indentUnit;else if (type == \"stat\") return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false) return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);else if (lexical.align) return lexical.column + (closing ? 0 : 1);else return lexical.indented + (closing ? 0 : indentUnit);\n            },\n\n            electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n            blockCommentStart: jsonMode ? null : \"/*\",\n            blockCommentEnd: jsonMode ? null : \"*/\",\n            lineComment: jsonMode ? null : \"//\",\n            fold: \"brace\",\n            closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n            helperType: jsonMode ? \"json\" : \"javascript\",\n            jsonldMode: jsonldMode,\n            jsonMode: jsonMode,\n\n            expressionAllowed: expressionAllowed,\n\n            skipExpression: function skipExpression(state) {\n              var top = state.cc[state.cc.length - 1];\n              if (top == expression || top == expressionNoComma) state.cc.pop();\n            }\n          };\n        });\n\n        CodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\n        CodeMirror.defineMIME(\"text/javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\n        CodeMirror.defineMIME(\"application/json\", { name: \"javascript\", json: true });\n        CodeMirror.defineMIME(\"application/x-json\", { name: \"javascript\", json: true });\n        CodeMirror.defineMIME(\"application/ld+json\", { name: \"javascript\", jsonld: true });\n        CodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\n        CodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n      });\n    }, { \"../../lib/codemirror\": 7 }], 11: [function (require, module, exports) {\n      // CodeMirror, copyright (c) by Marijn Haverbeke and others\n      // Distributed under an MIT license: http://codemirror.net/LICENSE\n\n      (function (mod) {\n        if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) == \"object\" && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) == \"object\") // CommonJS\n          mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n          define([\"../../lib/codemirror\"], mod);else // Plain browser env\n          mod(CodeMirror);\n      })(function (CodeMirror) {\n        \"use strict\";\n\n        var htmlConfig = {\n          autoSelfClosers: { 'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n            'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n            'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n            'track': true, 'wbr': true, 'menuitem': true },\n          implicitlyClosed: { 'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n            'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n            'th': true, 'tr': true },\n          contextGrabbers: {\n            'dd': { 'dd': true, 'dt': true },\n            'dt': { 'dd': true, 'dt': true },\n            'li': { 'li': true },\n            'option': { 'option': true, 'optgroup': true },\n            'optgroup': { 'optgroup': true },\n            'p': { 'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n              'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n              'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n              'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n              'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true },\n            'rp': { 'rp': true, 'rt': true },\n            'rt': { 'rp': true, 'rt': true },\n            'tbody': { 'tbody': true, 'tfoot': true },\n            'td': { 'td': true, 'th': true },\n            'tfoot': { 'tbody': true },\n            'th': { 'td': true, 'th': true },\n            'thead': { 'tbody': true, 'tfoot': true },\n            'tr': { 'tr': true }\n          },\n          doNotIndent: { \"pre\": true },\n          allowUnquoted: true,\n          allowMissing: true,\n          caseFold: true\n        };\n\n        var xmlConfig = {\n          autoSelfClosers: {},\n          implicitlyClosed: {},\n          contextGrabbers: {},\n          doNotIndent: {},\n          allowUnquoted: false,\n          allowMissing: false,\n          caseFold: false\n        };\n\n        CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n          var indentUnit = editorConf.indentUnit;\n          var config = {};\n          var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n          for (var prop in defaults) {\n            config[prop] = defaults[prop];\n          }for (var prop in config_) {\n            config[prop] = config_[prop];\n          } // Return variables for tokenizers\n          var type, setStyle;\n\n          function inText(stream, state) {\n            function chain(parser) {\n              state.tokenize = parser;\n              return parser(stream, state);\n            }\n\n            var ch = stream.next();\n            if (ch == \"<\") {\n              if (stream.eat(\"!\")) {\n                if (stream.eat(\"[\")) {\n                  if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n                } else if (stream.match(\"--\")) {\n                  return chain(inBlock(\"comment\", \"-->\"));\n                } else if (stream.match(\"DOCTYPE\", true, true)) {\n                  stream.eatWhile(/[\\w\\._\\-]/);\n                  return chain(doctype(1));\n                } else {\n                  return null;\n                }\n              } else if (stream.eat(\"?\")) {\n                stream.eatWhile(/[\\w\\._\\-]/);\n                state.tokenize = inBlock(\"meta\", \"?>\");\n                return \"meta\";\n              } else {\n                type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n                state.tokenize = inTag;\n                return \"tag bracket\";\n              }\n            } else if (ch == \"&\") {\n              var ok;\n              if (stream.eat(\"#\")) {\n                if (stream.eat(\"x\")) {\n                  ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n                } else {\n                  ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n                }\n              } else {\n                ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n              }\n              return ok ? \"atom\" : \"error\";\n            } else {\n              stream.eatWhile(/[^&<]/);\n              return null;\n            }\n          }\n          inText.isInText = true;\n\n          function inTag(stream, state) {\n            var ch = stream.next();\n            if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n              state.tokenize = inText;\n              type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n              return \"tag bracket\";\n            } else if (ch == \"=\") {\n              type = \"equals\";\n              return null;\n            } else if (ch == \"<\") {\n              state.tokenize = inText;\n              state.state = baseState;\n              state.tagName = state.tagStart = null;\n              var next = state.tokenize(stream, state);\n              return next ? next + \" tag error\" : \"tag error\";\n            } else if (/[\\'\\\"]/.test(ch)) {\n              state.tokenize = inAttribute(ch);\n              state.stringStartCol = stream.column();\n              return state.tokenize(stream, state);\n            } else {\n              stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n              return \"word\";\n            }\n          }\n\n          function inAttribute(quote) {\n            var closure = function closure(stream, state) {\n              while (!stream.eol()) {\n                if (stream.next() == quote) {\n                  state.tokenize = inTag;\n                  break;\n                }\n              }\n              return \"string\";\n            };\n            closure.isInAttribute = true;\n            return closure;\n          }\n\n          function inBlock(style, terminator) {\n            return function (stream, state) {\n              while (!stream.eol()) {\n                if (stream.match(terminator)) {\n                  state.tokenize = inText;\n                  break;\n                }\n                stream.next();\n              }\n              return style;\n            };\n          }\n          function doctype(depth) {\n            return function (stream, state) {\n              var ch;\n              while ((ch = stream.next()) != null) {\n                if (ch == \"<\") {\n                  state.tokenize = doctype(depth + 1);\n                  return state.tokenize(stream, state);\n                } else if (ch == \">\") {\n                  if (depth == 1) {\n                    state.tokenize = inText;\n                    break;\n                  } else {\n                    state.tokenize = doctype(depth - 1);\n                    return state.tokenize(stream, state);\n                  }\n                }\n              }\n              return \"meta\";\n            };\n          }\n\n          function Context(state, tagName, startOfLine) {\n            this.prev = state.context;\n            this.tagName = tagName;\n            this.indent = state.indented;\n            this.startOfLine = startOfLine;\n            if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n          }\n          function popContext(state) {\n            if (state.context) state.context = state.context.prev;\n          }\n          function maybePopContext(state, nextTagName) {\n            var parentTagName;\n            while (true) {\n              if (!state.context) {\n                return;\n              }\n              parentTagName = state.context.tagName;\n              if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n                return;\n              }\n              popContext(state);\n            }\n          }\n\n          function baseState(type, stream, state) {\n            if (type == \"openTag\") {\n              state.tagStart = stream.column();\n              return tagNameState;\n            } else if (type == \"closeTag\") {\n              return closeTagNameState;\n            } else {\n              return baseState;\n            }\n          }\n          function tagNameState(type, stream, state) {\n            if (type == \"word\") {\n              state.tagName = stream.current();\n              setStyle = \"tag\";\n              return attrState;\n            } else {\n              setStyle = \"error\";\n              return tagNameState;\n            }\n          }\n          function closeTagNameState(type, stream, state) {\n            if (type == \"word\") {\n              var tagName = stream.current();\n              if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n              if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n                setStyle = \"tag\";\n                return closeState;\n              } else {\n                setStyle = \"tag error\";\n                return closeStateErr;\n              }\n            } else {\n              setStyle = \"error\";\n              return closeStateErr;\n            }\n          }\n\n          function closeState(type, _stream, state) {\n            if (type != \"endTag\") {\n              setStyle = \"error\";\n              return closeState;\n            }\n            popContext(state);\n            return baseState;\n          }\n          function closeStateErr(type, stream, state) {\n            setStyle = \"error\";\n            return closeState(type, stream, state);\n          }\n\n          function attrState(type, _stream, state) {\n            if (type == \"word\") {\n              setStyle = \"attribute\";\n              return attrEqState;\n            } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n              var tagName = state.tagName,\n                  tagStart = state.tagStart;\n              state.tagName = state.tagStart = null;\n              if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n                maybePopContext(state, tagName);\n              } else {\n                maybePopContext(state, tagName);\n                state.context = new Context(state, tagName, tagStart == state.indented);\n              }\n              return baseState;\n            }\n            setStyle = \"error\";\n            return attrState;\n          }\n          function attrEqState(type, stream, state) {\n            if (type == \"equals\") return attrValueState;\n            if (!config.allowMissing) setStyle = \"error\";\n            return attrState(type, stream, state);\n          }\n          function attrValueState(type, stream, state) {\n            if (type == \"string\") return attrContinuedState;\n            if (type == \"word\" && config.allowUnquoted) {\n              setStyle = \"string\";return attrState;\n            }\n            setStyle = \"error\";\n            return attrState(type, stream, state);\n          }\n          function attrContinuedState(type, stream, state) {\n            if (type == \"string\") return attrContinuedState;\n            return attrState(type, stream, state);\n          }\n\n          return {\n            startState: function startState(baseIndent) {\n              var state = { tokenize: inText,\n                state: baseState,\n                indented: baseIndent || 0,\n                tagName: null, tagStart: null,\n                context: null };\n              if (baseIndent != null) state.baseIndent = baseIndent;\n              return state;\n            },\n\n            token: function token(stream, state) {\n              if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n\n              if (stream.eatSpace()) return null;\n              type = null;\n              var style = state.tokenize(stream, state);\n              if ((style || type) && style != \"comment\") {\n                setStyle = null;\n                state.state = state.state(type || style, stream, state);\n                if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n              }\n              return style;\n            },\n\n            indent: function indent(state, textAfter, fullLine) {\n              var context = state.context;\n              // Indent multi-line strings (e.g. css).\n              if (state.tokenize.isInAttribute) {\n                if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n              }\n              if (context && context.noIndent) return CodeMirror.Pass;\n              if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n              // Indent the starts of attribute names.\n              if (state.tagName) {\n                if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n              }\n              if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n              var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n              if (tagAfter && tagAfter[1]) {\n                // Closing tag spotted\n                while (context) {\n                  if (context.tagName == tagAfter[2]) {\n                    context = context.prev;\n                    break;\n                  } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n                    context = context.prev;\n                  } else {\n                    break;\n                  }\n                }\n              } else if (tagAfter) {\n                // Opening tag spotted\n                while (context) {\n                  var grabbers = config.contextGrabbers[context.tagName];\n                  if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n                }\n              }\n              while (context && context.prev && !context.startOfLine) {\n                context = context.prev;\n              }if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n            },\n\n            electricInput: /<\\/[\\s\\w:]+>$/,\n            blockCommentStart: \"<!--\",\n            blockCommentEnd: \"-->\",\n\n            configuration: config.htmlMode ? \"html\" : \"xml\",\n            helperType: config.htmlMode ? \"html\" : \"xml\",\n\n            skipAttribute: function skipAttribute(state) {\n              if (state.state == attrValueState) state.state = attrState;\n            }\n          };\n        });\n\n        CodeMirror.defineMIME(\"text/xml\", \"xml\");\n        CodeMirror.defineMIME(\"application/xml\", \"xml\");\n        if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", { name: \"xml\", htmlMode: true });\n      });\n    }, { \"../../lib/codemirror\": 7 }] }, {}, [2]);\n  ;\n})();"]}